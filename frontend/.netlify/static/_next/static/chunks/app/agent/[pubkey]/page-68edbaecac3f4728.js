(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[971],{46601:function(){},22879:function(e,t,s){Promise.resolve().then(s.bind(s,77011))},77011:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return W}});var a=s(57437),r=s(2265),l=s(99376),n=s(15408),i=s(13816),d=s(72596),o=s(64024),c=s(83464);function x(e){let{currentPrice:t,tokensSold:s,totalSupply:l,marketCap:n,progress:i}=e,d=(0,r.useRef)(null),[o,c]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=d.current;if(!e)return;let a=e.getContext("2d");if(!a)return;let r=window.devicePixelRatio||1,n=e.getBoundingClientRect();e.width=n.width*r,e.height=n.height*r,a.scale(r,r);let i=n.width,o=n.height;a.clearRect(0,0,i,o),a.strokeStyle="#374151",a.lineWidth=.5;for(let e=0;e<=10;e++){let t=40+e/10*(i-80),s=40+e/10*(o-80);a.beginPath(),a.moveTo(t,40),a.lineTo(t,o-40),a.stroke(),a.beginPath(),a.moveTo(40,s),a.lineTo(i-40,s),a.stroke()}a.strokeStyle="#8b5cf6",a.lineWidth=3,a.beginPath();for(let e=0;e<=100;e++){let t=e/100,s=40+t*(i-80),r=o-40-1e-5*Math.pow(1+t*l/1e6,2)/(1e-5*Math.pow(1+l/1e6,2))*(o-80);0===e?a.moveTo(s,r):a.lineTo(s,r)}a.stroke();let c=40+s/l*(i-80),x=o-40-t/(1e-5*Math.pow(1+l/1e6,2))*(o-80);a.strokeStyle="#22d3ee",a.lineWidth=2,a.setLineDash([5,5]),a.beginPath(),a.moveTo(c,40),a.lineTo(c,o-40),a.stroke(),a.setLineDash([]);let m=a.createLinearGradient(0,40,0,o-40);m.addColorStop(0,"rgba(139, 92, 246, 0.3)"),m.addColorStop(1,"rgba(139, 92, 246, 0.05)"),a.fillStyle=m,a.beginPath(),a.moveTo(40,o-40);for(let e=0;e<=s/l*100;e++){let t=e/100,s=40+t*(i-80),r=o-40-1e-5*Math.pow(1+t*l/1e6,2)/(1e-5*Math.pow(1+l/1e6,2))*(o-80);a.lineTo(s,r)}a.lineTo(c,o-40),a.closePath(),a.fill(),a.fillStyle="#22d3ee",a.beginPath(),a.arc(c,x,6,0,2*Math.PI),a.fill(),a.shadowBlur=15,a.shadowColor="#22d3ee",a.beginPath(),a.arc(c,x,6,0,2*Math.PI),a.fill(),a.shadowBlur=0,a.fillStyle="#9ca3af",a.font="12px sans-serif",a.textAlign="center";for(let e=0;e<=4;e++){let t=40+e/4*(i-80),s=e/4*l;a.fillText("".concat((s/1e6).toFixed(1),"M"),t,o-20)}a.textAlign="right";for(let e=0;e<=4;e++){let t=o-40-e/4*(o-80),s=e/4*(1e-5*Math.pow(1+l/1e6,2));a.fillText(s.toFixed(6),35,t+4)}a.fillStyle="#ffffff",a.font="bold 14px sans-serif",a.textAlign="center",a.fillText("Tokens Sold",i/2,o-5),a.save(),a.translate(15,o/2),a.rotate(-Math.PI/2),a.fillText("Price (SOL)",0,0),a.restore()},[t,s,l]),(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:"\uD83D\uDCC8 Bonding Curve"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Exponential price discovery curve - price increases as more tokens are sold"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"Current Price"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-cyan-400",children:[t.toFixed(6)," SOL"]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"Market Cap"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-purple-400",children:[n.toFixed(2)," SOL"]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"Tokens Sold"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-green-400",children:[(s/1e6).toFixed(2),"M"]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"Progress"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-yellow-400",children:[i.toFixed(1),"%"]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Progress to Graduation"}),(0,a.jsxs)("span",{className:"text-white font-semibold",children:[i.toFixed(2),"% / 100%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-800 rounded-full h-3 overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-purple-600 via-pink-500 to-cyan-500 rounded-full transition-all duration-500 relative",style:{width:"".concat(Math.min(i,100),"%")},children:(0,a.jsx)("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})}),i>=99&&(0,a.jsx)("div",{className:"mt-2 text-center text-yellow-400 font-semibold animate-pulse",children:"\uD83C\uDF93 Ready for Raydium Graduation!"})]}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("canvas",{ref:d,className:"w-full rounded-lg bg-gray-950",style:{height:"300px"}})}),(0,a.jsxs)("div",{className:"flex justify-center gap-6 mt-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-0.5 bg-purple-500"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Bonding Curve"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-0.5 bg-cyan-400"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Current Position"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-purple-500/20 rounded"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Filled Area"})]})]}),(0,a.jsx)("div",{className:"mt-6 bg-blue-900/20 border border-blue-700/30 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCA1"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-blue-300 mb-1",children:"How it works"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"The bonding curve uses an exponential formula where price increases as more tokens are sold. When 100% of tokens are sold, the agent graduates to Raydium with automatic liquidity provision. Early buyers get lower prices, later buyers pay more - incentivizing early discovery!"})]})]})})]})}var m=s(25566);class u{connect(){return new Promise((e,t)=>{var s;if((null===(s=this.ws)||void 0===s?void 0:s.readyState)===WebSocket.OPEN||this.isConnecting){e();return}this.isConnecting=!0;try{this.ws=new WebSocket(this.url),this.ws.onopen=()=>{console.log("[WebSocket] Connected"),this.isConnecting=!1,this.reconnectAttempts=0,this.subscribedChannels.forEach(e=>{this.subscribe(e)}),this.startHeartbeat(),this.connectionHandlers.forEach(e=>e()),e()},this.ws.onmessage=e=>{try{let t=JSON.parse(e.data);this.handleMessage(t)}catch(e){console.error("[WebSocket] Failed to parse message:",e)}},this.ws.onerror=e=>{console.error("[WebSocket] Error:",e),this.isConnecting=!1,t(e)},this.ws.onclose=()=>{console.log("[WebSocket] Disconnected"),this.isConnecting=!1,this.stopHeartbeat(),this.disconnectionHandlers.forEach(e=>e()),this.attemptReconnect()}}catch(e){this.isConnecting=!1,t(e)}})}handleMessage(e){switch(e.type){case"connected":console.log("[WebSocket] Server acknowledged connection");break;case"pong":break;case"subscribed":console.log("[WebSocket] Subscribed to channel:",e.channel);break;case"unsubscribed":console.log("[WebSocket] Unsubscribed from channel:",e.channel);break;case"error":console.error("[WebSocket] Server error:",e.message);break;default:e.channel&&this.notifyHandlers(e.channel,e),this.notifyHandlers(e.type,e)}}notifyHandlers(e,t){let s=this.messageHandlers.get(e);s&&s.forEach(e=>{try{e(t)}catch(e){console.error("[WebSocket] Handler error:",e)}})}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("[WebSocket] Max reconnection attempts reached");return}let e=this.reconnectDelay*Math.pow(2,this.reconnectAttempts);this.reconnectAttempts++,console.log("[WebSocket] Reconnecting in ".concat(e,"ms (attempt ").concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts,")")),this.reconnectTimeout=setTimeout(()=>{this.connect().catch(e=>{console.error("[WebSocket] Reconnection failed:",e)})},e)}startHeartbeat(){this.heartbeatInterval=setInterval(()=>{var e;(null===(e=this.ws)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&this.send({type:"ping"})},3e4)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}send(e){var t;(null===(t=this.ws)||void 0===t?void 0:t.readyState)===WebSocket.OPEN?this.ws.send(JSON.stringify(e)):console.warn("[WebSocket] Cannot send message, not connected")}subscribe(e,t){var s;this.subscribedChannels.add(e),t&&this.on(e,t),(null===(s=this.ws)||void 0===s?void 0:s.readyState)===WebSocket.OPEN&&this.send({type:"subscribe",channel:e})}unsubscribe(e,t){var s;this.subscribedChannels.delete(e),t&&this.off(e,t),(null===(s=this.ws)||void 0===s?void 0:s.readyState)===WebSocket.OPEN&&this.send({type:"unsubscribe",channel:e})}authenticate(e,t){this.send({type:"auth",walletAddress:e,signature:t})}on(e,t){this.messageHandlers.has(e)||this.messageHandlers.set(e,new Set),this.messageHandlers.get(e).add(t)}off(e,t){let s=this.messageHandlers.get(e);s&&(s.delete(t),0===s.size&&this.messageHandlers.delete(e))}onConnect(e){this.connectionHandlers.add(e)}onDisconnect(e){this.disconnectionHandlers.add(e)}disconnect(){this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.stopHeartbeat(),this.ws&&(this.ws.close(),this.ws=null),this.subscribedChannels.clear(),this.messageHandlers.clear(),this.connectionHandlers.clear(),this.disconnectionHandlers.clear()}isConnected(){var e;return(null===(e=this.ws)||void 0===e?void 0:e.readyState)===WebSocket.OPEN}constructor(e){this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.messageHandlers=new Map,this.connectionHandlers=new Set,this.disconnectionHandlers=new Set,this.subscribedChannels=new Set,this.isConnecting=!1,this.reconnectTimeout=null,this.heartbeatInterval=null,this.url=e}}let h=null;function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{channels:t=[],autoConnect:s=!0,onConnect:a,onDisconnect:l}=e,[n,i]=(0,r.useState)(!1),d=(0,r.useRef)((h||(h=new u(m.env.NEXT_PUBLIC_WS_URL||"ws://localhost:3001/ws")),h)),o=(0,r.useRef)(new Map);(0,r.useEffect)(()=>{let e=d.current;return e.onConnect(()=>{i(!0),null==a||a()}),e.onDisconnect(()=>{i(!1),null==l||l()}),s&&!e.isConnected()&&e.connect().catch(e=>{console.error("[useWebSocket] Connection failed:",e)}),t.forEach(t=>{e.subscribe(t)}),i(e.isConnected()),()=>{t.forEach(t=>{e.unsubscribe(t)}),o.current.forEach((t,s)=>{t.forEach(t=>{e.off(s,t)})}),o.current.clear()}},[s,a,l]);let c=(0,r.useCallback)((e,t)=>{d.current.subscribe(e,t),o.current.has(e)||o.current.set(e,new Set),o.current.get(e).add(t)},[]);return{isConnected:n,subscribe:c,unsubscribe:(0,r.useCallback)((e,t)=>{d.current.unsubscribe(e,t);let s=o.current.get(e);s&&(s.delete(t),0===s.size&&o.current.delete(e))},[]),on:(0,r.useCallback)((e,t)=>{d.current.on(e,t),o.current.has(e)||o.current.set(e,new Set),o.current.get(e).add(t)},[]),off:(0,r.useCallback)((e,t)=>{d.current.off(e,t);let s=o.current.get(e);s&&(s.delete(t),0===s.size&&o.current.delete(e))},[])}}function b(e){let[t,s]=(0,r.useState)(null),[a,l]=(0,r.useState)([]),[n,i]=(0,r.useState)(null),{isConnected:d,subscribe:o,unsubscribe:c}=g({channels:["agent:".concat(e)]});return(0,r.useEffect)(()=>{let t=e=>{e.data&&s(e.data)},a=e=>{e.data&&l(t=>[e.data,...t].slice(0,50))},r=e=>{e.data&&i(e.data)};return o("agent:".concat(e),e=>{switch(e.type){case"price_update":t(e);break;case"trade_executed":a(e);break;case"graduation":r(e)}}),()=>{}},[e,o,c]),{isConnected:d,priceData:t,trades:a,graduation:n}}function p(e){let{className:t="",showText:s=!0,size:r="md"}=e,{isConnected:l}=g({autoConnect:!0}),n={sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4"};return(0,a.jsxs)("div",{className:"flex items-center gap-2 ".concat(t),children:[(0,a.jsx)("div",{className:"relative",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"".concat(n[r]," rounded-full bg-green-500 animate-pulse")}),(0,a.jsx)("div",{className:"absolute inset-0 ".concat(n[r]," rounded-full bg-green-400 animate-ping")})]}):(0,a.jsx)("div",{className:"".concat(n[r]," rounded-full bg-gray-500")})}),s&&(0,a.jsx)("span",{className:"font-semibold ".concat({sm:"text-xs",md:"text-sm",lg:"text-base"}[r]," ").concat(l?"text-green-400":"text-gray-500"),children:l?"LIVE":"Offline"})]})}var v=s(82957).Buffer;let y="https://degenagent-backend.onrender.com/api";function f(e){let{agentId:t}=e,{publicKey:s,sendTransaction:l}=(0,n.O)(),{connection:d}=(0,i.R)(),[m,u]=(0,r.useState)(null),[h,g]=(0,r.useState)([]),[f,j]=(0,r.useState)(!0),[N,w]=(0,r.useState)("buy"),[k,S]=(0,r.useState)(""),[C,D]=(0,r.useState)(null),[T,F]=(0,r.useState)(!1),[P,E]=(0,r.useState)(!1),{isConnected:A,trades:R,priceData:L,graduation:B}=b(t);(0,r.useEffect)(()=>{R.length>0&&g(e=>Array.from(new Map([...R,...e].map(e=>[e.id,e])).values()).slice(0,10))},[R]),(0,r.useEffect)(()=>{L&&m&&u(e=>e?{...e,stats:{...e.stats,currentPrice:L.currentPrice||e.stats.currentPrice}}:null)},[L]),(0,r.useEffect)(()=>{B&&(alert("\uD83C\uDF89 GRADUATION! This token has completed its bonding curve and graduated to Raydium DEX!\n\nPool Created: ".concat(B.poolId)),O())},[B]),(0,r.useEffect)(()=>{O()},[t]),(0,r.useEffect)(()=>{if(k&&parseFloat(k)>0){let e=setTimeout(()=>{M()},500);return()=>clearTimeout(e)}D(null)},[k,N]);let O=async()=>{try{let e=await c.Z.get("".concat(y,"/bonding-curve/").concat(t));e.data.success&&(u(e.data.bondingCurve),g(e.data.recentTrades||[]))}catch(e){console.error("Error fetching bonding curve:",e)}finally{j(!1)}},M=async()=>{if(!(!k||0>=parseFloat(k)))try{F(!0);let e="buy"===N?"/bonding-curve/quote-buy":"/bonding-curve/quote-sell",s=await c.Z.post("".concat(y).concat(e),{agentId:t,amount:parseFloat(k)});s.data.success&&D(s.data.quote)}catch(e){console.error("Error fetching quote:",e),D(null)}finally{F(!1)}},W=async()=>{var e,a,r;if(s&&k&&C)try{if(E(!0),"buy"===N){let a=await c.Z.post("".concat(y,"/bonding-curve/buy"),{agentId:t,amount:parseFloat(k),buyerWallet:s.toString()}),r=v.from(a.data.transaction,"base64"),n=o.YW.from(r),i=await l(n,d);console.log("Transaction sent:",i),await d.confirmTransaction(i,"confirmed");let x=await c.Z.post("".concat(y,"/bonding-curve/confirm-buy"),{agentId:t,amount:parseFloat(k),signature:i,buyerWallet:s.toString()});(null===(e=x.data.graduation)||void 0===e?void 0:e.success)?alert("\uD83C\uDF89 GRADUATION! This token has completed its bonding curve and graduated to Raydium DEX!\n\nPool Created: ".concat(x.data.graduation.data.poolId)):alert("Successfully bought ".concat(k," tokens!"))}else alert("Sell functionality coming soon!");S(""),D(null),await O()}catch(e){console.error("Error executing trade:",e),alert((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.error)||e.message||"Trade failed")}finally{E(!1)}},I=e=>{let t="string"==typeof e?parseFloat(e):e;return 0===t?"0":t<.001?t.toExponential(4):t.toFixed(6)},H=e=>e>=1e6?"".concat((e/1e6).toFixed(2),"M"):e>=1e3?"".concat((e/1e3).toFixed(2),"K"):e.toFixed(0);if(f)return(0,a.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Loading bonding curve..."})]});if(!m)return(0,a.jsx)("div",{className:"bg-gray-800 rounded-xl p-8 text-center",children:(0,a.jsx)("p",{className:"text-gray-400",children:"Bonding curve not available"})});if(m.graduated)return(0,a.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 text-center border-2 border-green-500",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF93"}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-green-400 mb-2",children:"Graduated to Raydium!"}),(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:"This token has completed its bonding curve and graduated to Raydium DEX"}),m&&(0,a.jsx)("a",{href:"https://raydium.io/swap/?inputCurrency=sol&outputCurrency=".concat(m),target:"_blank",rel:"noopener noreferrer",className:"inline-block px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg font-bold hover:from-green-600 hover:to-emerald-700 transition",children:"Trade on Raydium →"})]});let _=m.stats;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:"Bonding Curve"}),(0,a.jsx)(p,{size:"sm"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-400 mb-2",children:[(0,a.jsx)("span",{children:"Progress to Graduation"}),(0,a.jsxs)("span",{children:[_.progress.toFixed(2),"%"]})]}),(0,a.jsx)("div",{className:"bg-gray-700 rounded-full h-4",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-500 via-pink-500 to-green-500 h-4 rounded-full transition-all duration-500",style:{width:"".concat(Math.min(_.progress,100),"%")}})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[H(_.tokensRemaining)," tokens remaining until Raydium"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-gray-400 text-xs mb-1",children:"Current Price"}),(0,a.jsxs)("div",{className:"text-lg font-bold text-green-400",children:[I(_.currentPrice)," SOL"]})]}),(0,a.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-gray-400 text-xs mb-1",children:"Total Sold"}),(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:H(_.tokensSold)})]}),(0,a.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-gray-400 text-xs mb-1",children:"TVL"}),(0,a.jsxs)("div",{className:"text-lg font-bold text-purple-400",children:[I(_.totalValueLocked)," SOL"]})]}),(0,a.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-gray-400 text-xs mb-1",children:"Available"}),(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:H(_.tokensRemaining)})]})]})]}),(0,a.jsx)(x,{currentPrice:_.currentPrice,tokensSold:_.tokensSold,totalSupply:_.tokensSold+_.tokensRemaining,marketCap:_.currentPrice*(_.tokensSold+_.tokensRemaining),progress:_.progress}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,a.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,a.jsx)("button",{onClick:()=>w("buy"),className:"flex-1 py-3 rounded-lg font-semibold transition ".concat("buy"===N?"bg-gradient-to-r from-green-600 to-emerald-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"),children:"Buy"}),(0,a.jsx)("button",{onClick:()=>w("sell"),className:"flex-1 py-3 rounded-lg font-semibold transition ".concat("sell"===N?"bg-gradient-to-r from-red-600 to-orange-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"),children:"Sell"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{className:"block text-sm text-gray-400 mb-2",children:["Amount of tokens to ",N]}),(0,a.jsx)("input",{type:"number",value:k,onChange:e=>S(e.target.value),placeholder:"0",className:"w-full bg-gray-900 text-white text-2xl rounded-lg px-4 py-4 border border-gray-700 focus:border-purple-500 outline-none",disabled:!s}),(0,a.jsx)("div",{className:"flex gap-2 mt-2",children:[1e5,5e5,1e6,5e6].map(e=>(0,a.jsx)("button",{onClick:()=>S(e.toString()),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white text-xs py-2 rounded transition",disabled:!s,children:H(e)},e))})]}),T?(0,a.jsx)("div",{className:"bg-gray-900 rounded-lg p-4 mb-4",children:(0,a.jsx)("div",{className:"text-center text-gray-400",children:"Calculating quote..."})}):C?(0,a.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4 mb-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-400",children:["You ","buy"===N?"pay":"receive",":"]}),(0,a.jsxs)("span",{className:"text-white font-semibold",children:[I("buy"===N?C.totalCostSOL:C.netProceedsSOL)," SOL"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Price per token:"}),(0,a.jsxs)("span",{className:"text-white font-semibold",children:[I(C.pricePerToken)," SOL"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Price impact:"}),(0,a.jsxs)("span",{className:"font-semibold ".concat(C.priceImpact>5?"text-red-400":"text-green-400"),children:[C.priceImpact.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Platform fee (1%):"}),(0,a.jsxs)("span",{className:"text-gray-400",children:[I(C.platformFee)," SOL"]})]}),(0,a.jsx)("div",{className:"border-t border-gray-700 pt-2 mt-2",children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-300 font-semibold",children:"New price:"}),(0,a.jsxs)("span",{className:"text-purple-400 font-semibold",children:[I(C.newPrice)," SOL"]})]})})]}):null,s?(0,a.jsx)("button",{onClick:W,disabled:!C||P||!k||0>=parseFloat(k),className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:from-gray-700 disabled:to-gray-700 disabled:cursor-not-allowed text-white py-4 rounded-lg font-bold transition-all transform hover:scale-105 active:scale-95",children:P?"Processing...":"".concat("buy"===N?"Buy":"Sell"," Tokens")}):(0,a.jsx)("button",{disabled:!0,className:"w-full bg-gray-700 text-gray-400 py-4 rounded-lg font-bold cursor-not-allowed",children:"Connect Wallet to Trade"})]}),h.length>0&&(0,a.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Recent Trades"}),(0,a.jsx)("div",{className:"space-y-2",children:h.slice(0,10).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-900 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("buy"===e.type?"bg-green-500":"bg-red-500")}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-white",children:["buy"===e.type?"Buy":"Sell"," ",H(parseFloat(e.tokenAmount))," tokens"]}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleString()})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-white",children:[I(e.solAmount)," SOL"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:[I(e.pricePerToken)," per token"]})]})]},e.id))})]})]})}var j=s(10391);let N=[{value:"1m",label:"1m"},{value:"5m",label:"5m"},{value:"15m",label:"15m"},{value:"1h",label:"1h"},{value:"4h",label:"4h"},{value:"1d",label:"1d"}];function w(e){let{agentId:t}=e,s=(0,r.useRef)(null),l=(0,r.useRef)(null),n=(0,r.useRef)(null),[i,d]=(0,r.useState)("1h"),[o,x]=(0,r.useState)([]),[m,u]=(0,r.useState)(null),[h,g]=(0,r.useState)(!0),{isConnected:v,priceData:y}=b(t);(0,r.useEffect)(()=>{if(!s.current)return;let e=(0,j.C2)(s.current,{width:s.current.clientWidth,height:400,layout:{background:{type:j.Mr.Solid,color:"#1f2937"},textColor:"#9ca3af"},grid:{vertLines:{color:"#374151"},horzLines:{color:"#374151"}},timeScale:{timeVisible:!0,secondsVisible:!1,borderColor:"#374151"},rightPriceScale:{borderColor:"#374151"}}),t=e.addCandlestickSeries({upColor:"#10b981",downColor:"#ef4444",borderUpColor:"#10b981",borderDownColor:"#ef4444",wickUpColor:"#10b981",wickDownColor:"#ef4444"});l.current=e,n.current=t;let a=()=>{s.current&&l.current&&l.current.applyOptions({width:s.current.clientWidth})};return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a),e.remove()}},[]),(0,r.useEffect)(()=>{f();let e=setInterval(f,6e4);return()=>clearInterval(e)},[t,i]),(0,r.useEffect)(()=>{y&&void 0!==y.currentPrice&&u(e=>e?{...e,currentPrice:y.currentPrice,marketCap:y.marketCap||e.marketCap}:null)},[y]),(0,r.useEffect)(()=>{if(!n.current||0===o.length)return;let e=o.map(e=>({time:new Date(e.timestamp).getTime()/1e3,open:e.open,high:e.high,low:e.low,close:e.close}));n.current.setData(e),l.current&&l.current.timeScale().fitContent()},[o]);let f=async()=>{try{g(!0);let e=await c.Z.get("".concat("https://degenagent-backend.onrender.com/api","/chart/").concat(t),{params:{timeframe:i,limit:100}});e.data.success&&(x(e.data.data.candles),u(e.data.data.stats))}catch(e){console.error("Error fetching chart data:",e)}finally{g(!1)}},w=e=>0===e?"0":e<.001?e.toExponential(4):e.toFixed(6),k=e=>e>=1e6?"".concat((e/1e6).toFixed(2),"M"):e>=1e3?"".concat((e/1e3).toFixed(2),"K"):e.toFixed(0);return(0,a.jsxs)("div",{className:"bg-gray-800 rounded-xl border border-gray-700 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 sm:p-6 border-b border-gray-700",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white",children:"Price Chart"}),(0,a.jsx)(p,{size:"sm"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"Price"}),(0,a.jsxs)("div",{className:"text-lg sm:text-xl font-bold text-white",children:[m?w(m.currentPrice):"..."," SOL"]}),m&&0!==m.priceChangePercent24h&&(0,a.jsxs)("div",{className:"text-xs font-semibold ".concat(m.priceChangePercent24h>=0?"text-green-400":"text-red-400"),children:[m.priceChangePercent24h>=0?"+":"",m.priceChangePercent24h.toFixed(2),"% (24h)"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"Market Cap"}),(0,a.jsxs)("div",{className:"text-lg sm:text-xl font-bold text-purple-400",children:["$",m?k(m.marketCap):"..."]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"24h Change"}),(0,a.jsxs)("div",{className:"text-lg sm:text-xl font-bold ".concat(m&&m.priceChange24h>=0?"text-green-400":"text-red-400"),children:[m&&m.priceChange24h>=0?"+":"",m?w(Math.abs(m.priceChange24h)):"..."," SOL"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"Total Trades"}),(0,a.jsx)("div",{className:"text-lg sm:text-xl font-bold text-white",children:m?k(m.totalTrades):"..."})]})]})]}),(0,a.jsx)("div",{className:"px-4 sm:px-6 py-3 border-b border-gray-700 flex gap-2 overflow-x-auto",children:N.map(e=>(0,a.jsx)("button",{onClick:()=>d(e.value),className:"px-3 py-1.5 rounded-lg font-semibold text-sm transition whitespace-nowrap ".concat(i===e.value?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:e.label},e.value))}),(0,a.jsxs)("div",{className:"relative",children:[h&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800/50 z-10",children:(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-purple-500 border-t-transparent rounded-full"})}),(0,a.jsx)("div",{ref:s,className:"w-full"})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-700 flex gap-6 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Bullish (Buy Pressure)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Bearish (Sell Pressure)"})]})]})]})}var k=s(70522),S=s(56151),C=s(52241),D=s(14179),T=s(25566);S.Z.registerLanguage("typescript",C.Z);let F=T.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001",P="// \uD83E\uDD16 Your Custom Trading Strategy\n// This code runs when your agent evaluates trading opportunities\n\ninterface MarketData {\n  price: number;\n  volume24h: number;\n  priceChange24h: number;\n  liquidity: number;\n}\n\ninterface Position {\n  amount: number;\n  entryPrice: number;\n}\n\n// Your strategy function - return true to BUY, false to SKIP\nexport function shouldBuy(market: MarketData, position: Position | null): boolean {\n  // Example: Buy if price dropped >5% and volume is high\n  if (market.priceChange24h < -5 && market.volume24h > 100000) {\n    return true;\n  }\n\n  // Add your own logic here!\n  return false;\n}\n\n// Your sell strategy - return true to SELL, false to HOLD\nexport function shouldSell(market: MarketData, position: Position): boolean {\n  const profit = ((market.price - position.entryPrice) / position.entryPrice) * 100;\n\n  // Example: Take profit at +20% or stop loss at -10%\n  if (profit > 20 || profit < -10) {\n    return true;\n  }\n\n  return false;\n}\n\n// Risk management - how much SOL to trade (0.1 to 1.0)\nexport function calculatePositionSize(market: MarketData, availableBalance: number): number {\n  // Start conservative\n  return availableBalance * 0.1;\n}";function E(e){let{agentId:t,initialCode:s,onSave:l}=e,[n,i]=(0,r.useState)(s||P),[d,o]=(0,r.useState)(!1),[x,m]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[g,b]=(0,r.useState)(!1),[p,v]=(0,r.useState)(null),[y,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{j()},[t]);let j=async()=>{try{let e=await c.Z.get("".concat(F,"/strategy/").concat(t));e.data.success&&i(e.data.strategy.code)}catch(e){console.log("No existing strategy found, using template")}},N=async()=>{m(!0);try{(await c.Z.post("".concat(F,"/strategy/save"),{agentId:t,name:"Custom Strategy",description:"User-defined trading strategy",code:n})).data.success&&(alert("✅ Strategy saved! Your agent will use this code on next trade."),o(!1),l&&await l(n))}catch(l){var e,s,a,r;let t=(null===(s=l.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.details)||[];alert("❌ Failed to save:\n"+(t.length>0?"Validation errors:\n".concat(t.join("\n")):(null===(r=l.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.error)||l.message))}finally{m(!1)}},w=async()=>{h(!0),v(null);try{let e=await c.Z.post("".concat(F,"/strategy/test"),{code:n,marketData:{price:.5,volume24h:15e4,priceChange24h:-7.5,liquidity:5e4}});e.data.success&&!e.data.result.error?v({success:!0,shouldBuy:e.data.result.shouldBuy,shouldSell:e.data.result.shouldSell,positionSize:e.data.result.positionSize,market:e.data.result.market}):v({success:!1,error:e.data.result.error||"Unknown error"})}catch(s){var e,t;v({success:!1,error:(null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||s.message})}finally{h(!1)}},k=async()=>{b(!0),f(null);try{let e=await c.Z.post("".concat(F,"/strategy/backtest"),{agentId:t,code:n});e.data.success&&f(e.data.results)}catch(t){var e,s;f({error:(null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.error)||t.message})}finally{b(!1)}};return(0,a.jsxs)("div",{className:"bg-gray-800 rounded-xl border border-gray-700 overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-900/50 to-pink-900/50 p-4 border-b border-purple-500/50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white mb-1",children:"⚡ Custom Trading Strategy"}),(0,a.jsx)("p",{className:"text-sm text-gray-300",children:"Write your own trading logic in TypeScript"})]}),(0,a.jsx)("div",{className:"flex gap-2",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold transition",children:"Cancel"}),(0,a.jsx)("button",{onClick:N,disabled:x,className:"px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 rounded-lg font-bold transition disabled:opacity-50",children:x?"Saving...":"\uD83D\uDCBE Save Strategy"})]}):(0,a.jsx)("button",{onClick:()=>o(!0),className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 rounded-lg font-bold transition",children:"✏️ Edit Code"})})]})}),(0,a.jsx)("div",{className:"p-6",children:d?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("textarea",{value:n,onChange:e=>i(e.target.value),className:"w-full h-96 bg-gray-900 text-white font-mono text-sm p-4 rounded-lg border border-gray-700 focus:border-purple-500 outline-none resize-none",spellCheck:!1}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:w,disabled:u,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold transition disabled:opacity-50",children:u?"\uD83D\uDD04 Testing...":"\uD83E\uDDEA Test Strategy"}),(0,a.jsx)("button",{onClick:k,disabled:g,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg font-semibold transition disabled:opacity-50",children:g?"\uD83D\uDD04 Backtesting...":"\uD83D\uDCCA Backtest"}),(0,a.jsx)("button",{onClick:()=>i(P),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold transition",children:"\uD83D\uDD04 Reset to Template"})]}),p&&(0,a.jsx)("div",{className:"rounded-lg p-4 border ".concat(p.success?"bg-green-900/20 border-green-600/50":"bg-red-900/20 border-red-600/50"),children:p.success?(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-green-400 mb-3",children:"✅ Test Results"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Market Price:"}),(0,a.jsxs)("span",{className:"text-white",children:["$",p.market.price]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Volume 24h:"}),(0,a.jsx)("span",{className:"text-white",children:p.market.volume24h.toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Price Change:"}),(0,a.jsxs)("span",{className:p.market.priceChange24h>=0?"text-green-400":"text-red-400",children:[p.market.priceChange24h.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-700 pt-2 mt-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Should Buy:"}),(0,a.jsx)("span",{className:p.shouldBuy?"text-green-400 font-bold":"text-gray-500",children:p.shouldBuy?"YES ✓":"NO"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Should Sell:"}),(0,a.jsx)("span",{className:p.shouldSell?"text-red-400 font-bold":"text-gray-500",children:p.shouldSell?"YES ✓":"NO"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Position Size:"}),(0,a.jsxs)("span",{className:"text-purple-400 font-bold",children:[p.positionSize.toFixed(4)," SOL"]})]})]})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-red-400 mb-2",children:"❌ Test Failed"}),(0,a.jsx)("p",{className:"text-sm text-red-300",children:p.error})]})}),y&&(0,a.jsx)("div",{className:"rounded-lg p-4 border ".concat(y.error?"bg-red-900/20 border-red-600/50":"bg-purple-900/20 border-purple-600/50"),children:y.error?(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-red-400 mb-2",children:"❌ Backtest Failed"}),(0,a.jsx)("p",{className:"text-sm text-red-300",children:y.error})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-purple-400 mb-3",children:"\uD83D\uDCCA Backtest Results (100 periods)"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-400 mb-1",children:"Total Trades"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:y.totalTrades})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-400 mb-1",children:"Win Rate"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-400",children:[y.winRate.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-400 mb-1",children:"Total Return"}),(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(y.totalReturn>=0?"text-green-400":"text-red-400"),children:[y.totalReturn>=0?"+":"",y.totalReturn.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-400 mb-1",children:"Wins"}),(0,a.jsx)("div",{className:"text-xl font-bold text-green-400",children:y.wins})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-400 mb-1",children:"Losses"}),(0,a.jsx)("div",{className:"text-xl font-bold text-red-400",children:y.losses})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-400 mb-1",children:"Avg Return/Trade"}),(0,a.jsxs)("div",{className:"text-xl font-bold ".concat(y.avgReturn>=0?"text-green-400":"text-red-400"),children:[y.avgReturn.toFixed(2),"%"]})]})]})]})})]}):(0,a.jsx)("div",{className:"bg-gray-900 rounded-lg overflow-hidden",children:(0,a.jsx)(S.Z,{language:"typescript",style:D.Z,customStyle:{margin:0,padding:"1.5rem",background:"transparent",fontSize:"0.875rem"},children:n})})}),d&&(0,a.jsxs)("div",{className:"p-6 pt-0",children:[(0,a.jsx)("h4",{className:"text-lg font-bold text-white mb-3",children:"\uD83D\uDCDA Quick Examples"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[{name:"\uD83D\uDCC8 Momentum Trader",desc:"Buy on strong upward momentum",code:"export function shouldBuy(market: MarketData): boolean {\n  return market.priceChange24h > 10 && market.volume24h > 200000;\n}"},{name:"\uD83D\uDD0D Value Hunter",desc:"Buy dips with good liquidity",code:"export function shouldBuy(market: MarketData): boolean {\n  return market.priceChange24h < -15 && market.liquidity > 100000;\n}"},{name:"⚡ Scalper",desc:"Quick profits on volatility",code:"export function shouldSell(market: MarketData, position: Position): boolean {\n  const profit = ((market.price - position.entryPrice) / position.entryPrice) * 100;\n  return profit > 3 || profit < -2; // Quick 3% profit or 2% stop\n}"}].map(e=>(0,a.jsxs)("button",{onClick:()=>i(n+"\n\n"+e.code),className:"bg-gray-900 hover:bg-gray-800 p-4 rounded-lg border border-gray-700 hover:border-purple-500 transition text-left",children:[(0,a.jsx)("div",{className:"font-bold text-white mb-1",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:e.desc})]},e.name))})]}),(0,a.jsx)("div",{className:"bg-gray-900/50 p-4 border-t border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-start gap-3 text-sm text-gray-400",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCA1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"text-white",children:"Pro Tips:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,a.jsx)("li",{children:"Your code runs in a secure sandbox - no network access"}),(0,a.jsx)("li",{children:"Backtest your strategy before going live"}),(0,a.jsx)("li",{children:"Start conservative with position sizes"}),(0,a.jsx)("li",{children:"Use stop losses to protect your capital"})]})]})]})})]})}let A=s(25566).env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001";function R(e){var t,s,l,n,i,d,o,x,m,u,h,g,b,p;let{agentId:v,timeframe:y="1h"}=e,[f,j]=(0,r.useState)(null),[N,w]=(0,r.useState)(!0),[k,S]=(0,r.useState)(y);(0,r.useEffect)(()=>{C();let e=setInterval(C,3e4);return()=>clearInterval(e)},[v,k]);let C=async()=>{try{w(!0);let e=await c.Z.get("".concat(A,"/indicators/").concat(v,"?timeframe=").concat(k));e.data.success&&j(e.data)}catch(e){console.error("Error fetching indicators:",e)}finally{w(!1)}},D=e=>e>70?"text-red-400":e<30?"text-green-400":"text-yellow-400",T=e=>"bullish"===e?"\uD83D\uDE80":"bearish"===e?"\uD83D\uDCC9":"➡️";if(N&&!f)return(0,a.jsx)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-800 rounded w-1/3"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[...Array(6)].map((e,t)=>(0,a.jsx)("div",{className:"h-24 bg-gray-800 rounded"},t))})]})});if(!(null==f?void 0:f.latest))return(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6 text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCA"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Insufficient data for technical indicators"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"More trading activity needed"})]});let{latest:F,signals:P}=f;return(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-900/50 to-pink-900/50 p-6 border-b border-gray-800",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-white",children:"\uD83D\uDCCA Technical Indicators"}),(0,a.jsxs)("select",{value:k,onChange:e=>S(e.target.value),className:"bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"5m",children:"5 Minutes"}),(0,a.jsx)("option",{value:"15m",children:"15 Minutes"}),(0,a.jsx)("option",{value:"1h",children:"1 Hour"}),(0,a.jsx)("option",{value:"4h",children:"4 Hours"}),(0,a.jsx)("option",{value:"1d",children:"1 Day"})]})]}),(0,a.jsx)("div",{className:"bg-gradient-to-r ".concat("bullish"===(b=P.overallSentiment)?"from-green-600 to-emerald-600":"bearish"===b?"from-red-600 to-pink-600":"from-gray-600 to-slate-600"," rounded-lg p-4"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-white/80 mb-1",children:"Overall Sentiment"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-white capitalize",children:[T(P.overallSentiment)," ",P.overallSentiment]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm text-white/80",children:"Signal Breakdown"}),(0,a.jsxs)("div",{className:"flex gap-4 mt-1",children:[(0,a.jsxs)("span",{className:"text-white font-semibold",children:["\uD83D\uDFE2 ",P.buySignals]}),(0,a.jsxs)("span",{className:"text-white font-semibold",children:["\uD83D\uDD34 ",P.sellSignals]}),(0,a.jsxs)("span",{className:"text-white font-semibold",children:["⚪ ",P.neutralSignals]})]})]})]})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"RSI (14)"}),(0,a.jsx)("div",{className:"text-3xl font-bold ".concat(D(F.rsi.value)," mb-2"),children:(null===(t=F.rsi.value)||void 0===t?void 0:t.toFixed(2))||"N/A"}),(0,a.jsx)("div",{className:"text-sm text-gray-300",children:"overbought"===(p=F.rsi.signal)?"⚠️ Overbought":"oversold"===p?"\uD83D\uDCB0 Oversold":"➡️ Neutral"}),(0,a.jsx)("div",{className:"mt-2 w-full bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full ".concat(D(F.rsi.value)),style:{width:"".concat(F.rsi.value||0,"%")}})})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"MACD"}),(0,a.jsxs)("div",{className:"text-3xl font-bold mb-2 ".concat("bullish"===F.macd.trend?"text-green-400":"bearish"===F.macd.trend?"text-red-400":"text-gray-400"),children:[T(F.macd.trend)," ",F.macd.trend]}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"MACD:"}),(0,a.jsx)("span",{className:"text-white",children:(null===(s=F.macd.macd)||void 0===s?void 0:s.toFixed(4))||"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Signal:"}),(0,a.jsx)("span",{className:"text-white",children:(null===(l=F.macd.signal)||void 0===l?void 0:l.toFixed(4))||"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Histogram:"}),(0,a.jsx)("span",{className:F.macd.histogram>0?"text-green-400":"text-red-400",children:(null===(n=F.macd.histogram)||void 0===n?void 0:n.toFixed(4))||"N/A"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"Bollinger Bands"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Upper:"}),(0,a.jsx)("span",{className:"text-red-400",children:(null===(i=F.bollingerBands.upper)||void 0===i?void 0:i.toFixed(6))||"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Middle:"}),(0,a.jsx)("span",{className:"text-yellow-400",children:(null===(d=F.bollingerBands.middle)||void 0===d?void 0:d.toFixed(6))||"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Lower:"}),(0,a.jsx)("span",{className:"text-green-400",children:(null===(o=F.bollingerBands.lower)||void 0===o?void 0:o.toFixed(6))||"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm pt-2 border-t border-gray-700",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"%B:"}),(0,a.jsxs)("span",{className:"font-semibold ".concat(F.bollingerBands.percentB<.2?"text-green-400":F.bollingerBands.percentB>.8?"text-red-400":"text-yellow-400"),children:[(100*F.bollingerBands.percentB).toFixed(1)||"N/A","%"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"ATR (Volatility)"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:(null===(x=F.atr)||void 0===x?void 0:x.toFixed(6))||"N/A"}),(0,a.jsx)("div",{className:"text-sm text-gray-300",children:F.atr>1e-5?"⚡ High Volatility":"\uD83D\uDE34 Low Volatility"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"On-Balance Volume"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-400 mb-2",children:(null===(m=F.obv)||void 0===m?void 0:m.toLocaleString())||"N/A"}),(0,a.jsx)("div",{className:"text-sm text-gray-300",children:"Volume Trend Indicator"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"VWAP"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-cyan-400 mb-2",children:(null===(u=F.vwap)||void 0===u?void 0:u.toFixed(6))||"N/A"}),(0,a.jsx)("div",{className:"text-sm text-gray-300",children:"Volume Weighted Avg"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 md:col-span-2 lg:col-span-3",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"Stochastic Oscillator"}),(0,a.jsxs)("div",{className:"flex gap-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:"%K"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:(null===(h=F.stochastic.k)||void 0===h?void 0:h.toFixed(2))||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:"%D"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-pink-400",children:(null===(g=F.stochastic.d)||void 0===g?void 0:g.toFixed(2))||"N/A"})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"Signal"}),(0,a.jsxs)("div",{className:"relative w-full bg-gray-700 rounded-full h-8",children:[F.stochastic.k&&(0,a.jsx)("div",{className:"absolute top-0 left-0 h-8 bg-purple-500/50 rounded-full transition-all",style:{width:"".concat(F.stochastic.k,"%")}}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs text-white font-semibold",children:F.stochastic.k<20?"\uD83D\uDCB0 Oversold":F.stochastic.k>80?"⚠️ Overbought":"➡️ Neutral"})})]})]})]})]})]}),(0,a.jsx)("div",{className:"mt-6 bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:[(0,a.jsx)("strong",{className:"text-white",children:"Note:"})," Technical indicators are calculated based on historical price data (",f.dataPoints," data points). They should be used in conjunction with other analysis methods. Past performance does not guarantee future results."]})})]})]})}let L=s(25566).env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001";function B(e){var t,s,l,n,i;let{agentId:d}=e,[o,x]=(0,r.useState)(null),[m,u]=(0,r.useState)(!0),[h,g]=(0,r.useState)([]);(0,r.useEffect)(()=>{b();let e=setInterval(b,3e4);return()=>clearInterval(e)},[d]);let b=async()=>{try{var e,t;u(!0);let[s,a]=await Promise.all([c.Z.get("".concat(L,"/performance/").concat(d)).catch(()=>({data:null})),c.Z.get("".concat(L,"/performance/").concat(d,"/history?days=7")).catch(()=>({data:{history:[]}}))]);(null===(e=s.data)||void 0===e?void 0:e.success)&&x(s.data.performance),(null===(t=a.data)||void 0===t?void 0:t.success)&&g(a.data.history||[])}catch(e){console.error("Error fetching performance:",e)}finally{u(!1)}};return m&&!o?(0,a.jsx)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-800 rounded w-1/3"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[...Array(6)].map((e,t)=>(0,a.jsx)("div",{className:"h-24 bg-gray-800 rounded"},t))})]})}):o?(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-900/50 to-blue-900/50 p-6 border-b border-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:"Performance Metrics"}),(0,a.jsxs)("p",{className:"text-sm text-gray-300",children:["Last updated: ",new Date(o.lastUpdated).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm text-gray-300 mb-1",children:"Global Rank"}),(0,a.jsxs)("div",{className:"text-4xl font-bold ".concat(1===(t=o.rank)?"text-yellow-400":t<=3?"text-gray-300":t<=10?"text-orange-400":"text-gray-400"),children:[1===(s=o.rank)?"\uD83E\uDD47":2===s?"\uD83E\uDD48":3===s?"\uD83E\uDD49":s<=10?"\uD83C\uDFC5":"\uD83D\uDCCA"," #",o.rank]}),0!==o.rankChange&&(0,a.jsxs)("div",{className:"text-sm mt-1 ".concat(o.rankChange>0?"text-green-400":"text-red-400"),children:[(l=o.rankChange)>0?"⬆️":l<0?"⬇️":"➡️"," ",Math.abs(o.rankChange)]})]})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"Return on Investment"}),(0,a.jsxs)("div",{className:"text-3xl font-bold ".concat((n=o.roi)>20?"text-green-400":n>0?"text-green-300":n<-20?"text-red-400":n<0?"text-red-300":"text-gray-400"," mb-1"),children:[o.roi>0?"+":"",o.roi.toFixed(2),"%"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["Total P&L: ",parseFloat(o.totalProfitLoss).toFixed(4)," SOL"]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"Win Rate"}),(0,a.jsxs)("div",{className:"text-3xl font-bold ".concat((i=o.winRate)>=70?"text-green-400":i>=50?"text-yellow-400":i>=30?"text-orange-400":"text-red-400"," mb-1"),children:[o.winRate.toFixed(1),"%"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:[o.winningTrades,"W / ",o.losingTrades,"L"]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"Total Trades"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-400 mb-1",children:o.totalTrades}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"All-time activity"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"Profit Factor"}),(0,a.jsx)("div",{className:"text-3xl font-bold mb-1 ".concat(o.profitFactor>2?"text-green-400":o.profitFactor>1?"text-yellow-400":"text-red-400"),children:o.profitFactor.toFixed(2)}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["Avg Win: ",parseFloat(o.averageProfit).toFixed(4)," SOL"]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"Sharpe Ratio"}),(0,a.jsx)("div",{className:"text-3xl font-bold mb-1 ".concat(o.sharpeRatio>2?"text-green-400":o.sharpeRatio>1?"text-yellow-400":"text-gray-400"),children:o.sharpeRatio.toFixed(2)}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Risk-adjusted returns"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"Max Drawdown"}),(0,a.jsxs)("div",{className:"text-3xl font-bold text-red-400 mb-1",children:["-",parseFloat(o.maxDrawdown).toFixed(4)]}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"SOL"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 mb-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-3",children:"Trading Volume"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"24 Hours"}),(0,a.jsxs)("div",{className:"text-lg font-bold text-purple-400",children:[parseFloat(o.volume24h).toFixed(2)," SOL"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"7 Days"}),(0,a.jsxs)("div",{className:"text-lg font-bold text-blue-400",children:[parseFloat(o.volume7d).toFixed(2)," SOL"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"30 Days"}),(0,a.jsxs)("div",{className:"text-lg font-bold text-cyan-400",children:[parseFloat(o.volume30d).toFixed(2)," SOL"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"All Time"}),(0,a.jsxs)("div",{className:"text-lg font-bold text-green-400",children:[parseFloat(o.volumeAllTime).toFixed(2)," SOL"]})]})]})]}),h.length>0&&(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-3",children:"7-Day Performance History"}),(0,a.jsx)("div",{className:"flex items-end justify-between h-32 gap-1",children:h.map((e,t)=>{let s=Math.max(...h.map(e=>Math.abs(e.roi))),r=s>0?Math.abs(e.roi)/s*100:0;return(0,a.jsx)("div",{className:"flex-1 flex flex-col items-center",children:(0,a.jsx)("div",{className:"w-full ".concat(e.roi>=0?"bg-green-500":"bg-red-500"," rounded-t"),style:{height:"".concat(r,"%")},title:"".concat(e.roi.toFixed(2),"% ROI")})},t)})}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-2 text-center",children:"Daily ROI performance"})]}),(0,a.jsx)("div",{className:"mt-6 bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:[(0,a.jsx)("strong",{className:"text-white",children:"Note:"})," Performance metrics are calculated based on trade history and updated every 5 minutes. Rankings are based on ROI compared to all agents on the platform."]})})]})]}):(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6 text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCA"}),(0,a.jsx)("p",{className:"text-gray-400",children:"No performance data available yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Agent needs to make some trades first"})]})}var O=s(82957).Buffer;let M="https://degenagent-backend.onrender.com/api";function W(){let e=(0,l.useParams)().pubkey,{publicKey:t,sendTransaction:s}=(0,n.O)(),{connection:x}=(0,i.R)(),[m,u]=(0,r.useState)(null),[h,g]=(0,r.useState)(!0),[b,p]=(0,r.useState)(""),[v,y]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[S,C]=(0,r.useState)(0),[D,T]=(0,r.useState)("overview");(0,r.useEffect)(()=>{F();let e=setInterval(F,1e4);return()=>clearInterval(e)},[e]);let F=async()=>{try{let t=await c.Z.get("".concat(M,"/agent/").concat(e));u(t.data),g(!1)}catch(e){console.error("Error fetching agent:",e),g(!1)}},P=async()=>{if(t&&b){y(!0);try{let a=parseFloat(b),r=await c.Z.post("".concat(M,"/agent/").concat(e,"/deposit"),{amount:a,userWallet:t.toString()}),l=O.from(r.data.transaction,"base64"),n=o.YW.from(l),i=await s(n,x);await x.confirmTransaction(i,"confirmed"),p(""),F(),alert("Deposit successful!")}catch(e){var a,r;console.error("Error depositing:",e),alert((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.error)||"Failed to deposit")}finally{y(!1)}}},A=async()=>{if(t){N(!0);try{let a=await c.Z.post("".concat(M,"/agent/").concat(e,"/claim"),{userWallet:t.toString()}),r=O.from(a.data.transaction,"base64"),l=o.YW.from(r),n=await s(l,x);await x.confirmTransaction(n,"confirmed"),F(),alert("Revenue claimed successfully!")}catch(e){var a,r;console.error("Error claiming:",e),alert((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.error)||"Failed to claim revenue")}finally{N(!1)}}};return h?(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-3 sm:px-6 lg:px-8 py-12 sm:py-20 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-solana-purple"}),(0,a.jsx)("div",{className:"text-lg sm:text-xl",children:"Loading agent..."})]})}):m?(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-3 sm:px-6 lg:px-8 py-6 sm:py-12",children:[(0,a.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(k.Z,{name:m.name,size:"xl"}),(0,a.jsx)("h1",{className:"text-2xl sm:text-4xl font-bold",children:m.name})]}),(0,a.jsx)("span",{className:"px-4 py-2 rounded-full text-sm font-semibold w-fit ".concat("Active"===m.status?"bg-green-500/20 text-green-500 shadow-lg shadow-green-500/20":"bg-gray-500/20 text-gray-500"),children:m.status})]}),(0,a.jsx)("p",{className:"text-gray-400 text-sm sm:text-lg mb-4",children:m.purpose}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-900/50 to-pink-900/50 border border-purple-500/50 rounded-xl p-4 mb-4",children:(0,a.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"Token Contract Address (CA)"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("code",{className:"text-white font-mono text-sm bg-black/30 px-3 py-2 rounded flex-1 break-all",children:m.tokenMint}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(m.tokenMint),alert("Token CA copied to clipboard!")},className:"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg font-semibold text-sm whitespace-nowrap transition",children:"\uD83D\uDCCB Copy CA"})]})]})})}),(0,a.jsx)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 text-xs sm:text-sm",children:(0,a.jsxs)("div",{className:"text-gray-500 break-all",children:["Agent: ",(0,a.jsx)("span",{className:"text-gray-400 font-mono",children:_(m.agentWallet)})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-6 sm:mb-8",children:[(0,a.jsx)(I,{label:"Vault Balance",value:"".concat(m.vaultBalance.toFixed(4)," SOL"),highlight:!0}),(0,a.jsx)(I,{label:"Total Trades",value:m.totalTrades}),(0,a.jsx)(I,{label:"Total Volume",value:"$".concat(m.totalVolume)}),(0,a.jsx)(I,{label:"Win Rate",value:"N/A"})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex gap-2 border-b border-gray-700",children:[(0,a.jsx)("button",{onClick:()=>T("overview"),className:"px-6 py-3 font-semibold transition ".concat("overview"===D?"text-purple-400 border-b-2 border-purple-400":"text-gray-400 hover:text-gray-300"),children:"\uD83D\uDCCA Overview"}),(0,a.jsx)("button",{onClick:()=>T("trade"),className:"px-6 py-3 font-semibold transition ".concat("trade"===D?"text-green-400 border-b-2 border-green-400":"text-gray-400 hover:text-gray-300"),children:"\uD83D\uDCB0 Trade"}),(0,a.jsx)("button",{onClick:()=>T("indicators"),className:"px-6 py-3 font-semibold transition ".concat("indicators"===D?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"),children:"\uD83D\uDCC8 Indicators"}),(0,a.jsx)("button",{onClick:()=>T("performance"),className:"px-6 py-3 font-semibold transition ".concat("performance"===D?"text-yellow-400 border-b-2 border-yellow-400":"text-gray-400 hover:text-gray-300"),children:"\uD83C\uDFC6 Performance"}),(0,a.jsx)("button",{onClick:()=>T("code"),className:"px-6 py-3 font-semibold transition ".concat("code"===D?"text-pink-400 border-b-2 border-pink-400":"text-gray-400 hover:text-gray-300"),children:"⚡ Custom Code"})]})}),"overview"===D&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"mb-6 sm:mb-8",children:(0,a.jsx)(w,{agentId:e})})}),"trade"===D&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"mb-6 sm:mb-8",children:(0,a.jsx)(f,{agentId:e})})}),"indicators"===D&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"mb-6 sm:mb-8",children:(0,a.jsx)(R,{agentId:e})})}),"performance"===D&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"mb-6 sm:mb-8",children:(0,a.jsx)(B,{agentId:e})})}),"code"===D&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"mb-6 sm:mb-8",children:(0,a.jsx)(E,{agentId:e})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl p-5 sm:p-6 border border-gray-800",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-bold mb-3 sm:mb-4",children:"Fund Agent"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-400 mb-4",children:"Deposit SOL to enable autonomous trading"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[(0,a.jsx)("input",{type:"number",step:"0.1",min:"0",placeholder:"Amount in SOL",className:"flex-1 px-4 py-3 sm:py-4 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-solana-purple focus:ring-2 focus:ring-solana-purple/20 transition-all text-base touch-manipulation",value:b,onChange:e=>p(e.target.value)}),t?(0,a.jsx)("button",{onClick:P,disabled:v||!b,className:"bg-solana-purple hover:bg-purple-700 active:scale-95 disabled:bg-gray-700 disabled:cursor-not-allowed disabled:transform-none text-white font-bold py-3 sm:py-4 px-6 sm:px-8 rounded-xl transition-all shadow-lg hover:shadow-xl touch-manipulation min-h-[48px] whitespace-nowrap",children:v?"Depositing...":"Deposit"}):(0,a.jsx)("div",{className:"[&>button]:w-full sm:[&>button]:w-auto [&>button]:min-h-[48px] [&>button]:rounded-xl",children:(0,a.jsx)(d.a,{})})]})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl p-5 sm:p-6 border border-gray-800",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-bold mb-3 sm:mb-4",children:"Claim Revenue"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-400 mb-4",children:"Token holders earn share of profits"}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Your Tokens: ",(0,a.jsx)("span",{className:"text-solana-green font-bold",children:S.toLocaleString()})]}),t?(0,a.jsx)("button",{onClick:A,disabled:j||0===S,className:"w-full bg-solana-green hover:bg-green-600 active:scale-95 disabled:bg-gray-700 disabled:cursor-not-allowed disabled:transform-none text-white font-bold py-3 sm:py-4 px-6 rounded-xl transition-all shadow-lg hover:shadow-xl touch-manipulation min-h-[48px]",children:j?"Claiming...":"Claim Revenue"}):(0,a.jsx)("div",{className:"[&>button]:w-full [&>button]:min-h-[48px] [&>button]:rounded-xl",children:(0,a.jsx)(d.a,{})})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl p-5 sm:p-6 border border-gray-800 mb-6 sm:mb-8",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-bold mb-4",children:"Performance Overview"}),(0,a.jsx)("div",{className:"h-48 sm:h-64 flex items-end justify-around gap-2 sm:gap-4 pb-4",children:[65,78,82,71,88,92,85].map((e,t)=>(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"w-full bg-solana-purple/20 rounded-t-lg relative overflow-hidden",style:{height:"".concat(e,"%")},children:(0,a.jsx)("div",{className:"absolute bottom-0 w-full bg-solana-purple rounded-t-lg transition-all duration-500",style:{height:"100%"}})}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["D",t+1]})]},t))})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl p-5 sm:p-6 border border-gray-800",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-bold",children:"Recent Trades"}),(0,a.jsxs)("span",{className:"text-xs sm:text-sm text-gray-500",children:[m.recentTrades.length," trades"]})]}),0===m.recentTrades.length?(0,a.jsxs)("div",{className:"text-center py-8 sm:py-12",children:[(0,a.jsx)("div",{className:"text-4xl sm:text-6xl mb-4 opacity-50",children:"\uD83D\uDCCA"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"No trades yet. Fund your agent to start trading!"})]}):(0,a.jsx)("div",{className:"space-y-2 sm:space-y-3",children:m.recentTrades.map((e,t)=>(0,a.jsx)(H,{trade:e},t))})]})]}):(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-3 sm:px-6 lg:px-8 py-12 sm:py-20 text-center",children:(0,a.jsx)("div",{className:"text-lg sm:text-xl text-red-500",children:"Agent not found"})})}function I(e){let{label:t,value:s,highlight:r}=e;return(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl p-4 sm:p-6 border transition-all ".concat(r?"border-solana-purple shadow-lg shadow-solana-purple/20":"border-gray-800"),children:[(0,a.jsx)("div",{className:"text-gray-500 text-xs sm:text-sm mb-1",children:t}),(0,a.jsx)("div",{className:"text-lg sm:text-2xl font-bold ".concat(r?"text-solana-purple":"text-solana-green"),children:s})]})}function H(e){let{trade:t}=e;return(0,a.jsxs)("div",{className:"bg-gray-800/50 rounded-xl p-4 sm:p-5 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 hover:bg-gray-800/70 transition-all",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-mono text-xs sm:text-sm text-gray-400 mb-1",children:_(t.signature)}),(0,a.jsx)("div",{className:"text-xs sm:text-sm text-gray-500",children:t.timestamp?new Date(1e3*t.timestamp).toLocaleString():"N/A"})]}),(0,a.jsx)("a",{href:"https://explorer.solana.com/tx/".concat(t.signature,"?cluster=devnet"),target:"_blank",rel:"noopener noreferrer",className:"text-solana-purple hover:text-purple-400 font-medium text-sm sm:text-base whitespace-nowrap touch-manipulation active:scale-95 transition-all",children:"View Explorer →"})]})}function _(e){return"".concat(e.slice(0,4),"...").concat(e.slice(-4))}},70522:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(57437);function r(e){let{name:t,size:s="md",className:r=""}=e,l=(e=>{let t=0;for(let s=0;s<e.length;s++)t=e.charCodeAt(s)+((t<<5)-t);let s=["from-purple-500 to-pink-500","from-blue-500 to-cyan-500","from-green-500 to-emerald-500","from-orange-500 to-red-500","from-indigo-500 to-purple-500","from-pink-500 to-rose-500","from-teal-500 to-green-500","from-yellow-500 to-orange-500"];return s[Math.abs(t)%s.length]})(t),n=(e=>{let t=e.trim().split(" ");return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():e.slice(0,2).toUpperCase()})(t);return(0,a.jsx)("div",{className:"\n        ".concat({sm:"w-8 h-8 text-xs",md:"w-12 h-12 text-sm",lg:"w-16 h-16 text-lg",xl:"w-24 h-24 text-2xl"}[s],"\n        rounded-full\n        bg-gradient-to-br ").concat(l,"\n        flex items-center justify-center\n        font-bold text-white\n        shadow-lg\n        ").concat(r,"\n      "),children:n})}}},function(e){e.O(0,[814,957,464,295,763,478,117,744],function(){return e(e.s=22879)}),_N_E=e.O()}]);
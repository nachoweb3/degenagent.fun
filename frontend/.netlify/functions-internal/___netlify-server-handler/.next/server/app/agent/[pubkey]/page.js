(()=>{var e={};e.id=971,e.ids=[971],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},41041:e=>{"use strict";e.exports=require("node:url")},15757:(e,r,l)=>{"use strict";l.r(r),l.d(r,{GlobalError:()=>c.a,__next_app__:()=>p,originalPathname:()=>g,pages:()=>m,routeModule:()=>x,tree:()=>f}),l(85544),l(21384),l(35866);var a=l(23191),h=l(88716),o=l(37922),c=l.n(o),u=l(95231),d={};for(let e in u)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>u[e]);l.d(r,d);let f=["",{children:["agent",{children:["[pubkey]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(l.bind(l,85544)),"C:\\Users\\Usuario\\Desktop\\Agent.fun\\frontend\\app\\agent\\[pubkey]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(l.bind(l,21384)),"C:\\Users\\Usuario\\Desktop\\Agent.fun\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(l.t.bind(l,35866,23)),"next/dist/client/components/not-found-error"]}],m=["C:\\Users\\Usuario\\Desktop\\Agent.fun\\frontend\\app\\agent\\[pubkey]\\page.tsx"],g="/agent/[pubkey]/page",p={require:l,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:h.x.APP_PAGE,page:"/agent/[pubkey]/page",pathname:"/agent/[pubkey]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:f}})},98463:(e,r,l)=>{Promise.resolve().then(l.bind(l,29552))},29552:(e,r,l)=>{"use strict";l.r(r),l.d(r,{default:()=>nl});var a,h,o,c,u,d,f,m,g,p,x,v,b=l(10326),y=l(17577),w=l.n(y),N=l(35047),j=l(4185),S=l(43228),_=l(48688),M=l(68109),E=l(94464);function k({currentPrice:e,tokensSold:r,totalSupply:l,marketCap:a,progress:h}){let o=(0,y.useRef)(null),[c,u]=(0,y.useState)(null);return(0,b.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[b.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"\uD83D\uDCC8 Bonding Curve"}),b.jsx("p",{className:"text-sm text-gray-400",children:"Exponential price discovery curve - price increases as more tokens are sold"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[b.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Current Price"}),(0,b.jsxs)("div",{className:"text-xl font-bold text-cyan-400",children:[e.toFixed(6)," SOL"]})]}),(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[b.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Market Cap"}),(0,b.jsxs)("div",{className:"text-xl font-bold text-purple-400",children:[a.toFixed(2)," SOL"]})]}),(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[b.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Tokens Sold"}),(0,b.jsxs)("div",{className:"text-xl font-bold text-green-400",children:[(r/1e6).toFixed(2),"M"]})]}),(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[b.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Progress"}),(0,b.jsxs)("div",{className:"text-xl font-bold text-yellow-400",children:[h.toFixed(1),"%"]})]})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[b.jsx("span",{className:"text-gray-400",children:"Progress to Graduation"}),(0,b.jsxs)("span",{className:"text-white font-semibold",children:[h.toFixed(2),"% / 100%"]})]}),b.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 overflow-hidden",children:b.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 via-pink-500 to-cyan-500 rounded-full transition-all duration-500 relative",style:{width:`${Math.min(h,100)}%`},children:b.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})}),h>=99&&b.jsx("div",{className:"mt-2 text-center text-yellow-400 font-semibold animate-pulse",children:"\uD83C\uDF93 Ready for Raydium Graduation!"})]}),b.jsx("div",{className:"relative",children:b.jsx("canvas",{ref:o,className:"w-full rounded-lg bg-gray-950",style:{height:"300px"}})}),(0,b.jsxs)("div",{className:"flex justify-center gap-6 mt-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[b.jsx("div",{className:"w-4 h-0.5 bg-purple-500"}),b.jsx("span",{className:"text-gray-400",children:"Bonding Curve"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[b.jsx("div",{className:"w-4 h-0.5 bg-cyan-400"}),b.jsx("span",{className:"text-gray-400",children:"Current Position"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[b.jsx("div",{className:"w-4 h-4 bg-purple-500/20 rounded"}),b.jsx("span",{className:"text-gray-400",children:"Filled Area"})]})]}),b.jsx("div",{className:"mt-6 bg-blue-900/20 border border-blue-700/30 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[b.jsx("span",{className:"text-2xl",children:"\uD83D\uDCA1"}),(0,b.jsxs)("div",{className:"flex-1",children:[b.jsx("h4",{className:"text-sm font-semibold text-blue-300 mb-1",children:"How it works"}),b.jsx("p",{className:"text-xs text-gray-400",children:"The bonding curve uses an exponential formula where price increases as more tokens are sold. When 100% of tokens are sold, the agent graduates to Raydium with automatic liquidity provision. Early buyers get lower prices, later buyers pay more - incentivizing early discovery!"})]})]})})]})}class C{constructor(e){this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.messageHandlers=new Map,this.connectionHandlers=new Set,this.disconnectionHandlers=new Set,this.subscribedChannels=new Set,this.isConnecting=!1,this.reconnectTimeout=null,this.heartbeatInterval=null,this.url=e}connect(){return new Promise((e,r)=>{if(this.ws?.readyState===WebSocket.OPEN||this.isConnecting){e();return}this.isConnecting=!0;try{this.ws=new WebSocket(this.url),this.ws.onopen=()=>{console.log("[WebSocket] Connected"),this.isConnecting=!1,this.reconnectAttempts=0,this.subscribedChannels.forEach(e=>{this.subscribe(e)}),this.startHeartbeat(),this.connectionHandlers.forEach(e=>e()),e()},this.ws.onmessage=e=>{try{let r=JSON.parse(e.data);this.handleMessage(r)}catch(e){console.error("[WebSocket] Failed to parse message:",e)}},this.ws.onerror=e=>{console.error("[WebSocket] Error:",e),this.isConnecting=!1,r(e)},this.ws.onclose=()=>{console.log("[WebSocket] Disconnected"),this.isConnecting=!1,this.stopHeartbeat(),this.disconnectionHandlers.forEach(e=>e()),this.attemptReconnect()}}catch(e){this.isConnecting=!1,r(e)}})}handleMessage(e){switch(e.type){case"connected":console.log("[WebSocket] Server acknowledged connection");break;case"pong":break;case"subscribed":console.log("[WebSocket] Subscribed to channel:",e.channel);break;case"unsubscribed":console.log("[WebSocket] Unsubscribed from channel:",e.channel);break;case"error":console.error("[WebSocket] Server error:",e.message);break;default:e.channel&&this.notifyHandlers(e.channel,e),this.notifyHandlers(e.type,e)}}notifyHandlers(e,r){let l=this.messageHandlers.get(e);l&&l.forEach(e=>{try{e(r)}catch(e){console.error("[WebSocket] Handler error:",e)}})}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("[WebSocket] Max reconnection attempts reached");return}let e=this.reconnectDelay*Math.pow(2,this.reconnectAttempts);this.reconnectAttempts++,console.log(`[WebSocket] Reconnecting in ${e}ms (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})`),this.reconnectTimeout=setTimeout(()=>{this.connect().catch(e=>{console.error("[WebSocket] Reconnection failed:",e)})},e)}startHeartbeat(){this.heartbeatInterval=setInterval(()=>{this.ws?.readyState===WebSocket.OPEN&&this.send({type:"ping"})},3e4)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}send(e){this.ws?.readyState===WebSocket.OPEN?this.ws.send(JSON.stringify(e)):console.warn("[WebSocket] Cannot send message, not connected")}subscribe(e,r){this.subscribedChannels.add(e),r&&this.on(e,r),this.ws?.readyState===WebSocket.OPEN&&this.send({type:"subscribe",channel:e})}unsubscribe(e,r){this.subscribedChannels.delete(e),r&&this.off(e,r),this.ws?.readyState===WebSocket.OPEN&&this.send({type:"unsubscribe",channel:e})}authenticate(e,r){this.send({type:"auth",walletAddress:e,signature:r})}on(e,r){this.messageHandlers.has(e)||this.messageHandlers.set(e,new Set),this.messageHandlers.get(e).add(r)}off(e,r){let l=this.messageHandlers.get(e);l&&(l.delete(r),0===l.size&&this.messageHandlers.delete(e))}onConnect(e){this.connectionHandlers.add(e)}onDisconnect(e){this.disconnectionHandlers.add(e)}disconnect(){this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.stopHeartbeat(),this.ws&&(this.ws.close(),this.ws=null),this.subscribedChannels.clear(),this.messageHandlers.clear(),this.connectionHandlers.clear(),this.disconnectionHandlers.clear()}isConnected(){return this.ws?.readyState===WebSocket.OPEN}}let L=null;function z(e={}){let{channels:r=[],autoConnect:l=!0,onConnect:a,onDisconnect:h}=e,[o,c]=(0,y.useState)(!1),u=(0,y.useRef)((L||(L=new C(process.env.NEXT_PUBLIC_WS_URL||"ws://localhost:3001/ws")),L)),d=(0,y.useRef)(new Map),f=(0,y.useCallback)((e,r)=>{u.current.subscribe(e,r),d.current.has(e)||d.current.set(e,new Set),d.current.get(e).add(r)},[]);return{isConnected:o,subscribe:f,unsubscribe:(0,y.useCallback)((e,r)=>{u.current.unsubscribe(e,r);let l=d.current.get(e);l&&(l.delete(r),0===l.size&&d.current.delete(e))},[]),on:(0,y.useCallback)((e,r)=>{u.current.on(e,r),d.current.has(e)||d.current.set(e,new Set),d.current.get(e).add(r)},[]),off:(0,y.useCallback)((e,r)=>{u.current.off(e,r);let l=d.current.get(e);l&&(l.delete(r),0===l.size&&d.current.delete(e))},[])}}function R(e){let[r,l]=(0,y.useState)(null),[a,h]=(0,y.useState)([]),[o,c]=(0,y.useState)(null),{isConnected:u,subscribe:d,unsubscribe:f}=z({channels:[`agent:${e}`]});return{isConnected:u,priceData:r,trades:a,graduation:o}}function P({className:e="",showText:r=!0,size:l="md"}){let{isConnected:a}=z({autoConnect:!0}),h={sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4"};return(0,b.jsxs)("div",{className:`flex items-center gap-2 ${e}`,children:[b.jsx("div",{className:"relative",children:a?(0,b.jsxs)(b.Fragment,{children:[b.jsx("div",{className:`${h[l]} rounded-full bg-green-500 animate-pulse`}),b.jsx("div",{className:`absolute inset-0 ${h[l]} rounded-full bg-green-400 animate-ping`})]}):b.jsx("div",{className:`${h[l]} rounded-full bg-gray-500`})}),r&&b.jsx("span",{className:`font-semibold ${{sm:"text-xs",md:"text-sm",lg:"text-base"}[l]} ${a?"text-green-400":"text-gray-500"}`,children:a?"LIVE":"Offline"})]})}let T="https://degenagent-backend.onrender.com/api";function O({agentId:e}){let{publicKey:r,sendTransaction:l}=(0,j.O)(),{connection:a}=(0,S.R)(),[h,o]=(0,y.useState)(null),[c,u]=(0,y.useState)([]),[d,f]=(0,y.useState)(!0),[m,g]=(0,y.useState)("buy"),[p,x]=(0,y.useState)(""),[v,w]=(0,y.useState)(null),[N,_]=(0,y.useState)(!1),[C,L]=(0,y.useState)(!1),{isConnected:z,trades:O,priceData:D,graduation:$}=R(e),A=async()=>{try{let r=await E.Z.get(`${T}/bonding-curve/${e}`);r.data.success&&(o(r.data.bondingCurve),u(r.data.recentTrades||[]))}catch(e){console.error("Error fetching bonding curve:",e)}finally{f(!1)}},I=async()=>{if(r&&p&&v)try{if(L(!0),"buy"===m){let h=await E.Z.post(`${T}/bonding-curve/buy`,{agentId:e,amount:parseFloat(p),buyerWallet:r.toString()}),o=Buffer.from(h.data.transaction,"base64"),c=M.YW.from(o),u=await l(c,a);console.log("Transaction sent:",u),await a.confirmTransaction(u,"confirmed");let d=await E.Z.post(`${T}/bonding-curve/confirm-buy`,{agentId:e,amount:parseFloat(p),signature:u,buyerWallet:r.toString()});d.data.graduation?.success?alert(`🎉 GRADUATION! This token has completed its bonding curve and graduated to Raydium DEX!

Pool Created: ${d.data.graduation.data.poolId}`):alert(`Successfully bought ${p} tokens!`)}else alert("Sell functionality coming soon!");x(""),w(null),await A()}catch(e){console.error("Error executing trade:",e),alert(e.response?.data?.error||e.message||"Trade failed")}finally{L(!1)}},W=e=>{let r="string"==typeof e?parseFloat(e):e;return 0===r?"0":r<.001?r.toExponential(4):r.toFixed(6)},B=e=>e>=1e6?`${(e/1e6).toFixed(2)}M`:e>=1e3?`${(e/1e3).toFixed(2)}K`:e.toFixed(0);if(d)return(0,b.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 text-center",children:[b.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full mx-auto mb-4"}),b.jsx("p",{className:"text-gray-400",children:"Loading bonding curve..."})]});if(!h)return b.jsx("div",{className:"bg-gray-800 rounded-xl p-8 text-center",children:b.jsx("p",{className:"text-gray-400",children:"Bonding curve not available"})});if(h.graduated)return(0,b.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 text-center border-2 border-green-500",children:[b.jsx("div",{className:"text-6xl mb-4",children:"\uD83C\uDF93"}),b.jsx("h3",{className:"text-2xl font-bold text-green-400 mb-2",children:"Graduated to Raydium!"}),b.jsx("p",{className:"text-gray-400 mb-4",children:"This token has completed its bonding curve and graduated to Raydium DEX"}),h&&b.jsx("a",{href:`https://raydium.io/swap/?inputCurrency=sol&outputCurrency=${h}`,target:"_blank",rel:"noopener noreferrer",className:"inline-block px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg font-bold hover:from-green-600 hover:to-emerald-700 transition",children:"Trade on Raydium →"})]});let V=h.stats;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[b.jsx("h3",{className:"text-xl font-bold text-white",children:"Bonding Curve"}),b.jsx(P,{size:"sm"})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm text-gray-400 mb-2",children:[b.jsx("span",{children:"Progress to Graduation"}),(0,b.jsxs)("span",{children:[V.progress.toFixed(2),"%"]})]}),b.jsx("div",{className:"bg-gray-700 rounded-full h-4",children:b.jsx("div",{className:"bg-gradient-to-r from-purple-500 via-pink-500 to-green-500 h-4 rounded-full transition-all duration-500",style:{width:`${Math.min(V.progress,100)}%`}})}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[B(V.tokensRemaining)," tokens remaining until Raydium"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[b.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Current Price"}),(0,b.jsxs)("div",{className:"text-lg font-bold text-green-400",children:[W(V.currentPrice)," SOL"]})]}),(0,b.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[b.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Total Sold"}),b.jsx("div",{className:"text-lg font-bold text-white",children:B(V.tokensSold)})]}),(0,b.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[b.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"TVL"}),(0,b.jsxs)("div",{className:"text-lg font-bold text-purple-400",children:[W(V.totalValueLocked)," SOL"]})]}),(0,b.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[b.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Available"}),b.jsx("div",{className:"text-lg font-bold text-white",children:B(V.tokensRemaining)})]})]})]}),b.jsx(k,{currentPrice:V.currentPrice,tokensSold:V.tokensSold,totalSupply:V.tokensSold+V.tokensRemaining,marketCap:V.currentPrice*(V.tokensSold+V.tokensRemaining),progress:V.progress}),(0,b.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,b.jsxs)("div",{className:"flex gap-2 mb-6",children:[b.jsx("button",{onClick:()=>g("buy"),className:`flex-1 py-3 rounded-lg font-semibold transition ${"buy"===m?"bg-gradient-to-r from-green-600 to-emerald-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:"Buy"}),b.jsx("button",{onClick:()=>g("sell"),className:`flex-1 py-3 rounded-lg font-semibold transition ${"sell"===m?"bg-gradient-to-r from-red-600 to-orange-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:"Sell"})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("label",{className:"block text-sm text-gray-400 mb-2",children:["Amount of tokens to ",m]}),b.jsx("input",{type:"number",value:p,onChange:e=>x(e.target.value),placeholder:"0",className:"w-full bg-gray-900 text-white text-2xl rounded-lg px-4 py-4 border border-gray-700 focus:border-purple-500 outline-none",disabled:!r}),b.jsx("div",{className:"flex gap-2 mt-2",children:[1e5,5e5,1e6,5e6].map(e=>b.jsx("button",{onClick:()=>x(e.toString()),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white text-xs py-2 rounded transition",disabled:!r,children:B(e)},e))})]}),N?b.jsx("div",{className:"bg-gray-900 rounded-lg p-4 mb-4",children:b.jsx("div",{className:"text-center text-gray-400",children:"Calculating quote..."})}):v?(0,b.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4 mb-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsxs)("span",{className:"text-gray-400",children:["You ","buy"===m?"pay":"receive",":"]}),(0,b.jsxs)("span",{className:"text-white font-semibold",children:[W("buy"===m?v.totalCostSOL:v.netProceedsSOL)," SOL"]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[b.jsx("span",{className:"text-gray-400",children:"Price per token:"}),(0,b.jsxs)("span",{className:"text-white font-semibold",children:[W(v.pricePerToken)," SOL"]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[b.jsx("span",{className:"text-gray-400",children:"Price impact:"}),(0,b.jsxs)("span",{className:`font-semibold ${v.priceImpact>5?"text-red-400":"text-green-400"}`,children:[v.priceImpact.toFixed(2),"%"]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[b.jsx("span",{className:"text-gray-400",children:"Platform fee (1%):"}),(0,b.jsxs)("span",{className:"text-gray-400",children:[W(v.platformFee)," SOL"]})]}),b.jsx("div",{className:"border-t border-gray-700 pt-2 mt-2",children:(0,b.jsxs)("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-gray-300 font-semibold",children:"New price:"}),(0,b.jsxs)("span",{className:"text-purple-400 font-semibold",children:[W(v.newPrice)," SOL"]})]})})]}):null,r?b.jsx("button",{onClick:I,disabled:!v||C||!p||0>=parseFloat(p),className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:from-gray-700 disabled:to-gray-700 disabled:cursor-not-allowed text-white py-4 rounded-lg font-bold transition-all transform hover:scale-105 active:scale-95",children:C?"Processing...":`${"buy"===m?"Buy":"Sell"} Tokens`}):b.jsx("button",{disabled:!0,className:"w-full bg-gray-700 text-gray-400 py-4 rounded-lg font-bold cursor-not-allowed",children:"Connect Wallet to Trade"})]}),c.length>0&&(0,b.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[b.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Recent Trades"}),b.jsx("div",{className:"space-y-2",children:c.slice(0,10).map(e=>(0,b.jsxs)("div",{className:"flex items-center justify-between bg-gray-900 rounded-lg p-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:`w-2 h-2 rounded-full ${"buy"===e.type?"bg-green-500":"bg-red-500"}`}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"text-sm font-semibold text-white",children:["buy"===e.type?"Buy":"Sell"," ",B(parseFloat(e.tokenAmount))," tokens"]}),b.jsx("div",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleString()})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"text-sm font-semibold text-white",children:[W(e.solAmount)," SOL"]}),(0,b.jsxs)("div",{className:"text-xs text-gray-400",children:[W(e.pricePerToken)," per token"]})]})]},e.id))})]})]})}function D(e){var r=e.width,l=e.height;if(r<0)throw Error("Negative width is not allowed for Size");if(l<0)throw Error("Negative height is not allowed for Size");return{width:r,height:l}}function $(e,r){return e.width===r.width&&e.height===r.height}var A=function(){function e(e){var r=this;this._resolutionListener=function(){return r._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return e.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(e.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),e.prototype.subscribe=function(e){var r=this,l={next:e};return this._observers.push(l),{unsubscribe:function(){r._observers=r._observers.filter(function(e){return e!==l})}}},e.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},e.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},e.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},e.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(r){return r.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},e}();function I(e){return e.ownerDocument.defaultView}(function(){function e(e,r,l){var a;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=D({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=null!=r?r:function(e){return e},this._allowResizeObserver=null===(a=null==l?void 0:l.allowResizeObserver)||void 0===a||a,this._chooseAndInitObserver()}e.prototype.dispose=function(){var e,r;if(null===this._canvasElement)throw Error("Object is disposed");null===(e=this._canvasElementResizeObserver)||void 0===e||e.disconnect(),this._canvasElementResizeObserver=null,null===(r=this._devicePixelRatioObservable)||void 0===r||r.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(e.prototype,"canvasElement",{get:function(){if(null===this._canvasElement)throw Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bitmapSize",{get:function(){return D({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),e.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=D(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},e.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},e.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(r){return r!==e})},Object.defineProperty(e.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),e.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},e.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(r){return r!==e})},e.prototype.applySuggestedBitmapSize=function(){if(null!==this._suggestedBitmapSize){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},e.prototype._resizeBitmap=function(e){var r=this.bitmapSize;$(r,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(r,e))},e.prototype._emitBitmapSizeChanged=function(e,r){var l=this;this._bitmapSizeChangedListeners.forEach(function(a){return a.call(l,e,r)})},e.prototype._suggestNewBitmapSize=function(e){var r=this._suggestedBitmapSize,l=D(this._transformBitmapSize(e,this._canvasElementClientSize)),a=$(this.bitmapSize,l)?null:l;null===r&&null===a||null!==r&&null!==a&&$(r,a)||(this._suggestedBitmapSize=a,this._emitSuggestedBitmapSizeChanged(r,a))},e.prototype._emitSuggestedBitmapSizeChanged=function(e,r){var l=this;this._suggestedBitmapSizeChangedListeners.forEach(function(a){return a.call(l,e,r)})},e.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}new Promise(function(e){var r=new ResizeObserver(function(l){e(l.every(function(e){return"devicePixelContentBoxSize"in e})),r.disconnect()});r.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1}).then(function(r){return r?e._initResizeObserver():e._initDevicePixelRatioObservable()})},e.prototype._initDevicePixelRatioObservable=function(){var e=this;if(null!==this._canvasElement){var r=I(this._canvasElement);if(null===r)throw Error("No window is associated with the canvas");this._devicePixelRatioObservable=new A(r),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},e.prototype._invalidateBitmapSize=function(){if(null!==this._canvasElement){var e,r,l=I(this._canvasElement);if(null!==l){var a,h=null!==(r=null===(e=this._devicePixelRatioObservable)||void 0===e?void 0:e.value)&&void 0!==r?r:l.devicePixelRatio,o=this._canvasElement.getClientRects(),c=void 0!==o[0]?D({width:Math.round((a=o[0]).left*h+a.width*h)-Math.round(a.left*h),height:Math.round(a.top*h+a.height*h)-Math.round(a.top*h)}):D({width:this._canvasElementClientSize.width*h,height:this._canvasElementClientSize.height*h});this._suggestNewBitmapSize(c)}}},e.prototype._initResizeObserver=function(){var e=this;null!==this._canvasElement&&(this._canvasElementResizeObserver=new ResizeObserver(function(r){var l=r.find(function(r){return r.target===e._canvasElement});if(l&&l.devicePixelContentBoxSize&&l.devicePixelContentBoxSize[0]){var a=l.devicePixelContentBoxSize[0],h=D({width:a.inlineSize,height:a.blockSize});e._suggestNewBitmapSize(h)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))}})(),function(){function e(e,r,l){if(0===r.width||0===r.height)throw TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=r,0===l.width||0===l.height)throw TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=l,this._context=e}e.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},e.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(e.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0})}();function W(e,r){let l={0:[],1:[e.lineWidth,e.lineWidth],2:[2*e.lineWidth,2*e.lineWidth],3:[6*e.lineWidth,6*e.lineWidth],4:[e.lineWidth,4*e.lineWidth]}[r];e.setLineDash(l)}function B(e,r,l,a){e.beginPath();let h=e.lineWidth%2?.5:0;e.moveTo(l,r+h),e.lineTo(a,r+h),e.stroke()}function V(e,r){if(!e)throw Error("Assertion failed"+(r?": "+r:""))}function F(e){if(void 0===e)throw Error("Value is undefined");return e}function K(e){if(null===e)throw Error("Value is null");return e}function H(e){return K(F(e))}(function(e){e[e.Simple=0]="Simple",e[e.WithSteps=1]="WithSteps",e[e.Curved=2]="Curved"})(h||(h={})),function(e){e[e.Solid=0]="Solid",e[e.Dotted=1]="Dotted",e[e.Dashed=2]="Dashed",e[e.LargeDashed=3]="LargeDashed",e[e.SparseDotted=4]="SparseDotted"}(o||(o={}));let X={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function U(e){return e<0?0:e>255?255:Math.round(e)||0}function G(e){return e<=0||e>1?Math.min(Math.max(e,0),1):Math.round(1e4*e)/1e4}let J=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Y=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,q=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,Z=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function Q(e){(e=e.toLowerCase())in X&&(e=X[e]);{let r=Z.exec(e)||q.exec(e);if(r)return[U(parseInt(r[1],10)),U(parseInt(r[2],10)),U(parseInt(r[3],10)),G(r.length<5?1:parseFloat(r[4]))]}{let r=Y.exec(e);if(r)return[U(parseInt(r[1],16)),U(parseInt(r[2],16)),U(parseInt(r[3],16)),1]}{let r=J.exec(e);if(r)return[U(17*parseInt(r[1],16)),U(17*parseInt(r[2],16)),U(17*parseInt(r[3],16)),1]}throw Error(`Cannot parse color: ${e}`)}function tt(e){return .199*e[0]+.687*e[1]+.114*e[2]}function te(e){let r=Q(e);return{t:`rgb(${r[0]}, ${r[1]}, ${r[2]})`,i:tt(r)>160?"black":"white"}}class ti{constructor(){this.h=[]}l(e,r,l){this.h.push({o:e,_:r,u:!0===l})}v(e){let r=this.h.findIndex(r=>e===r.o);r>-1&&this.h.splice(r,1)}p(e){this.h=this.h.filter(r=>r._!==e)}m(e,r,l){let a=[...this.h];this.h=this.h.filter(e=>!e.u),a.forEach(a=>a.o(e,r,l))}M(){return this.h.length>0}S(){this.h=[]}}function ts(e,...r){for(let l of r)for(let r in l)void 0!==l[r]&&("object"!=typeof l[r]||void 0===e[r]||Array.isArray(l[r])?e[r]=l[r]:ts(e[r],l[r]));return e}function tn(e){return"number"==typeof e&&isFinite(e)}function tr(e){return"number"==typeof e&&e%1==0}function tl(e){return"string"==typeof e}function ta(e){return"boolean"==typeof e}function th(e){let r,l,a;if(!e||"object"!=typeof e)return e;for(l in r=Array.isArray(e)?[]:{},e)e.hasOwnProperty(l)&&(a=e[l],r[l]=a&&"object"==typeof a?th(a):a);return r}function to(e){return null!==e}function tc(e){return null===e?void 0:e}let tu="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function td(e,r,l){return void 0===r&&(r=tu),`${l=void 0!==l?`${l} `:""}${e}px ${r}`}class tf{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){let e=this.k,r=this.j(),l=this.H();return e.P===r&&e.D===l||(e.P=r,e.D=l,e.R=td(r,l),e.L=2.5/12*r,e.B=e.L,e.A=r/12*e.T,e.I=r/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class tm{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,r,l){this.Y.forEach(a=>{a.X(e,r,l)})}}class tg{X(e,r,l){e.useBitmapCoordinateSpace(e=>this.K(e,r,l))}}class tp extends tg{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:r,verticalPixelRatio:l}){if(null===this.G||null===this.G.tt)return;let a=this.G.tt,h=this.G,o=Math.max(1,Math.floor(r))%2/2,c=c=>{e.beginPath();for(let u=a.to-1;u>=a.from;--u){let a=h.it[u],d=Math.round(a.nt*r)+o,f=a.st*l,m=c*l+o;e.moveTo(d,f),e.arc(d,f,m,0,2*Math.PI)}e.fill()};h.et>0&&(e.fillStyle=h.rt,c(h.ht+h.et)),e.fillStyle=h.lt,c(h.ht)}}function tx(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}let tv={from:0,to:1};class tb{constructor(e,r){this.ut=new tm,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=r,this.ut.Z(this.ct)}bt(e){let r=this.F.wt();r.length!==this.ct.length&&(this.dt=r.map(tx),this.ct=this.dt.map(e=>{let r=new tp;return r.J(e),r}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){let e=2===this.vt.W().mode,r=this.F.wt(),l=this.vt.xt(),a=this.F.St();r.forEach((r,h)=>{var o;let c=this.dt[h],u=r.kt(l);if(e||null===u||!r.yt())return void(c.tt=null);let d=K(r.Ct());c.lt=u.Tt,c.ht=u.ht,c.et=u.Pt,c.it[0]._t=u._t,c.it[0].st=r.Dt().Rt(u._t,d.Vt),c.rt=null!==(o=u.Ot)&&void 0!==o?o:this.F.Bt(c.it[0].st/r.Dt().At()),c.it[0].ot=l,c.it[0].nt=a.It(l),c.tt=tv})}}class ty extends tg{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:r,horizontalPixelRatio:l,verticalPixelRatio:a}){if(null===this.zt)return;let h=this.zt.Lt.yt,o=this.zt.Et.yt;if(!h&&!o)return;let c=Math.round(this.zt.nt*l),u=Math.round(this.zt.st*a);e.lineCap="butt",h&&c>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*l),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,W(e,this.zt.Lt.Nt),function(e,r,l,a){e.beginPath();let h=e.lineWidth%2?.5:0;e.moveTo(r+h,0),e.lineTo(r+h,a),e.stroke()}(e,c,0,r.height)),o&&u>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*a),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,W(e,this.zt.Et.Nt),B(e,u,0,r.width))}}class tw{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new ty(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){let e=this.jt.yt(),r=K(this.jt.Ht()),l=r.$t().W().crosshair,a=this.Ft;if(2===l.mode)return a.Et.yt=!1,void(a.Lt.yt=!1);a.Et.yt=e&&this.jt.Ut(r),a.Lt.yt=e&&this.jt.qt(),a.Et.et=l.horzLine.width,a.Et.Nt=l.horzLine.style,a.Et.V=l.horzLine.color,a.Lt.et=l.vertLine.width,a.Lt.Nt=l.vertLine.style,a.Lt.V=l.vertLine.color,a.nt=this.jt.Yt(),a.st=this.jt.Zt()}}function tN(e,r,l,a,h,o){e.save(),e.globalCompositeOperation="copy",e.fillStyle=o,e.fillRect(r,l,a,h),e.restore()}function tj(e,r,l,a,h,o){e.beginPath(),e.roundRect?e.roundRect(r,l,a,h,o):(e.lineTo(r+a-o[1],l),0!==o[1]&&e.arcTo(r+a,l,r+a,l+o[1],o[1]),e.lineTo(r+a,l+h-o[2]),0!==o[2]&&e.arcTo(r+a,l+h,r+a-o[2],l+h,o[2]),e.lineTo(r+o[3],l+h),0!==o[3]&&e.arcTo(r,l+h,r,l+h-o[3],o[3]),e.lineTo(r,l+o[0]),0!==o[0]&&e.arcTo(r,l,r+o[0],l,o[0]))}function tS(e,r,l,a,h,o,c=0,u=[0,0,0,0],d=""){var f;if(e.save(),!c||!d||d===o)return tj(e,r,l,a,h,u),e.fillStyle=o,e.fill(),void e.restore();let m=c/2;tj(e,r+m,l+m,a-c,h-c,(f=-m,u.map(e=>0===e?e:e+f))),"transparent"!==o&&(e.fillStyle=o,e.fill()),"transparent"!==d&&(e.lineWidth=c,e.strokeStyle=d,e.closePath(),e.stroke()),e.restore()}function t_(e,r,l,a,h,o,c){e.save(),e.globalCompositeOperation="copy";let u=e.createLinearGradient(0,0,0,h);u.addColorStop(0,o),u.addColorStop(1,c),e.fillStyle=u,e.fillRect(r,l,a,h),e.restore()}class tM{constructor(e,r){this.J(e,r)}J(e,r){this.zt=e,this.Xt=r}At(e,r){return this.zt.yt?e.P+e.L+e.B:0}X(e,r,l,a){if(!this.zt.yt||0===this.zt.Kt.length)return;let h=this.zt.V,o=this.Xt.t,c=e.useBitmapCoordinateSpace(e=>{let c=e.context;c.font=r.R;let u=this.Gt(e,r,l,a),d=u.Jt,f=(e,r)=>{u.Qt?tS(c,d.ti,d.ii,d.ni,d.si,e,d.ei,[d.ht,0,0,d.ht],r):tS(c,d.ri,d.ii,d.ni,d.si,e,d.ei,[0,d.ht,d.ht,0],r)};return f(o,"transparent"),this.zt.hi&&(c.fillStyle=h,c.fillRect(d.ri,d.li,d.ai-d.ri,d.oi)),f("transparent",o),this.zt._i&&(c.fillStyle=r.O,c.fillRect(u.Qt?d.ui-d.ei:0,d.ii,d.ei,d.ci-d.ii)),u});e.useMediaCoordinateSpace(({context:e})=>{let l=c.di;e.font=r.R,e.textAlign=c.Qt?"right":"left",e.textBaseline="middle",e.fillStyle=h,e.fillText(this.zt.Kt,l.fi,(l.ii+l.ci)/2+l.pi)})}Gt(e,r,l,a){var h;let o,c,u;let{context:d,bitmapSize:f,mediaSize:m,horizontalPixelRatio:g,verticalPixelRatio:p}=e,x=this.zt.hi||!this.zt.mi?r.T:0,v=this.zt.bi?r.C:0,b=r.L+this.Xt.wi,y=r.B+this.Xt.gi,w=r.A,N=r.I,j=this.zt.Kt,S=r.P,_=l.Mi(d,j),M=Math.ceil(l.xi(d,j)),E=r.C+w+N+M+x,k=Math.max(1,Math.floor(p)),C=Math.round((S+b+y)*p);C%2!=k%2&&(C+=1);let L=v>0?Math.max(1,Math.floor(v*g)):0,z=Math.round(E*g),R=Math.round(x*g),P=Math.round((null!==(h=this.Xt.Si)&&void 0!==h?h:this.Xt.ki)*p)-Math.floor(.5*p),T=Math.floor(P+k/2-C/2),O=T+C,D="right"===a,$=D?m.width-v:v,A=D?f.width-L:L;return D?(o=A-z,c=A-R,u=$-x-w-v):(o=A+z,c=A+R,u=$+x+w),{Qt:D,Jt:{ii:T,li:P,ci:O,ni:z,si:C,ht:2*g,ei:L,ti:o,ri:A,ai:c,oi:k,ui:f.width},di:{ii:T/p,ci:O/p,fi:u,pi:_}}}}class tE{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||tM)(this.Ci,this.yi),this.Ri=new(e||tM)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,r=!1){return Math.max(this.Pi.At(e,r),this.Ri.At(e,r))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class tk extends tE{constructor(e,r,l){super(),this.jt=e,this.Li=r,this.Ei=l}zi(e,r,l){if(e.yt=!1,2===this.jt.W().mode)return;let a=this.jt.W().horzLine;if(!a.labelVisible)return;let h=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||null===h)return;let o=te(a.labelBackgroundColor);l.t=o.t,e.V=o.i;let c=2/12*this.Li.P();l.wi=c,l.gi=c;let u=this.Ei(this.Li);l.ki=u.ki,e.Kt=this.Li.Fi(u._t,h),e.yt=!0}}let tC=/[1-9]/g;class tL{constructor(){this.zt=null}J(e){this.zt=e}X(e,r){if(null===this.zt||!1===this.zt.yt||0===this.zt.Kt.length)return;let l=e.useMediaCoordinateSpace(({context:e})=>(e.font=r.R,Math.round(r.Wi.xi(e,K(this.zt).Kt,tC))));if(l<=0)return;let a=r.ji,h=l+2*a,o=h/2,c=this.zt.Hi,u=this.zt.ki,d=Math.floor(u-o)+.5;d<0?(u+=Math.abs(0-d),d=Math.floor(u-o)+.5):d+h>c&&(u-=Math.abs(c-(d+h)),d=Math.floor(u-o)+.5);let f=d+h,m=Math.ceil(0+r.C+r.T+r.L+r.P+r.B);e.useBitmapCoordinateSpace(({context:e,horizontalPixelRatio:l,verticalPixelRatio:a})=>{let h=K(this.zt);e.fillStyle=h.t;let o=Math.round(d*l),c=Math.round(0*a),u=Math.round(f*l),g=Math.round(m*a),p=Math.round(2*l);if(e.beginPath(),e.moveTo(o,c),e.lineTo(o,g-p),e.arcTo(o,g,o+p,g,p),e.lineTo(u-p,g),e.arcTo(u,g,u,g-p,p),e.lineTo(u,c),e.fill(),h.hi){let o=Math.round(h.ki*l),u=Math.round((c+r.T)*a);e.fillStyle=h.V,e.fillRect(o-Math.floor(.5*l),c,Math.max(1,Math.floor(l)),u-c)}}),e.useMediaCoordinateSpace(({context:e})=>{let l=K(this.zt),h=0+r.C+r.T+r.L+r.P/2;e.font=r.R,e.textAlign="left",e.textBaseline="middle",e.fillStyle=l.V;let o=r.Wi.Mi(e,"Apr0");e.translate(d+a,h+o),e.fillText(l.Kt,0,0)})}}class tz{constructor(e,r,l){this.ft=!0,this.Wt=new tL,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=r,this.Ei=l}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){let e=this.Ft;if(e.yt=!1,2===this.vt.W().mode)return;let r=this.vt.W().vertLine;if(!r.labelVisible)return;let l=this.$i.St();if(l.Ni())return;e.Hi=l.Hi();let a=this.Ei();if(null===a)return;e.ki=a.ki;let h=l.Ui(this.vt.xt());e.Kt=l.qi(K(h)),e.yt=!0;let o=te(r.labelBackgroundColor);e.t=o.t,e.V=o.i,e.hi=l.W().ticksVisible}}class tR{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}!function(e){e[e.Normal=0]="Normal",e[e.Magnet=1]="Magnet",e[e.Hidden=2]="Hidden"}(c||(c={}));class tP extends tR{constructor(e,r){let l,a,h,o;super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=r,this.dn=new tb(e,this),this.fn=(l=()=>this.nn,a=()=>this.an,e=>{let r=a(),h=l();if(e===K(this.tn).vn())return{_t:h,ki:r};{let l=K(e.Ct());return{_t:e.pn(r,l),ki:r}}});let c=(h=()=>this.sn,o=()=>this.Yt(),()=>{let e=this.$i.St().mn(h()),r=o();return e&&Number.isFinite(r)?{ot:e,ki:r}:null});this.bn=new tz(this,e,c),this.wn=new tw(this)}W(){return this.cn}gn(e,r){this._n=e,this.un=r}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,r,l){this.hn||(this.hn=!0),this.en=!0,this.yn(e,r,l)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return null!==this.tn?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,r){this.en&&this.tn===e||this.rn.clear();let l=[];return this.tn===e&&l.push(this.Dn(this.rn,r,this.fn)),l}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,r,l){this.Bn(e,r,l)&&this.Vn()}Bn(e,r,l){let a=this.ln,h=this.an,o=this.nn,c=this.sn,u=this.tn,d=this.On(l);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=l;let f=null!==d?d.Ct():null;return null!==d&&null!==f?(this.nn=r,this.an=d.Rt(r,f)):(this.nn=NaN,this.an=NaN),a!==this.ln||h!==this.an||c!==this.sn||o!==this.nn||u!==this.tn}Tn(){let e=this.$i.wt().map(e=>e.In().An()).filter(to),r=0===e.length?null:Math.max(...e);this.sn=null!==r?r:NaN}Dn(e,r,l){let a=e.get(r);return void 0===a&&(a=new tk(this,r,l),e.set(r,a)),a}}function tT(e){return"left"===e||"right"===e}class tO{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,r){var l;let a=void 0===(l=this.zn.get(e))?r:{Fn:Math.max(l.Fn,r.Fn),Wn:l.Wn||r.Wn};this.zn.set(e,a)}jn(){return this.En}Hn(e){let r=this.zn.get(e);return void 0===r?{Fn:this.En}:{Fn:Math.max(this.En,r.Fn),Wn:r.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(let r of e.Ln)this.ns(r);this.En=Math.max(this.En,e.En),e.zn.forEach((e,r)=>{this.Nn(r,e)})}static ss(){return new tO(2)}static es(){return new tO(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){let e=this.Ln.findIndex(e=>5===e.qn);-1!==e&&this.Ln.splice(e,1)}}function tD(e,r){if(!tn(e))return"n/a";if(!tr(r)||r<0||r>16)throw TypeError("invalid length");return 0===r?e.toString():("0000000000000000"+e.toString()).slice(-r)}class t${constructor(e,r){if(r||(r=1),tn(e)&&tr(e)||(e=100),e<0)throw TypeError("invalid base");this.Li=e,this.rs=r,this.hs()}format(e){let r=e<0?"−":"";return e=Math.abs(e),r+this.ls(e)}hs(){if(this.os=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this.os++}}ls(e){let r=this.Li/this.rs,l=Math.floor(e),a="",h=void 0!==this.os?this.os:NaN;if(r>1){let o=+(Math.round(e*r)-l*r).toFixed(this.os);o>=r&&(o-=r,l+=1),a="."+tD(+o.toFixed(this.os)*this.rs,h)}else l=Math.round(l*r)/r,h>0&&(a="."+tD(0,h));return l.toFixed(0)+a}}class tA extends t${constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class tI{constructor(e){this._s=e}format(e){let r="";return e<0&&(r="-",e=-e),e<995?r+this.us(e):e<999995?r+this.us(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),r+this.us(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),r+this.us(e/1e9)+"B")}us(e){let r=Math.pow(10,this._s);return((e=Math.round(e*r)/r)>=1e-15&&e<1?e.toFixed(this._s).replace(/\.?0+$/,""):String(e)).replace(/(\.[1-9]*)0+$/,(e,r)=>r)}}function tW(e,r,l,a,h,o,c){if(0===r.length||a.from>=r.length||a.to<=0)return;let{context:u,horizontalPixelRatio:d,verticalPixelRatio:f}=e,m=r[a.from],g=o(e,m),p=m;if(a.to-a.from<2){let r=h/2;u.beginPath();let l={nt:m.nt-r,st:m.st},a={nt:m.nt+r,st:m.st};u.moveTo(l.nt*d,l.st*f),u.lineTo(a.nt*d,a.st*f),c(e,g,l,a)}else{let h=(r,l)=>{c(e,g,p,l),u.beginPath(),g=r,p=l},x=p;u.beginPath(),u.moveTo(m.nt*d,m.st*f);for(let c=a.from+1;c<a.to;++c){let a=o(e,x=r[c]);switch(l){case 0:u.lineTo(x.nt*d,x.st*f);break;case 1:u.lineTo(x.nt*d,r[c-1].st*f),a!==g&&(h(a,x),u.lineTo(x.nt*d,r[c-1].st*f)),u.lineTo(x.nt*d,x.st*f);break;case 2:{let[e,l]=function(e,r,l){var a,h;let o=Math.min(e.length-1,l+1);return[(a=e[r],h=tV(tB(e[l],e[Math.max(0,r-1)]),6),{nt:a.nt+h.nt,st:a.st+h.st}),tB(e[l],tV(tB(e[o],e[r]),6))]}(r,c-1,c);u.bezierCurveTo(e.nt*d,e.st*f,l.nt*d,l.st*f,x.nt*d,x.st*f)}}1!==l&&a!==g&&(h(a,x),u.moveTo(x.nt*d,x.st*f))}(p!==x||p===x&&1===l)&&c(e,g,p,x)}}function tB(e,r){return{nt:e.nt-r.nt,st:e.st-r.st}}function tV(e,r){return{nt:e.nt/r,st:e.st/r}}function tF(e,r,l,a,h){let{context:o,horizontalPixelRatio:c,verticalPixelRatio:u}=r;o.lineTo(h.nt*c,e*u),o.lineTo(a.nt*c,e*u),o.closePath(),o.fillStyle=l,o.fill()}class tK extends tg{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var r;if(null===this.G)return;let{it:l,tt:a,cs:h,et:o,Nt:c,ds:u}=this.G,d=null!==(r=this.G.fs)&&void 0!==r?r:this.G.vs?0:e.mediaSize.height;if(null===a)return;let f=e.context;f.lineCap="butt",f.lineJoin="round",f.lineWidth=o,W(f,c),f.lineWidth=1,tW(e,l,u,a,h,this.ps.bind(this),tF.bind(null,d))}}function tH(e,r,l){return Math.min(Math.max(e,r),l)}function tX(e){let r=Math.ceil(e);return r%2==0?r-1:r}class tU{bs(e,r){let l=this.ws,{gs:a,Ms:h,xs:o,Ss:c,ks:u,fs:d}=r;if(void 0===this.ys||void 0===l||l.gs!==a||l.Ms!==h||l.xs!==o||l.Ss!==c||l.fs!==d||l.ks!==u){let l=e.context.createLinearGradient(0,0,0,u);if(l.addColorStop(0,a),null!=d){let r=tH(d*e.verticalPixelRatio/u,0,1);l.addColorStop(r,h),l.addColorStop(r,o)}l.addColorStop(1,c),this.ys=l,this.ws=r}return this.ys}}class tG extends tK{constructor(){super(...arguments),this.Cs=new tU}ps(e,r){return this.Cs.bs(e,{gs:r.Ts,Ms:"",xs:"",Ss:r.Ps,ks:e.bitmapSize.height})}}function tJ(e,r){let l=e.context;l.strokeStyle=r,l.stroke()}class tY extends tg{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(null===this.G)return;let{it:r,tt:l,cs:a,ds:h,et:o,Nt:c,Rs:u}=this.G;if(null===l)return;let d=e.context;d.lineCap="butt",d.lineWidth=o*e.verticalPixelRatio,W(d,c),d.lineJoin="round";let f=this.Ds.bind(this);void 0!==h&&tW(e,r,h,l,a,f,tJ),u&&function(e,r,l,a,h){let{horizontalPixelRatio:o,verticalPixelRatio:c,context:u}=e,d=null,f=Math.max(1,Math.floor(o))%2/2,m=l*c+f;for(let l=a.to-1;l>=a.from;--l){let a=r[l];if(a){let r=h(e,a);r!==d&&(u.beginPath(),null!==d&&u.fill(),u.fillStyle=r,d=r);let l=Math.round(a.nt*o)+f,g=a.st*c;u.moveTo(l,g),u.arc(l,g,m,0,2*Math.PI)}}u.fill()}(e,r,u,l,f)}}class tq extends tY{Ds(e,r){return r.lt}}function tZ(e,r,l,a,h=0,o=r.length){let c=o-h;for(;0<c;){let o=c>>1,u=h+o;a(r[u],l)===e?(h=u+1,c-=o+1):c=o}return h}let tQ=tZ.bind(null,!0),t0=tZ.bind(null,!1);function t1(e,r){return e.ot<r}function t2(e,r){return r<e.ot}function t4(e,r,l){let a=r.Vs(),h=r.ui(),o=tQ(e,a,t1),c=t0(e,h,t2);if(!l)return{from:o,to:c};let u=o,d=c;return o>0&&o<e.length&&e[o].ot>=a&&(u=o-1),c>0&&c<e.length&&e[c-1].ot<=h&&(d=c+1),{from:u,to:d}}class t3{constructor(e,r,l){this.Os=!0,this.Bs=!0,this.As=!0,this.Is=[],this.zs=null,this.Ls=e,this.Es=r,this.Ns=l}bt(e){this.Os=!0,"data"===e&&(this.Bs=!0),"options"===e&&(this.As=!0)}gt(){return this.Ls.yt()?(this.Fs(),null===this.zs?null:this.Ws):null}js(){this.Is=this.Is.map(e=>Object.assign(Object.assign({},e),this.Ls.$s().Hs(e.ot)))}Us(){this.zs=null}Fs(){this.Bs&&(this.qs(),this.Bs=!1),this.As&&(this.js(),this.As=!1),this.Os&&(this.Ys(),this.Os=!1)}Ys(){let e=this.Ls.Dt(),r=this.Es.St();if(this.Us(),r.Ni()||e.Ni())return;let l=r.Zs();if(null===l||0===this.Ls.In().Xs())return;let a=this.Ls.Ct();null!==a&&(this.zs=t4(this.Is,l,this.Ns),this.Ks(e,r,a.Vt),this.Gs())}}class t5 extends t3{constructor(e,r){super(e,r,!0)}Ks(e,r,l){r.Js(this.Is,tc(this.zs)),e.Qs(this.Is,l,tc(this.zs))}te(e,r){return{ot:e,_t:r,nt:NaN,st:NaN}}qs(){let e=this.Ls.$s();this.Is=this.Ls.In().ie().map(r=>{let l=r.Vt[3];return this.ne(r.se,l,e)})}}class t6 extends t5{constructor(e,r){super(e,r),this.Ws=new tm,this.ee=new tG,this.re=new tq,this.Ws.Z([this.ee,this.re])}ne(e,r,l){return Object.assign(Object.assign({},this.te(e,r)),l.Hs(e))}Gs(){let e=this.Ls.W();this.ee.J({ds:e.lineType,it:this.Is,Nt:e.lineStyle,et:e.lineWidth,fs:null,vs:e.invertFilledArea,tt:this.zs,cs:this.Es.St().he()}),this.re.J({ds:e.lineVisible?e.lineType:void 0,it:this.Is,Nt:e.lineStyle,et:e.lineWidth,tt:this.zs,cs:this.Es.St().he(),Rs:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class t8 extends tg{constructor(){super(...arguments),this.zt=null,this.le=0,this.ae=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:r,verticalPixelRatio:l}){if(null===this.zt||0===this.zt.In.length||null===this.zt.tt)return;this.le=this.oe(r),this.le>=2&&Math.max(1,Math.floor(r))%2!=this.le%2&&this.le--,this.ae=this.zt._e?Math.min(this.le,Math.floor(r)):this.le;let a=null,h=this.ae<=this.le&&this.zt.he>=Math.floor(1.5*r);for(let o=this.zt.tt.from;o<this.zt.tt.to;++o){let c=this.zt.In[o];a!==c.ue&&(e.fillStyle=c.ue,a=c.ue);let u=Math.floor(.5*this.ae),d=Math.round(c.nt*r),f=d-u,m=this.ae,g=f+m-1,p=Math.min(c.ce,c.de),x=Math.max(c.ce,c.de),v=Math.round(p*l)-u,b=Math.max(Math.round(x*l)+u-v,this.ae);e.fillRect(f,v,m,b);let y=Math.ceil(1.5*this.le);if(h){if(this.zt.fe){let r=d-y,a=Math.max(v,Math.round(c.ve*l)-u),h=a+m-1;h>v+b-1&&(a=(h=v+b-1)-m+1),e.fillRect(r,a,f-r,h-a+1)}let r=d+y,a=Math.max(v,Math.round(c.pe*l)-u),h=a+m-1;h>v+b-1&&(a=(h=v+b-1)-m+1),e.fillRect(g+1,a,r-g,h-a+1)}}}oe(e){return Math.max(Math.floor(e),Math.floor(Math.floor(.3*K(this.zt).he*e)))}}class t9 extends t3{constructor(e,r){super(e,r,!1)}Ks(e,r,l){r.Js(this.Is,tc(this.zs)),e.me(this.Is,l,tc(this.zs))}be(e,r,l){return{ot:e,we:r.Vt[0],ge:r.Vt[1],Me:r.Vt[2],xe:r.Vt[3],nt:NaN,ve:NaN,ce:NaN,de:NaN,pe:NaN}}qs(){let e=this.Ls.$s();this.Is=this.Ls.In().ie().map(r=>this.ne(r.se,r,e))}}class t7 extends t9{constructor(){super(...arguments),this.Ws=new t8}ne(e,r,l){return Object.assign(Object.assign({},this.be(e,r,l)),l.Hs(e))}Gs(){let e=this.Ls.W();this.Ws.J({In:this.Is,he:this.Es.St().he(),fe:e.openVisible,_e:e.thinBars,tt:this.zs})}}class et extends tK{constructor(){super(...arguments),this.Cs=new tU}ps(e,r){let l=this.G;return this.Cs.bs(e,{gs:r.Se,Ms:r.ke,xs:r.ye,Ss:r.Ce,ks:e.bitmapSize.height,fs:l.fs})}}class ee extends tY{constructor(){super(...arguments),this.Te=new tU}Ds(e,r){let l=this.G;return this.Te.bs(e,{gs:r.Pe,Ms:r.Pe,xs:r.Re,Ss:r.Re,ks:e.bitmapSize.height,fs:l.fs})}}class ei extends t5{constructor(e,r){super(e,r),this.Ws=new tm,this.De=new et,this.Ve=new ee,this.Ws.Z([this.De,this.Ve])}ne(e,r,l){return Object.assign(Object.assign({},this.te(e,r)),l.Hs(e))}Gs(){let e=this.Ls.Ct();if(null===e)return;let r=this.Ls.W(),l=this.Ls.Dt().Rt(r.baseValue.price,e.Vt),a=this.Es.St().he();this.De.J({it:this.Is,et:r.lineWidth,Nt:r.lineStyle,ds:r.lineType,fs:l,vs:!1,tt:this.zs,cs:a}),this.Ve.J({it:this.Is,et:r.lineWidth,Nt:r.lineStyle,ds:r.lineVisible?r.lineType:void 0,Rs:r.pointMarkersVisible?r.pointMarkersRadius||r.lineWidth/2+2:void 0,fs:l,tt:this.zs,cs:a})}}class es extends tg{constructor(){super(...arguments),this.zt=null,this.le=0}J(e){this.zt=e}K(e){var r;if(null===this.zt||0===this.zt.In.length||null===this.zt.tt)return;let{horizontalPixelRatio:l}=e;this.le=(r=this.zt.he)>=2.5&&r<=4?Math.floor(3*l):Math.max(Math.floor(l),Math.min(Math.floor(r*(1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI))*l),Math.floor(r*l))),this.le>=2&&Math.floor(l)%2!=this.le%2&&this.le--;let a=this.zt.In;this.zt.Oe&&this.Be(e,a,this.zt.tt),this.zt._i&&this.Ae(e,a,this.zt.tt);let h=this.Ie(l);(!this.zt._i||this.le>2*h)&&this.ze(e,a,this.zt.tt)}Be(e,r,l){if(null===this.zt)return;let{context:a,horizontalPixelRatio:h,verticalPixelRatio:o}=e,c="",u=Math.min(Math.floor(h),Math.floor(this.zt.he*h)),d=Math.floor(.5*(u=Math.max(Math.floor(h),Math.min(u,this.le)))),f=null;for(let e=l.from;e<l.to;e++){let l=r[e];l.Le!==c&&(a.fillStyle=l.Le,c=l.Le);let m=Math.round(Math.min(l.ve,l.pe)*o),g=Math.round(Math.max(l.ve,l.pe)*o),p=Math.round(l.ce*o),x=Math.round(l.de*o),v=Math.round(h*l.nt)-d,b=v+u-1;null!==f&&(v=Math.min(v=Math.max(f+1,v),b));let y=b-v+1;a.fillRect(v,p,y,m-p),a.fillRect(v,g+1,y,x-g),f=b}}Ie(e){let r=Math.floor(1*e);this.le<=2*r&&(r=Math.floor(.5*(this.le-1)));let l=Math.max(Math.floor(e),r);return this.le<=2*l?Math.max(Math.floor(e),Math.floor(1*e)):l}Ae(e,r,l){if(null===this.zt)return;let{context:a,horizontalPixelRatio:h,verticalPixelRatio:o}=e,c="",u=this.Ie(h),d=null;for(let e=l.from;e<l.to;e++){let l=r[e];l.Ee!==c&&(a.fillStyle=l.Ee,c=l.Ee);let p=Math.round(l.nt*h)-Math.floor(.5*this.le),x=p+this.le-1,v=Math.round(Math.min(l.ve,l.pe)*o),b=Math.round(Math.max(l.ve,l.pe)*o);if(null!==d&&(p=Math.min(p=Math.max(d+1,p),x)),this.zt.he*h>2*u){var f,m,g;f=p,m=x-p+1,g=b-v+1,a.fillRect(f+u,v,m-2*u,u),a.fillRect(f+u,v+g-u,m-2*u,u),a.fillRect(f,v,u,g),a.fillRect(f+m-u,v,u,g)}else{let e=x-p+1;a.fillRect(p,v,e,b-v+1)}d=x}}ze(e,r,l){if(null===this.zt)return;let{context:a,horizontalPixelRatio:h,verticalPixelRatio:o}=e,c="",u=this.Ie(h);for(let e=l.from;e<l.to;e++){let l=r[e],d=Math.round(Math.min(l.ve,l.pe)*o),f=Math.round(Math.max(l.ve,l.pe)*o),m=Math.round(l.nt*h)-Math.floor(.5*this.le),g=m+this.le-1;if(l.ue!==c){let e=l.ue;a.fillStyle=e,c=e}this.zt._i&&(m+=u,d+=u,g-=u,f-=u),d>f||a.fillRect(m,d,g-m+1,f-d+1)}}}class en extends t9{constructor(){super(...arguments),this.Ws=new es}ne(e,r,l){return Object.assign(Object.assign({},this.be(e,r,l)),l.Hs(e))}Gs(){let e=this.Ls.W();this.Ws.J({In:this.Is,he:this.Es.St().he(),Oe:e.wickVisible,_i:e.borderVisible,tt:this.zs})}}class er{constructor(e,r){this.Ne=e,this.Li=r}X(e,r,l){this.Ne.draw(e,this.Li,r,l)}}class el extends t3{constructor(e,r,l){super(e,r,!1),this.wn=l,this.Ws=new er(this.wn.renderer(),r=>{let l=e.Ct();return null===l?null:e.Dt().Rt(r,l.Vt)})}Fe(e){return this.wn.priceValueBuilder(e)}We(e){return this.wn.isWhitespace(e)}qs(){let e=this.Ls.$s();this.Is=this.Ls.In().ie().map(r=>Object.assign(Object.assign({ot:r.se,nt:NaN},e.Hs(r.se)),{je:r.He}))}Ks(e,r){r.Js(this.Is,tc(this.zs))}Gs(){this.wn.update({bars:this.Is.map(ea),barSpacing:this.Es.St().he(),visibleRange:this.zs},this.Ls.W())}}function ea(e){return{x:e.nt,time:e.ot,originalData:e.je,barColor:e.ue}}class eh extends tg{constructor(){super(...arguments),this.zt=null,this.$e=[]}J(e){this.zt=e,this.$e=[]}K({context:e,horizontalPixelRatio:r,verticalPixelRatio:l}){if(null===this.zt||0===this.zt.it.length||null===this.zt.tt)return;this.$e.length||this.Ue(r);let a=Math.max(1,Math.floor(l)),h=Math.round(this.zt.qe*l)-Math.floor(a/2),o=h+a;for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){let c,u;let d=this.zt.it[r],f=this.$e[r-this.zt.tt.from],m=Math.round(d.st*l);e.fillStyle=d.ue,m<=h?(c=m,u=o):(c=h,u=m-Math.floor(a/2)+a),e.fillRect(f.Vs,c,f.ui-f.Vs+1,u-c)}}Ue(e){if(null===this.zt||0===this.zt.it.length||null===this.zt.tt)return void(this.$e=[]);let r=1>=Math.ceil(this.zt.he*e)?0:Math.max(1,Math.floor(e)),l=Math.round(this.zt.he*e)-r;this.$e=Array(this.zt.tt.to-this.zt.tt.from);for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){let a,h;let o=this.zt.it[r],c=Math.round(o.nt*e);if(l%2){let e=(l-1)/2;a=c-e,h=c+e}else{let e=l/2;a=c-e,h=c+e-1}this.$e[r-this.zt.tt.from]={Vs:a,ui:h,Ye:c,Ze:o.nt*e,ot:o.ot}}for(let e=this.zt.tt.from+1;e<this.zt.tt.to;e++){let l=this.$e[e-this.zt.tt.from],a=this.$e[e-this.zt.tt.from-1];l.ot===a.ot+1&&l.Vs-a.ui!==r+1&&(a.Ye>a.Ze?a.ui=l.Vs-r-1:l.Vs=a.ui+r+1)}let a=Math.ceil(this.zt.he*e);for(let e=this.zt.tt.from;e<this.zt.tt.to;e++){let r=this.$e[e-this.zt.tt.from];r.ui<r.Vs&&(r.ui=r.Vs),a=Math.min(r.ui-r.Vs+1,a)}if(r>0&&a<4)for(let e=this.zt.tt.from;e<this.zt.tt.to;e++){let r=this.$e[e-this.zt.tt.from];r.ui-r.Vs+1>a&&(r.Ye>r.Ze?r.ui-=1:r.Vs+=1)}}}class eo extends t5{constructor(){super(...arguments),this.Ws=new eh}ne(e,r,l){return Object.assign(Object.assign({},this.te(e,r)),l.Hs(e))}Gs(){let e={it:this.Is,he:this.Es.St().he(),tt:this.zs,qe:this.Ls.Dt().Rt(this.Ls.W().base,K(this.Ls.Ct()).Vt)};this.Ws.J(e)}}class ec extends t5{constructor(){super(...arguments),this.Ws=new tq}ne(e,r,l){return Object.assign(Object.assign({},this.te(e,r)),l.Hs(e))}Gs(){let e=this.Ls.W(),r={it:this.Is,Nt:e.lineStyle,ds:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Rs:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.zs,cs:this.Es.St().he()};this.Ws.J(r)}}let eu=/[2-9]/g;class ed{constructor(e=50){this.Xe=0,this.Ke=1,this.Ge=1,this.Je={},this.Qe=new Map,this.tr=e}ir(){this.Xe=0,this.Qe.clear(),this.Ke=1,this.Ge=1,this.Je={}}xi(e,r,l){return this.nr(e,r,l).width}Mi(e,r,l){let a=this.nr(e,r,l);return((a.actualBoundingBoxAscent||0)-(a.actualBoundingBoxDescent||0))/2}nr(e,r,l){let a=String(r).replace(l||eu,"0");if(this.Qe.has(a))return F(this.Qe.get(a)).sr;if(this.Xe===this.tr){let e=this.Je[this.Ge];delete this.Je[this.Ge],this.Qe.delete(e),this.Ge++,this.Xe--}e.save(),e.textBaseline="middle";let h=e.measureText(a);return e.restore(),0===h.width&&r.length||(this.Qe.set(a,{sr:h,er:this.Ke}),this.Je[this.Ke]=a,this.Xe++,this.Ke++),h}}class ef{constructor(e){this.rr=null,this.k=null,this.hr="right",this.lr=e}ar(e,r,l){this.rr=e,this.k=r,this.hr=l}X(e){null!==this.k&&null!==this.rr&&this.rr.X(e,this.k,this.lr,this.hr)}}class em{constructor(e,r,l){this._r=e,this.lr=new ed(50),this.ur=r,this.F=l,this.j=-1,this.Wt=new ef(this.lr)}gt(){let e=this.F.cr(this.ur);if(null===e)return null;let r=e.dr(this.ur)?e.vr():this.ur.Dt();if(null===r)return null;let l=e.pr(r);if("overlay"===l)return null;let a=this.F.mr();return a.P!==this.j&&(this.j=a.P,this.lr.ir()),this.Wt.ar(this._r.Ii(),a,l),this.Wt}}class eg extends tg{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}br(e,r){var l;if(!(null===(l=this.zt)||void 0===l?void 0:l.yt))return null;let{st:a,et:h,wr:o}=this.zt;return r>=a-h-7&&r<=a+h+7?{gr:this.zt,wr:o}:null}K({context:e,bitmapSize:r,horizontalPixelRatio:l,verticalPixelRatio:a}){if(null===this.zt||!1===this.zt.yt)return;let h=Math.round(this.zt.st*a);h<0||h>r.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*l),W(e,this.zt.Nt),B(e,h,0,r.width))}}class ep{constructor(e){this.Mr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.Sr=new eg,this.ft=!0,this.Ls=e,this.Es=e.$t(),this.Sr.J(this.Mr)}bt(){this.ft=!0}gt(){return this.Ls.yt()?(this.ft&&(this.kr(),this.ft=!1),this.Sr):null}}class ex extends ep{constructor(e){super(e)}kr(){this.Mr.yt=!1;let e=this.Ls.Dt(),r=e.yr().yr;if(2!==r&&3!==r)return;let l=this.Ls.W();if(!l.baseLineVisible||!this.Ls.yt())return;let a=this.Ls.Ct();null!==a&&(this.Mr.yt=!0,this.Mr.st=e.Rt(a.Vt,a.Vt),this.Mr.V=l.baseLineColor,this.Mr.et=l.baseLineWidth,this.Mr.Nt=l.baseLineStyle)}}class ev extends tg{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}He(){return this.zt}K({context:e,horizontalPixelRatio:r,verticalPixelRatio:l}){let a=this.zt;if(null===a)return;let h=Math.max(1,Math.floor(r)),o=h%2/2,c=Math.round(a.Ze.x*r)+o,u=a.Ze.y*l;e.fillStyle=a.Cr,e.beginPath();let d=Math.max(2,1.5*a.Tr)*r;e.arc(c,u,d,0,2*Math.PI,!1),e.fill(),e.fillStyle=a.Pr,e.beginPath(),e.arc(c,u,a.ht*r,0,2*Math.PI,!1),e.fill(),e.lineWidth=h,e.strokeStyle=a.Rr,e.beginPath(),e.arc(c,u,a.ht*r+h/2,0,2*Math.PI,!1),e.stroke()}}let eb=[{Dr:0,Vr:.25,Or:4,Br:10,Ar:.25,Ir:0,zr:.4,Lr:.8},{Dr:.25,Vr:.525,Or:10,Br:14,Ar:0,Ir:0,zr:.8,Lr:0},{Dr:.525,Vr:1,Or:14,Br:14,Ar:0,Ir:0,zr:0,Lr:0}];function ey(e,r,l,a){return function(e,r){if("transparent"===e)return e;let l=Q(e),a=l[3];return`rgba(${l[0]}, ${l[1]}, ${l[2]}, ${r*a})`}(e,l+(a-l)*r)}function ew(e,r){var l;let a;let h=e%2600/2600;for(let e of eb)if(h>=e.Dr&&h<=e.Vr){a=e;break}V(void 0!==a,"Last price animation internal logic error");let o=(h-a.Dr)/(a.Vr-a.Dr);return{Pr:ey(r,o,a.Ar,a.Ir),Rr:ey(r,o,a.zr,a.Lr),ht:(l=a.Or)+(a.Br-l)*o}}class eN{constructor(e){this.Wt=new ev,this.ft=!0,this.Er=!0,this.Nr=performance.now(),this.Fr=this.Nr-1,this.Wr=e}jr(){this.Fr=this.Nr-1,this.bt()}Hr(){if(this.bt(),2===this.Wr.W().lastPriceAnimation){let e=performance.now(),r=this.Fr-e;if(r>0)return void(r<650&&(this.Fr+=2600));this.Nr=e,this.Fr=e+2600}}bt(){this.ft=!0}$r(){this.Er=!0}yt(){return 0!==this.Wr.W().lastPriceAnimation}Ur(){switch(this.Wr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Fr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Er=!1):this.Er&&(this.qr(),this.Er=!1),this.Wt}Mt(){this.Wt.J(null);let e=this.Wr.$t().St(),r=e.Zs(),l=this.Wr.Ct();if(null===r||null===l)return;let a=this.Wr.Yr(!0);if(a.Zr||!r.Xr(a.se))return;let h={x:e.It(a.se),y:this.Wr.Dt().Rt(a._t,l.Vt)},o=a.V,c=this.Wr.W().lineWidth,u=ew(this.Kr(),o);this.Wt.J({Cr:o,Tr:c,Pr:u.Pr,Rr:u.Rr,ht:u.ht,Ze:h})}qr(){let e=this.Wt.He();if(null!==e){let r=ew(this.Kr(),e.Cr);e.Pr=r.Pr,e.Rr=r.Rr,e.ht=r.ht}}Kr(){return this.Ur()?performance.now()-this.Nr:2599}}function ej(e,r){return tX(Math.min(Math.max(e,12),30)*r)}function eS(e,r){switch(e){case"arrowDown":case"arrowUp":return ej(r,1);case"circle":return ej(r,.8);case"square":return ej(r,.7)}}function e_(e){return function(e){let r=Math.ceil(e);return r%2!=0?r-1:r}(ej(e,1))}function eM(e){return Math.max(ej(e,.1),3)}function eE(e,r,l){return r?e:l?Math.ceil(e/2):0}function ek(e,r,l,a,h){let o=eS("square",l),c=(o-1)/2,u=e-c,d=r-c;return a>=u&&a<=u+o&&h>=d&&h<=d+o}function eC(e,r,l,a){let h=(eS("arrowUp",a)-1)/2*l.Gr,o=(tX(a/2)-1)/2*l.Gr;r.beginPath(),e?(r.moveTo(l.nt-h,l.st),r.lineTo(l.nt,l.st-h),r.lineTo(l.nt+h,l.st),r.lineTo(l.nt+o,l.st),r.lineTo(l.nt+o,l.st+h),r.lineTo(l.nt-o,l.st+h)):(r.moveTo(l.nt-h,l.st),r.lineTo(l.nt,l.st+h),r.lineTo(l.nt+h,l.st),r.lineTo(l.nt+o,l.st),r.lineTo(l.nt+o,l.st-h),r.lineTo(l.nt-o,l.st-h)),r.lineTo(l.nt-o,l.st),r.fill()}class eL extends tg{constructor(){super(...arguments),this.zt=null,this.lr=new ed,this.j=-1,this.H="",this.Jr=""}J(e){this.zt=e}ar(e,r){this.j===e&&this.H===r||(this.j=e,this.H=r,this.Jr=td(e,r),this.lr.ir())}br(e,r){if(null===this.zt||null===this.zt.tt)return null;for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){let a=this.zt.it[l];if(!(void 0===a.Kt||!function(e,r,l,a,h,o){let c=a/2;return h>=e&&h<=e+l&&o>=r-c&&o<=r+c}(a.Kt.nt,a.Kt.st,a.Kt.Hi,a.Kt.At,e,r))||function(e,r,l){if(0===e.Xs)return!1;switch(e.ih){case"arrowDown":case"arrowUp":var a;return a=e.nt,ek(a,e.st,e.Xs,r,l);case"circle":return function(e,r,l,a,h){let o=2+eS("circle",l)/2,c=e-a,u=r-h;return Math.sqrt(c*c+u*u)<=o}(e.nt,e.st,e.Xs,r,l);case"square":return ek(e.nt,e.st,e.Xs,r,l)}}(a,e,r))return{gr:a.Qr,wr:a.wr}}return null}K({context:e,horizontalPixelRatio:r,verticalPixelRatio:l},a,h){if(null!==this.zt&&null!==this.zt.tt){e.textBaseline="middle",e.font=this.Jr;for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){let h=this.zt.it[a];void 0!==h.Kt&&(h.Kt.Hi=this.lr.xi(e,h.Kt.th),h.Kt.At=this.j,h.Kt.nt=h.nt-h.Kt.Hi/2),function(e,r,l,a){var h,o,c;r.fillStyle=e.V,void 0!==e.Kt&&(h=e.Kt.th,o=e.Kt.nt,c=e.Kt.st,r.save(),r.scale(l,a),r.fillText(h,o,c),r.restore()),function(e,r,l){if(0!==e.Xs){switch(e.ih){case"arrowDown":return void eC(!1,r,l,e.Xs);case"arrowUp":return void eC(!0,r,l,e.Xs);case"circle":return void function(e,r,l){let a=(eS("circle",l)-1)/2;e.beginPath(),e.arc(r.nt,r.st,a*r.Gr,0,2*Math.PI,!1),e.fill()}(r,l,e.Xs);case"square":return void function(e,r,l){let a=eS("square",l),h=(a-1)*r.Gr/2,o=r.nt-h,c=r.st-h;e.fillRect(o,c,a*r.Gr,a*r.Gr)}(r,l,e.Xs)}e.ih}}(e,r,{nt:Math.round(e.nt*l)+Math.max(1,Math.floor(l))%2/2,st:e.st*a,Gr:l})}(h,e,r,l)}}}}class ez{constructor(e,r){this.ft=!0,this.eh=!0,this.rh=!0,this.hh=null,this.ah=null,this.Wt=new eL,this.Wr=e,this.$i=r,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.rh=!0,"data"===e&&(this.eh=!0,this.ah=null)}gt(e){if(!this.Wr.yt())return null;this.ft&&this.oh();let r=this.$i.W().layout;return this.Wt.ar(r.fontSize,r.fontFamily),this.Wt.J(this.zt),this.Wt}_h(){if(this.rh){if(this.Wr.uh().length>0){let e=this.$i.St().he(),r=eM(e),l=1.5*e_(e)+2*r,a=this.dh();this.hh={above:eE(l,a.aboveBar,a.inBar),below:eE(l,a.belowBar,a.inBar)}}else this.hh=null;this.rh=!1}return this.hh}dh(){return null===this.ah&&(this.ah=this.Wr.uh().reduce((e,r)=>(e[r.position]||(e[r.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.ah}oh(){let e=this.Wr.Dt(),r=this.$i.St(),l=this.Wr.uh();this.eh&&(this.zt.it=l.map(e=>({ot:e.time,nt:0,st:0,Xs:0,ih:e.shape,V:e.color,Qr:e.Qr,wr:e.id,Kt:void 0})),this.eh=!1);let a=this.$i.W().layout;this.zt.tt=null;let h=r.Zs();if(null===h)return;let o=this.Wr.Ct();if(null===o||0===this.zt.it.length)return;let c=NaN,u=eM(r.he()),d={nh:u,sh:u};this.zt.tt=t4(this.zt.it,h,!0);for(let h=this.zt.tt.from;h<this.zt.tt.to;h++){let f=l[h];f.time!==c&&(d.nh=u,d.sh=u,c=f.time);let m=this.zt.it[h];m.nt=r.It(f.time),void 0!==f.text&&f.text.length>0&&(m.Kt={th:f.text,nt:0,st:0,Hi:0,At:0});let g=this.Wr.fh(f.time);null!==g&&function(e,r,l,a,h,o,c,u,d){let f=tn(l)?l:l.xe,m=tn(l)?l:l.ge,g=tn(l)?l:l.Me,p=tn(r.size)?Math.max(r.size,0):1,x=e_(u.he())*p,v=x/2;switch(e.Xs=x,r.position){case"inBar":return e.st=c.Rt(f,d),void(void 0!==e.Kt&&(e.Kt.st=e.st+v+o+.6*h));case"aboveBar":return e.st=c.Rt(m,d)-v-a.nh,void 0!==e.Kt&&(e.Kt.st=e.st-v-.6*h,a.nh+=1.2*h),void(a.nh+=x+o);case"belowBar":return e.st=c.Rt(g,d)+v+a.sh,void 0!==e.Kt&&(e.Kt.st=e.st+v+o+.6*h,a.sh+=1.2*h),void(a.sh+=x+o)}r.position}(m,f,g,d,a.fontSize,u,e,r,o.Vt)}this.ft=!1}}class eR extends ep{constructor(e){super(e)}kr(){let e=this.Mr;e.yt=!1;let r=this.Ls.W();if(!r.priceLineVisible||!this.Ls.yt())return;let l=this.Ls.Yr(0===r.priceLineSource);l.Zr||(e.yt=!0,e.st=l.ki,e.V=this.Ls.ph(l.V),e.et=r.priceLineWidth,e.Nt=r.priceLineStyle)}}class eP extends tE{constructor(e){super(),this.jt=e}zi(e,r,l){e.yt=!1,r.yt=!1;let a=this.jt;if(!a.yt())return;let h=a.W(),o=h.lastValueVisible,c=""!==a.mh(),u=0===h.seriesLastValueMode,d=a.Yr(!1);if(d.Zr)return;o&&(e.Kt=this.bh(d,o,u),e.yt=0!==e.Kt.length),(c||u)&&(r.Kt=this.wh(d,o,c,u),r.yt=r.Kt.length>0);let f=a.ph(d.V),m=te(f);l.t=m.t,l.ki=d.ki,r.Ot=a.$t().Bt(d.ki/a.Dt().At()),e.Ot=f,e.V=m.i,r.V=m.i}wh(e,r,l,a){let h="",o=this.jt.mh();return l&&0!==o.length&&(h+=`${o} `),r&&a&&(h+=this.jt.Dt().gh()?e.Mh:e.xh),h.trim()}bh(e,r,l){return r?l?this.jt.Dt().gh()?e.xh:e.Mh:e.Kt:""}}function eT(e,r,l,a){let h=Number.isFinite(r),o=Number.isFinite(l);return h&&o?e(r,l):h||o?h?r:l:a}class eO{constructor(e,r){this.Sh=e,this.kh=r}yh(e){return null!==e&&this.Sh===e.Sh&&this.kh===e.kh}Ch(){return new eO(this.Sh,this.kh)}Th(){return this.Sh}Ph(){return this.kh}Rh(){return this.kh-this.Sh}Ni(){return this.kh===this.Sh||Number.isNaN(this.kh)||Number.isNaN(this.Sh)}ts(e){return null===e?this:new eO(eT(Math.min,this.Th(),e.Th(),-1/0),eT(Math.max,this.Ph(),e.Ph(),1/0))}Dh(e){if(!tn(e)||0==this.kh-this.Sh)return;let r=.5*(this.kh+this.Sh),l=this.kh-r,a=this.Sh-r;l*=e,a*=e,this.kh=r+l,this.Sh=r+a}Vh(e){tn(e)&&(this.kh+=e,this.Sh+=e)}Oh(){return{minValue:this.Sh,maxValue:this.kh}}static Bh(e){return null===e?null:new eO(e.minValue,e.maxValue)}}class eD{constructor(e,r){this.Ah=e,this.Ih=r||null}zh(){return this.Ah}Lh(){return this.Ih}Oh(){return null===this.Ah?null:{priceRange:this.Ah.Oh(),margins:this.Ih||void 0}}static Bh(e){return null===e?null:new eD(eO.Bh(e.priceRange),e.margins)}}class e$ extends ep{constructor(e,r){super(e),this.Eh=r}kr(){let e=this.Mr;e.yt=!1;let r=this.Eh.W();if(!this.Ls.yt()||!r.lineVisible)return;let l=this.Eh.Nh();null!==l&&(e.yt=!0,e.st=l,e.V=r.color,e.et=r.lineWidth,e.Nt=r.lineStyle,e.wr=this.Eh.W().id)}}class eA extends tE{constructor(e,r){super(),this.Wr=e,this.Eh=r}zi(e,r,l){e.yt=!1,r.yt=!1;let a=this.Eh.W(),h=a.axisLabelVisible,o=""!==a.title,c=this.Wr;if(!h||!c.yt())return;let u=this.Eh.Nh();if(null===u)return;o&&(r.Kt=a.title,r.yt=!0),r.Ot=c.$t().Bt(u/c.Dt().At()),e.Kt=this.Fh(a.price),e.yt=!0;let d=te(a.axisLabelColor||a.color);l.t=d.t;let f=a.axisLabelTextColor||d.i;e.V=f,r.V=f,l.ki=u}Fh(e){let r=this.Wr.Ct();return null===r?"":this.Wr.Dt().Fi(e,r.Vt)}}class eI{constructor(e,r){this.Wr=e,this.cn=r,this.Wh=new e$(e,this),this._r=new eA(e,this),this.jh=new em(this._r,e,e.$t())}Hh(e){ts(this.cn,e),this.bt(),this.Wr.$t().$h()}W(){return this.cn}Uh(){return this.Wh}qh(){return this.jh}Yh(){return this._r}bt(){this.Wh.bt(),this._r.bt()}Nh(){let e=this.Wr,r=e.Dt();if(e.$t().St().Ni()||r.Ni())return null;let l=e.Ct();return null===l?null:r.Rt(this.cn.price,l.Vt)}}class eW extends tR{constructor(e){super(),this.$i=e}$t(){return this.$i}}let eB={Bar:(e,r,l,a)=>{var h;let o=r.upColor,c=r.downColor,u=K(e(l,a)),d=H(u.Vt[0])<=H(u.Vt[3]);return{ue:null!==(h=u.V)&&void 0!==h?h:d?o:c}},Candlestick:(e,r,l,a)=>{var h,o,c;let u=r.upColor,d=r.downColor,f=r.borderUpColor,m=r.borderDownColor,g=r.wickUpColor,p=r.wickDownColor,x=K(e(l,a)),v=H(x.Vt[0])<=H(x.Vt[3]);return{ue:null!==(h=x.V)&&void 0!==h?h:v?u:d,Ee:null!==(o=x.Ot)&&void 0!==o?o:v?f:m,Le:null!==(c=x.Zh)&&void 0!==c?c:v?g:p}},Custom:(e,r,l,a)=>{var h;return{ue:null!==(h=K(e(l,a)).V)&&void 0!==h?h:r.color}},Area:(e,r,l,a)=>{var h,o,c,u;let d=K(e(l,a));return{ue:null!==(h=d.lt)&&void 0!==h?h:r.lineColor,lt:null!==(o=d.lt)&&void 0!==o?o:r.lineColor,Ts:null!==(c=d.Ts)&&void 0!==c?c:r.topColor,Ps:null!==(u=d.Ps)&&void 0!==u?u:r.bottomColor}},Baseline:(e,r,l,a)=>{var h,o,c,u,d,f;let m=K(e(l,a));return{ue:m.Vt[3]>=r.baseValue.price?r.topLineColor:r.bottomLineColor,Pe:null!==(h=m.Pe)&&void 0!==h?h:r.topLineColor,Re:null!==(o=m.Re)&&void 0!==o?o:r.bottomLineColor,Se:null!==(c=m.Se)&&void 0!==c?c:r.topFillColor1,ke:null!==(u=m.ke)&&void 0!==u?u:r.topFillColor2,ye:null!==(d=m.ye)&&void 0!==d?d:r.bottomFillColor1,Ce:null!==(f=m.Ce)&&void 0!==f?f:r.bottomFillColor2}},Line:(e,r,l,a)=>{var h,o;let c=K(e(l,a));return{ue:null!==(h=c.V)&&void 0!==h?h:r.color,lt:null!==(o=c.V)&&void 0!==o?o:r.color}},Histogram:(e,r,l,a)=>{var h;return{ue:null!==(h=K(e(l,a)).V)&&void 0!==h?h:r.color}}};class eV{constructor(e){this.Xh=(e,r)=>void 0!==r?r.Vt:this.Wr.In().Kh(e),this.Wr=e,this.Gh=eB[e.Jh()]}Hs(e,r){return this.Gh(this.Xh,this.Wr.W(),e,r)}}!function(e){e[e.NearestLeft=-1]="NearestLeft",e[e.None=0]="None",e[e.NearestRight=1]="NearestRight"}(u||(u={}));class eF{constructor(){this.Qh=[],this.tl=new Map,this.il=new Map}nl(){return this.Xs()>0?this.Qh[this.Qh.length-1]:null}sl(){return this.Xs()>0?this.el(0):null}An(){return this.Xs()>0?this.el(this.Qh.length-1):null}Xs(){return this.Qh.length}Ni(){return 0===this.Xs()}Xr(e){return null!==this.rl(e,0)}Kh(e){return this.hl(e)}hl(e,r=0){let l=this.rl(e,r);return null===l?null:Object.assign(Object.assign({},this.ll(l)),{se:this.el(l)})}ie(){return this.Qh}al(e,r,l){if(this.Ni())return null;let a=null;for(let h of l)a=eK(a,this.ol(e,r,h));return a}J(e){this.il.clear(),this.tl.clear(),this.Qh=e}el(e){return this.Qh[e].se}ll(e){return this.Qh[e]}rl(e,r){let l=this._l(e);if(null===l&&0!==r)switch(r){case -1:return this.ul(e);case 1:return this.cl(e);default:throw TypeError("Unknown search mode")}return l}ul(e){let r=this.dl(e);return r>0&&(r-=1),r!==this.Qh.length&&this.el(r)<e?r:null}cl(e){let r=this.fl(e);return r!==this.Qh.length&&e<this.el(r)?r:null}_l(e){let r=this.dl(e);return r===this.Qh.length||e<this.Qh[r].se?null:r}dl(e){return tQ(this.Qh,e,(e,r)=>e.se<r)}fl(e){return t0(this.Qh,e,(e,r)=>e.se>r)}vl(e,r,l){let a=null;for(let h=e;h<r;h++){let e=this.Qh[h].Vt[l];Number.isNaN(e)||(null===a?a={pl:e,ml:e}:(e<a.pl&&(a.pl=e),e>a.ml&&(a.ml=e)))}return a}ol(e,r,l){if(this.Ni())return null;let a=null,h=K(this.sl()),o=K(this.An()),c=Math.max(e,h),u=Math.min(r,o),d=30*Math.ceil(c/30),f=Math.max(d,30*Math.floor(u/30));{let e=this.dl(c),h=this.fl(Math.min(u,d,r));a=eK(a,this.vl(e,h,l))}let m=this.tl.get(l);void 0===m&&(m=new Map,this.tl.set(l,m));for(let e=Math.max(d+1,c);e<f;e+=30){let r=Math.floor(e/30),h=m.get(r);if(void 0===h){let e=this.dl(30*r),a=this.fl((r+1)*30-1);h=this.vl(e,a,l),m.set(r,h)}a=eK(a,h)}{let e=this.dl(f),r=this.fl(u);a=eK(a,this.vl(e,r,l))}return a}}function eK(e,r){return null===e?r:null===r?e:{pl:Math.min(e.pl,r.pl),ml:Math.max(e.ml,r.ml)}}class eH{constructor(e){this.bl=e}X(e,r,l){this.bl.draw(e)}wl(e,r,l){var a,h;null===(h=(a=this.bl).drawBackground)||void 0===h||h.call(a,e)}}class eX{constructor(e){this.Qe=null,this.wn=e}gt(){var e;let r=this.wn.renderer();if(null===r)return null;if((null===(e=this.Qe)||void 0===e?void 0:e.gl)===r)return this.Qe.Ml;let l=new eH(r);return this.Qe={gl:r,Ml:l},l}xl(){var e,r,l;return null!==(l=null===(r=(e=this.wn).zOrder)||void 0===r?void 0:r.call(e))&&void 0!==l?l:"normal"}}function eU(e){var r,l,a,h,o;return{Kt:e.text(),ki:e.coordinate(),Si:null===(r=e.fixedCoordinate)||void 0===r?void 0:r.call(e),V:e.textColor(),t:e.backColor(),yt:null===(a=null===(l=e.visible)||void 0===l?void 0:l.call(e))||void 0===a||a,hi:null===(o=null===(h=e.tickVisible)||void 0===h?void 0:h.call(e))||void 0===o||o}}class eG{constructor(e,r){this.Wt=new tL,this.Sl=e,this.kl=r}gt(){return this.Wt.J(Object.assign({Hi:this.kl.Hi()},eU(this.Sl))),this.Wt}}class eJ extends tE{constructor(e,r){super(),this.Sl=e,this.Li=r}zi(e,r,l){let a=eU(this.Sl);l.t=a.t,e.V=a.V;let h=2/12*this.Li.P();l.wi=h,l.gi=h,l.ki=a.ki,l.Si=a.Si,e.Kt=a.Kt,e.yt=a.yt,e.hi=a.hi}}class eY{constructor(e,r){this.yl=null,this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=e,this.Wr=r}Vl(){return this.Dl}Vn(){var e,r;null===(r=(e=this.Dl).updateAllViews)||void 0===r||r.call(e)}Pn(){var e,r,l,a;let h=null!==(l=null===(r=(e=this.Dl).paneViews)||void 0===r?void 0:r.call(e))&&void 0!==l?l:[];if((null===(a=this.yl)||void 0===a?void 0:a.gl)===h)return this.yl.Ml;let o=h.map(e=>new eX(e));return this.yl={gl:h,Ml:o},o}Qi(){var e,r,l,a;let h=null!==(l=null===(r=(e=this.Dl).timeAxisViews)||void 0===r?void 0:r.call(e))&&void 0!==l?l:[];if((null===(a=this.Cl)||void 0===a?void 0:a.gl)===h)return this.Cl.Ml;let o=this.Wr.$t().St(),c=h.map(e=>new eG(e,o));return this.Cl={gl:h,Ml:c},c}Rn(){var e,r,l,a;let h=null!==(l=null===(r=(e=this.Dl).priceAxisViews)||void 0===r?void 0:r.call(e))&&void 0!==l?l:[];if((null===(a=this.Tl)||void 0===a?void 0:a.gl)===h)return this.Tl.Ml;let o=this.Wr.Dt(),c=h.map(e=>new eJ(e,o));return this.Tl={gl:h,Ml:c},c}Ol(){var e,r,l,a;let h=null!==(l=null===(r=(e=this.Dl).priceAxisPaneViews)||void 0===r?void 0:r.call(e))&&void 0!==l?l:[];if((null===(a=this.Pl)||void 0===a?void 0:a.gl)===h)return this.Pl.Ml;let o=h.map(e=>new eX(e));return this.Pl={gl:h,Ml:o},o}Bl(){var e,r,l,a;let h=null!==(l=null===(r=(e=this.Dl).timeAxisPaneViews)||void 0===r?void 0:r.call(e))&&void 0!==l?l:[];if((null===(a=this.Rl)||void 0===a?void 0:a.gl)===h)return this.Rl.Ml;let o=h.map(e=>new eX(e));return this.Rl={gl:h,Ml:o},o}Al(e,r){var l,a,h;return null!==(h=null===(a=(l=this.Dl).autoscaleInfo)||void 0===a?void 0:a.call(l,e,r))&&void 0!==h?h:null}br(e,r){var l,a,h;return null!==(h=null===(a=(l=this.Dl).hitTest)||void 0===a?void 0:a.call(l,e,r))&&void 0!==h?h:null}}function eq(e,r,l,a){e.forEach(e=>{r(e).forEach(e=>{e.xl()===l&&a.push(e)})})}function eZ(e){return e.Pn()}function eQ(e){return e.Ol()}function e0(e){return e.Bl()}class e1 extends eW{constructor(e,r,l,a,h){super(e),this.zt=new eF,this.Wh=new eR(this),this.Il=[],this.zl=new ex(this),this.Ll=null,this.El=null,this.Nl=[],this.Fl=[],this.Wl=null,this.jl=[],this.cn=r,this.Hl=l;let o=new eP(this);this.rn=[o],this.jh=new em(o,this,e),"Area"!==l&&"Line"!==l&&"Baseline"!==l||(this.Ll=new eN(this)),this.$l(),this.Ul(h)}S(){null!==this.Wl&&clearTimeout(this.Wl)}ph(e){return this.cn.priceLineColor||e}Yr(e){let r,l;let a={Zr:!0},h=this.Dt();if(this.$t().St().Ni()||h.Ni()||this.zt.Ni())return a;let o=this.$t().St().Zs(),c=this.Ct();if(null===o||null===c)return a;if(e){let e=this.zt.nl();if(null===e)return a;r=e,l=e.se}else{let e=this.zt.hl(o.ui(),-1);if(null===e||null===(r=this.zt.Kh(e.se)))return a;l=e.se}let u=r.Vt[3],d=this.$s().Hs(l,{Vt:r}),f=h.Rt(u,c.Vt);return{Zr:!1,_t:u,Kt:h.Fi(u,c.Vt),Mh:h.ql(u),xh:h.Yl(u,c.Vt),V:d.ue,ki:f,se:l}}$s(){return null!==this.El||(this.El=new eV(this)),this.El}W(){return this.cn}Hh(e){let r=e.priceScaleId;void 0!==r&&r!==this.cn.priceScaleId&&this.$t().Zl(this,r),ts(this.cn,e),void 0!==e.priceFormat&&(this.$l(),this.$t().Xl()),this.$t().Kl(this),this.$t().Gl(),this.wn.bt("options")}J(e,r){this.zt.J(e),this.Jl(),this.wn.bt("data"),this.dn.bt("data"),null!==this.Ll&&(r&&r.Ql?this.Ll.Hr():0===e.length&&this.Ll.jr());let l=this.$t().cr(this);this.$t().ta(l),this.$t().Kl(this),this.$t().Gl(),this.$t().$h()}ia(e){this.Nl=e,this.Jl();let r=this.$t().cr(this);this.dn.bt("data"),this.$t().ta(r),this.$t().Kl(this),this.$t().Gl(),this.$t().$h()}na(){return this.Nl}uh(){return this.Fl}sa(e){let r=new eI(this,e);return this.Il.push(r),this.$t().Kl(this),r}ea(e){let r=this.Il.indexOf(e);-1!==r&&this.Il.splice(r,1),this.$t().Kl(this)}Jh(){return this.Hl}Ct(){let e=this.ra();return null===e?null:{Vt:e.Vt[3],ha:e.ot}}ra(){let e=this.$t().St().Zs();if(null===e)return null;let r=e.Vs();return this.zt.hl(r,1)}In(){return this.zt}fh(e){let r=this.zt.Kh(e);return null===r?null:"Bar"===this.Hl||"Candlestick"===this.Hl||"Custom"===this.Hl?{we:r.Vt[0],ge:r.Vt[1],Me:r.Vt[2],xe:r.Vt[3]}:r.Vt[3]}la(e){let r=[];eq(this.jl,eZ,"top",r);let l=this.Ll;return null!==l&&l.yt()&&(null===this.Wl&&l.Ur()&&(this.Wl=setTimeout(()=>{this.Wl=null,this.$t().aa()},0)),l.$r(),r.unshift(l)),r}Pn(){let e=[];this.oa()||e.push(this.zl),e.push(this.wn,this.Wh,this.dn);let r=this.Il.map(e=>e.Uh());return e.push(...r),eq(this.jl,eZ,"normal",e),e}_a(){return this.ua(eZ,"bottom")}ca(e){return this.ua(eQ,e)}da(e){return this.ua(e0,e)}fa(e,r){return this.jl.map(l=>l.br(e,r)).filter(e=>null!==e)}Ji(e){return[this.jh,...this.Il.map(e=>e.qh())]}Rn(e,r){if(r!==this.Yi&&!this.oa())return[];let l=[...this.rn];for(let e of this.Il)l.push(e.Yh());return this.jl.forEach(e=>{l.push(...e.Rn())}),l}Qi(){let e=[];return this.jl.forEach(r=>{e.push(...r.Qi())}),e}Al(e,r){if(void 0!==this.cn.autoscaleInfoProvider){let l=this.cn.autoscaleInfoProvider(()=>{let l=this.va(e,r);return null===l?null:l.Oh()});return eD.Bh(l)}return this.va(e,r)}pa(){return this.cn.priceFormat.minMove}ma(){return this.ba}Vn(){var e;for(let e of(this.wn.bt(),this.dn.bt(),this.rn))e.bt();for(let e of this.Il)e.bt();this.Wh.bt(),this.zl.bt(),null===(e=this.Ll)||void 0===e||e.bt(),this.jl.forEach(e=>e.Vn())}Dt(){return K(super.Dt())}kt(e){if(!(("Line"===this.Hl||"Area"===this.Hl||"Baseline"===this.Hl)&&this.cn.crosshairMarkerVisible))return null;let r=this.zt.Kh(e);return null===r?null:{_t:r.Vt[3],ht:this.wa(),Ot:this.ga(),Pt:this.Ma(),Tt:this.xa(e)}}mh(){return this.cn.title}yt(){return this.cn.visible}Sa(e){this.jl.push(new eY(e,this))}ka(e){this.jl=this.jl.filter(r=>r.Vl()!==e)}ya(){if(this.wn instanceof el!=!1)return e=>this.wn.Fe(e)}Ca(){if(this.wn instanceof el!=!1)return e=>this.wn.We(e)}oa(){return!tT(this.Dt().Ta())}va(e,r){if(!tr(e)||!tr(r)||this.zt.Ni())return null;let l="Line"===this.Hl||"Area"===this.Hl||"Baseline"===this.Hl||"Histogram"===this.Hl?[3]:[2,1],a=this.zt.al(e,r,l),h=null!==a?new eO(a.pl,a.ml):null;if("Histogram"===this.Jh()){let e=this.cn.base,r=new eO(e,e);h=null!==h?h.ts(r):r}let o=this.dn._h();return this.jl.forEach(l=>{var a,c,u,d;let f=l.Al(e,r);if(null==f?void 0:f.priceRange){let e=new eO(f.priceRange.minValue,f.priceRange.maxValue);h=null!==h?h.ts(e):e}(null==f?void 0:f.margins)&&(a=o,c=f.margins,o={above:Math.max(null!==(u=null==a?void 0:a.above)&&void 0!==u?u:0,c.above),below:Math.max(null!==(d=null==a?void 0:a.below)&&void 0!==d?d:0,c.below)})}),new eD(h,o)}wa(){switch(this.Hl){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}ga(){switch(this.Hl){case"Line":case"Area":case"Baseline":{let e=this.cn.crosshairMarkerBorderColor;if(0!==e.length)return e}}return null}Ma(){switch(this.Hl){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}xa(e){switch(this.Hl){case"Line":case"Area":case"Baseline":{let e=this.cn.crosshairMarkerBackgroundColor;if(0!==e.length)return e}}return this.$s().Hs(e).ue}$l(){switch(this.cn.priceFormat.type){case"custom":this.ba={format:this.cn.priceFormat.formatter};break;case"volume":this.ba=new tI(this.cn.priceFormat.precision);break;case"percent":this.ba=new tA(this.cn.priceFormat.precision);break;default:{let e=Math.pow(10,this.cn.priceFormat.precision);this.ba=new t$(e,this.cn.priceFormat.minMove*e)}}null!==this.Yi&&this.Yi.Pa()}Jl(){let e=this.$t().St();if(!e.Ra()||this.zt.Ni())return void(this.Fl=[]);let r=K(this.zt.sl());this.Fl=this.Nl.map((l,a)=>{let h=K(e.Da(l.time,!0));return{time:K(this.zt.hl(h,h<r?1:-1)).se,position:l.position,shape:l.shape,color:l.color,id:l.id,Qr:a,text:l.text,size:l.size,originalTime:l.originalTime}})}Ul(e){switch(this.dn=new ez(this,this.$t()),this.Hl){case"Bar":this.wn=new t7(this,this.$t());break;case"Candlestick":this.wn=new en(this,this.$t());break;case"Line":this.wn=new ec(this,this.$t());break;case"Custom":this.wn=new el(this,this.$t(),F(e));break;case"Area":this.wn=new t6(this,this.$t());break;case"Baseline":this.wn=new ei(this,this.$t());break;case"Histogram":this.wn=new eo(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.Hl)}}ua(e,r){let l=[];return eq(this.jl,e,r,l),l}}class e2{constructor(e){this.cn=e}Va(e,r,l){if(0===this.cn.mode)return e;let a=l.vn(),h=a.Ct();if(null===h)return e;let o=a.Rt(e,h),c=l.Oa().filter(e=>e instanceof e1).reduce((e,a)=>{if(l.dr(a)||!a.yt())return e;let h=a.Dt(),o=a.In();if(h.Ni()||!o.Xr(r))return e;let c=o.Kh(r);if(null===c)return e;let u=H(a.Ct());return e.concat([h.Rt(c.Vt[3],u.Vt)])},[]);if(0===c.length)return e;c.sort((e,r)=>Math.abs(e-o)-Math.abs(r-o));let u=c[0];return a.pn(u,h)}}class e4 extends tg{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:r,horizontalPixelRatio:l,verticalPixelRatio:a}){var h;if(null===this.zt)return;let o=Math.max(1,Math.floor(l));e.lineWidth=o,h=()=>{let h=K(this.zt);if(h.Ba){for(let a of(e.strokeStyle=h.Aa,W(e,h.Ia),e.beginPath(),h.za)){let h=Math.round(a.La*l);e.moveTo(h,-o),e.lineTo(h,r.height+o)}e.stroke()}if(h.Ea){for(let l of(e.strokeStyle=h.Na,W(e,h.Fa),e.beginPath(),h.Wa)){let h=Math.round(l.La*a);e.moveTo(-o,h),e.lineTo(r.width+o,h)}e.stroke()}},e.save(),e.lineWidth%2&&e.translate(.5,.5),h(),e.restore()}}class e3{constructor(e){this.Wt=new e4,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){let e=this.tn.$t().W().grid,r={Ea:e.horzLines.visible,Ba:e.vertLines.visible,Na:e.horzLines.color,Aa:e.vertLines.color,Fa:e.horzLines.style,Ia:e.vertLines.style,Wa:this.tn.vn().ja(),za:(this.tn.$t().St().ja()||[]).map(e=>({La:e.coord}))};this.Wt.J(r),this.ft=!1}return this.Wt}}class e5{constructor(e){this.wn=new e3(e)}Uh(){return this.wn}}let e6={Ha:4,$a:1e-4};function e8(e,r){let l=100*(e-r)/r;return r<0?-l:l}function e9(e,r){let l=100*(e-r)/r+100;return r<0?-l:l}function e7(e,r){let l=Math.abs(e);if(l<1e-15)return 0;let a=Math.log10(l+r.$a)+r.Ha;return e<0?-a:a}function it(e,r){let l=Math.abs(e);if(l<1e-15)return 0;let a=Math.pow(10,l-r.Ha)-r.$a;return e<0?-a:a}function ie(e,r){return null===e?null:new eO(e7(e.Th(),r),e7(e.Ph(),r))}function ii(e,r){return null===e?null:new eO(it(e.Th(),r),it(e.Ph(),r))}function is(e){if(null===e)return e6;let r=Math.abs(e.Ph()-e.Th());if(r>=1||r<1e-15)return e6;let l=e6.Ha+Math.ceil(Math.abs(Math.log10(r)));return{Ha:l,$a:1/Math.pow(10,l)}}class ir{constructor(e,r){if(this.Ua=e,this.qa=r,function(e){if(e<0)return!1;for(let r=e;r>1;r/=10)if(r%10!=0)return!1;return!0}(this.Ua))this.Ya=[2,2.5,2];else{this.Ya=[];for(let e=this.Ua;1!==e;){if(e%2==0)this.Ya.push(2),e/=2;else{if(e%5!=0)throw Error("unexpected base");this.Ya.push(2,2.5),e/=5}if(this.Ya.length>100)throw Error("something wrong with base")}}}Za(e,r,l){let a=0===this.Ua?0:1/this.Ua,h=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-r)))),o=0,c=this.qa[0];for(;;){let e=a-h<=1e-14&&h>a+1e-14,r=l*c-h<=1e-14,u=1-h<=1e-14;if(!(e&&r&&u))break;h/=c,c=this.qa[++o%this.qa.length]}if(h<=a+1e-14&&(h=a),h=Math.max(1,h),this.Ya.length>0&&1e-14>Math.abs(h-1))for(o=0,c=this.Ya[0];l*c-h<=1e-14&&h>a+1e-14;)h/=c,c=this.Ya[++o%this.Ya.length];return h}}class il{constructor(e,r,l,a){this.Xa=[],this.Li=e,this.Ua=r,this.Ka=l,this.Ga=a}Za(e,r){if(e<r)throw Error("high < low");let l=this.Li.At(),a=(e-r)*this.Ja()/l,h=new ir(this.Ua,[2,2.5,2]),o=new ir(this.Ua,[2,2,2.5]),c=new ir(this.Ua,[2.5,2,2]),u=[];return u.push(h.Za(e,r,a),o.Za(e,r,a),c.Za(e,r,a)),function(e){if(e.length<1)throw Error("array is empty");let r=e[0];for(let l=1;l<e.length;++l)e[l]<r&&(r=e[l]);return r}(u)}Qa(){let e=this.Li,r=e.Ct();if(null===r)return void(this.Xa=[]);let l=e.At(),a=this.Ka(l-1,r),h=this.Ka(0,r),o=this.Li.W().entireTextOnly?this.io()/2:0,c=l-1-o,u=Math.max(a,h),d=Math.min(a,h);if(u===d)return void(this.Xa=[]);let f=this.Za(u,d),m=u%f;m+=m<0?f:0;let g=u>=d?1:-1,p=null,x=0;for(let l=u-m;l>d;l-=f){let a=this.Ga(l,r,!0);null!==p&&Math.abs(a-p)<this.Ja()||a<o||a>c||(x<this.Xa.length?(this.Xa[x].La=a,this.Xa[x].no=e.so(l)):this.Xa.push({La:a,no:e.so(l)}),x++,p=a,e.eo()&&(f=this.Za(l*g,d)))}this.Xa.length=x}ja(){return this.Xa}io(){return this.Li.P()}Ja(){return Math.ceil(2.5*this.io())}}function ia(e){return e.slice().sort((e,r)=>K(e.Xi())-K(r.Xi()))}!function(e){e[e.Normal=0]="Normal",e[e.Logarithmic=1]="Logarithmic",e[e.Percentage=2]="Percentage",e[e.IndexedTo100=3]="IndexedTo100"}(d||(d={}));let ih=new tA,io=new t$(100,1);class ic{constructor(e,r,l,a){this.ro=0,this.ho=null,this.Ah=null,this.lo=null,this.ao={oo:!1,_o:null},this.uo=0,this.co=0,this.do=new ti,this.fo=new ti,this.vo=[],this.po=null,this.mo=null,this.bo=null,this.wo=null,this.ba=io,this.Mo=is(null),this.xo=e,this.cn=r,this.So=l,this.ko=a,this.yo=new il(this,100,this.Co.bind(this),this.To.bind(this))}Ta(){return this.xo}W(){return this.cn}Hh(e){if(ts(this.cn,e),this.Pa(),void 0!==e.mode&&this.Po({yr:e.mode}),void 0!==e.scaleMargins){let r=F(e.scaleMargins.top),l=F(e.scaleMargins.bottom);if(r<0||r>1)throw Error(`Invalid top margin - expect value between 0 and 1, given=${r}`);if(l<0||l>1)throw Error(`Invalid bottom margin - expect value between 0 and 1, given=${l}`);if(r+l>1)throw Error(`Invalid margins - sum of margins must be less than 1, given=${r+l}`);this.Ro(),this.mo=null}}Do(){return this.cn.autoScale}eo(){return 1===this.cn.mode}gh(){return 2===this.cn.mode}Vo(){return 3===this.cn.mode}yr(){return{Wn:this.cn.autoScale,Oo:this.cn.invertScale,yr:this.cn.mode}}Po(e){let r=this.yr(),l=null;void 0!==e.Wn&&(this.cn.autoScale=e.Wn),void 0!==e.yr&&(this.cn.mode=e.yr,2!==e.yr&&3!==e.yr||(this.cn.autoScale=!0),this.ao.oo=!1),1===r.yr&&e.yr!==r.yr&&(function(e,r){if(null===e)return!1;let l=it(e.Th(),r),a=it(e.Ph(),r);return isFinite(l)&&isFinite(a)}(this.Ah,this.Mo)?null!==(l=ii(this.Ah,this.Mo))&&this.Bo(l):this.cn.autoScale=!0),1===e.yr&&e.yr!==r.yr&&null!==(l=ie(this.Ah,this.Mo))&&this.Bo(l);let a=r.yr!==this.cn.mode;a&&(2===r.yr||this.gh())&&this.Pa(),a&&(3===r.yr||this.Vo())&&this.Pa(),void 0!==e.Oo&&r.Oo!==e.Oo&&(this.cn.invertScale=e.Oo,this.Ao()),this.fo.m(r,this.yr())}Io(){return this.fo}P(){return this.So.fontSize}At(){return this.ro}zo(e){this.ro!==e&&(this.ro=e,this.Ro(),this.mo=null)}Lo(){if(this.ho)return this.ho;let e=this.At()-this.Eo()-this.No();return this.ho=e,e}zh(){return this.Fo(),this.Ah}Bo(e,r){let l=this.Ah;(r||null===l&&null!==e||null!==l&&!l.yh(e))&&(this.mo=null,this.Ah=e)}Ni(){return this.Fo(),0===this.ro||!this.Ah||this.Ah.Ni()}Wo(e){return this.Oo()?e:this.At()-1-e}Rt(e,r){return this.gh()?e=e8(e,r):this.Vo()&&(e=e9(e,r)),this.To(e,r)}Qs(e,r,l){this.Fo();let a=this.No(),h=K(this.zh()),o=h.Th(),c=h.Ph(),u=this.Lo()-1,d=this.Oo(),f=u/(c-o),m=void 0===l?0:l.from,g=void 0===l?e.length:l.to,p=this.jo();for(let l=m;l<g;l++){let h=e[l],c=h._t;if(isNaN(c))continue;let u=c;null!==p&&(u=p(h._t,r));let m=a+f*(u-o),g=d?m:this.ro-1-m;h.st=g}}me(e,r,l){this.Fo();let a=this.No(),h=K(this.zh()),o=h.Th(),c=h.Ph(),u=this.Lo()-1,d=this.Oo(),f=u/(c-o),m=void 0===l?0:l.from,g=void 0===l?e.length:l.to,p=this.jo();for(let l=m;l<g;l++){let h=e[l],c=h.we,u=h.ge,m=h.Me,g=h.xe;null!==p&&(c=p(h.we,r),u=p(h.ge,r),m=p(h.Me,r),g=p(h.xe,r));let x=a+f*(c-o),v=d?x:this.ro-1-x;h.ve=v,x=a+f*(u-o),v=d?x:this.ro-1-x,h.ce=v,x=a+f*(m-o),v=d?x:this.ro-1-x,h.de=v,x=a+f*(g-o),v=d?x:this.ro-1-x,h.pe=v}}pn(e,r){let l=this.Co(e,r);return this.Ho(l,r)}Ho(e,r){var l,a;let h=e;return this.gh()?(l=h,r<0&&(l=-l),h=l/100*r+r):this.Vo()&&(a=h-100,r<0&&(a=-a),h=a/100*r+r),h}Oa(){return this.vo}$o(){if(this.po)return this.po;let e=[];for(let r=0;r<this.vo.length;r++){let l=this.vo[r];null===l.Xi()&&l.Ki(r+1),e.push(l)}return e=ia(e),this.po=e,this.po}Uo(e){-1===this.vo.indexOf(e)&&(this.vo.push(e),this.Pa(),this.qo())}Yo(e){let r=this.vo.indexOf(e);if(-1===r)throw Error("source is not attached to scale");this.vo.splice(r,1),0===this.vo.length&&(this.Po({Wn:!0}),this.Bo(null)),this.Pa(),this.qo()}Ct(){let e=null;for(let r of this.vo){let l=r.Ct();null!==l&&(null===e||l.ha<e.ha)&&(e=l)}return null===e?null:e.Vt}Oo(){return this.cn.invertScale}ja(){let e=null===this.Ct();if(null!==this.mo&&(e||this.mo.Zo===e))return this.mo.ja;this.yo.Qa();let r=this.yo.ja();return this.mo={ja:r,Zo:e},this.do.m(),r}Xo(){return this.do}Ko(e){this.gh()||this.Vo()||null===this.bo&&null===this.lo&&(this.Ni()||(this.bo=this.ro-e,this.lo=K(this.zh()).Ch()))}Go(e){if(this.gh()||this.Vo()||null===this.bo)return;this.Po({Wn:!1}),(e=this.ro-e)<0&&(e=0);let r=(this.bo+.2*(this.ro-1))/(e+.2*(this.ro-1)),l=K(this.lo).Ch();r=Math.max(r,.1),l.Dh(r),this.Bo(l)}Jo(){this.gh()||this.Vo()||(this.bo=null,this.lo=null)}Qo(e){this.Do()||null===this.wo&&null===this.lo&&(this.Ni()||(this.wo=e,this.lo=K(this.zh()).Ch()))}t_(e){if(this.Do()||null===this.wo)return;let r=K(this.zh()).Rh()/(this.Lo()-1),l=e-this.wo;this.Oo()&&(l*=-1);let a=l*r,h=K(this.lo).Ch();h.Vh(a),this.Bo(h,!0),this.mo=null}i_(){this.Do()||null!==this.wo&&(this.wo=null,this.lo=null)}ma(){return this.ba||this.Pa(),this.ba}Fi(e,r){switch(this.cn.mode){case 2:return this.n_(e8(e,r));case 3:return this.ma().format(e9(e,r));default:return this.Fh(e)}}so(e){switch(this.cn.mode){case 2:return this.n_(e);case 3:return this.ma().format(e);default:return this.Fh(e)}}ql(e){return this.Fh(e,K(this.s_()).ma())}Yl(e,r){return e=e8(e,r),this.n_(e,ih)}e_(){return this.vo}r_(e){this.ao={_o:e,oo:!1}}Vn(){this.vo.forEach(e=>e.Vn())}Pa(){this.mo=null;let e=this.s_(),r=100;null!==e&&(r=Math.round(1/e.pa())),this.ba=io,this.gh()?(this.ba=ih,r=100):this.Vo()?(this.ba=new t$(100,1),r=100):null!==e&&(this.ba=e.ma()),this.yo=new il(this,r,this.Co.bind(this),this.To.bind(this)),this.yo.Qa()}qo(){this.po=null}s_(){return this.vo[0]||null}Eo(){return this.Oo()?this.cn.scaleMargins.bottom*this.At()+this.co:this.cn.scaleMargins.top*this.At()+this.uo}No(){return this.Oo()?this.cn.scaleMargins.top*this.At()+this.uo:this.cn.scaleMargins.bottom*this.At()+this.co}Fo(){this.ao.oo||(this.ao.oo=!0,this.h_())}Ro(){this.ho=null}To(e,r){if(this.Fo(),this.Ni())return 0;e=this.eo()&&e?e7(e,this.Mo):e;let l=K(this.zh()),a=this.No()+(this.Lo()-1)*(e-l.Th())/l.Rh();return this.Wo(a)}Co(e,r){if(this.Fo(),this.Ni())return 0;let l=this.Wo(e),a=K(this.zh()),h=a.Th()+a.Rh()*((l-this.No())/(this.Lo()-1));return this.eo()?it(h,this.Mo):h}Ao(){this.mo=null,this.yo.Qa()}h_(){var e,r,l,a,h;let o=this.ao._o;if(null===o)return;let c=null,u=this.e_(),d=0,f=0;for(let e of u){if(!e.yt())continue;let u=e.Ct();if(null===u)continue;let m=e.Al(o.Vs(),o.ui()),g=m&&m.zh();if(null!==g){switch(this.cn.mode){case 1:g=ie(g,this.Mo);break;case 2:r=g,l=u.Vt,g=new eO(e8(r.Th(),l),e8(r.Ph(),l));break;case 3:a=g,h=u.Vt,g=new eO(e9(a.Th(),h),e9(a.Ph(),h))}if(c=null===c?g:c.ts(K(g)),null!==m){let e=m.Lh();null!==e&&(d=Math.max(d,e.above),f=Math.max(f,e.below))}}}if(d===this.uo&&f===this.co||(this.uo=d,this.co=f,this.mo=null,this.Ro()),null!==c){if(c.Th()===c.Ph()){let e=this.s_(),r=5*(null===e||this.gh()||this.Vo()?1:e.pa());this.eo()&&(c=ii(c,this.Mo)),c=new eO(c.Th()-r,c.Ph()+r),this.eo()&&(c=ie(c,this.Mo))}if(this.eo()){let r=ii(c,this.Mo),l=is(r);if(e=this.Mo,l.Ha!==e.Ha||l.$a!==e.$a){let e=null!==this.lo?ii(this.lo,this.Mo):null;this.Mo=l,c=ie(r,l),null!==e&&(this.lo=ie(e,l))}}this.Bo(c)}else null===this.Ah&&(this.Bo(new eO(-.5,.5)),this.Mo=is(null));this.ao.oo=!0}jo(){return this.gh()?e8:this.Vo()?e9:this.eo()?e=>e7(e,this.Mo):null}l_(e,r,l){return void 0===r?(void 0===l&&(l=this.ma()),l.format(e)):r(e)}Fh(e,r){return this.l_(e,this.ko.priceFormatter,r)}n_(e,r){return this.l_(e,this.ko.percentageFormatter,r)}}class iu{constructor(e,r){this.vo=[],this.a_=new Map,this.ro=0,this.o_=0,this.__=1e3,this.po=null,this.u_=new ti,this.kl=e,this.$i=r,this.c_=new e5(this);let l=r.W();this.d_=this.f_("left",l.leftPriceScale),this.v_=this.f_("right",l.rightPriceScale),this.d_.Io().l(this.p_.bind(this,this.d_),this),this.v_.Io().l(this.p_.bind(this,this.v_),this),this.m_(l)}m_(e){if(e.leftPriceScale&&this.d_.Hh(e.leftPriceScale),e.rightPriceScale&&this.v_.Hh(e.rightPriceScale),e.localization&&(this.d_.Pa(),this.v_.Pa()),e.overlayPriceScales)for(let r of Array.from(this.a_.values())){let l=K(r[0].Dt());l.Hh(e.overlayPriceScales),e.localization&&l.Pa()}}b_(e){switch(e){case"left":return this.d_;case"right":return this.v_}return this.a_.has(e)?F(this.a_.get(e))[0].Dt():null}S(){this.$t().w_().p(this),this.d_.Io().p(this),this.v_.Io().p(this),this.vo.forEach(e=>{e.S&&e.S()}),this.u_.m()}g_(){return this.__}M_(e){this.__=e}$t(){return this.$i}Hi(){return this.o_}At(){return this.ro}x_(e){this.o_=e,this.S_()}zo(e){this.ro=e,this.d_.zo(e),this.v_.zo(e),this.vo.forEach(r=>{if(this.dr(r)){let l=r.Dt();null!==l&&l.zo(e)}}),this.S_()}Oa(){return this.vo}dr(e){let r=e.Dt();return null===r||this.d_!==r&&this.v_!==r}Uo(e,r,l){let a=void 0!==l?l:this.y_().k_+1;this.C_(e,r,a)}Yo(e){let r=this.vo.indexOf(e);V(-1!==r,"removeDataSource: invalid data source"),this.vo.splice(r,1);let l=K(e.Dt()).Ta();if(this.a_.has(l)){let r=F(this.a_.get(l)),a=r.indexOf(e);-1!==a&&(r.splice(a,1),0===r.length&&this.a_.delete(l))}let a=e.Dt();a&&a.Oa().indexOf(e)>=0&&a.Yo(e),null!==a&&(a.qo(),this.T_(a)),this.po=null}pr(e){return e===this.d_?"left":e===this.v_?"right":"overlay"}P_(){return this.d_}R_(){return this.v_}D_(e,r){e.Ko(r)}V_(e,r){e.Go(r),this.S_()}O_(e){e.Jo()}B_(e,r){e.Qo(r)}A_(e,r){e.t_(r),this.S_()}I_(e){e.i_()}S_(){this.vo.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&0!==this.v_.Oa().length?e=this.v_:this.$i.W().leftPriceScale.visible&&0!==this.d_.Oa().length?e=this.d_:0!==this.vo.length&&(e=this.vo[0].Dt()),null===e&&(e=this.v_),e}vr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.v_:this.$i.W().leftPriceScale.visible&&(e=this.d_),e}T_(e){null!==e&&e.Do()&&this.z_(e)}L_(e){let r=this.kl.Zs();e.Po({Wn:!0}),null!==r&&e.r_(r),this.S_()}E_(){this.z_(this.d_),this.z_(this.v_)}N_(){this.T_(this.d_),this.T_(this.v_),this.vo.forEach(e=>{this.dr(e)&&this.T_(e.Dt())}),this.S_(),this.$i.$h()}$o(){return null===this.po&&(this.po=ia(this.vo)),this.po}F_(){return this.u_}W_(){return this.c_}z_(e){let r=e.e_();if(r&&r.length>0&&!this.kl.Ni()){let r=this.kl.Zs();null!==r&&e.r_(r)}e.Vn()}y_(){let e=this.$o();if(0===e.length)return{j_:0,k_:0};let r=0,l=0;for(let a=0;a<e.length;a++){let h=e[a].Xi();null!==h&&(h<r&&(r=h),h>l&&(l=h))}return{j_:r,k_:l}}C_(e,r,l){let a=this.b_(r);if(null===a&&(a=this.f_(r,this.$i.W().overlayPriceScales)),this.vo.push(e),!tT(r)){let l=this.a_.get(r)||[];l.push(e),this.a_.set(r,l)}a.Uo(e),e.Gi(a),e.Ki(l),this.T_(a),this.po=null}p_(e,r,l){r.yr!==l.yr&&this.z_(e)}f_(e,r){let l=new ic(e,Object.assign({visible:!0,autoScale:!0},th(r)),this.$i.W().layout,this.$i.W().localization);return l.zo(this.At()),l}}class id{constructor(e,r,l=50){this.Xe=0,this.Ke=1,this.Ge=1,this.Qe=new Map,this.Je=new Map,this.H_=e,this.U_=r,this.tr=l}q_(e){let r=e.time,l=this.U_.cacheKey(r),a=this.Qe.get(l);if(void 0!==a)return a.Y_;if(this.Xe===this.tr){let e=this.Je.get(this.Ge);this.Je.delete(this.Ge),this.Qe.delete(F(e)),this.Ge++,this.Xe--}let h=this.H_(e);return this.Qe.set(l,{Y_:h,er:this.Ke}),this.Je.set(this.Ke,l),this.Xe++,this.Ke++,h}}class im{constructor(e,r){V(e<=r,"right should be >= left"),this.Z_=e,this.X_=r}Vs(){return this.Z_}ui(){return this.X_}K_(){return this.X_-this.Z_+1}Xr(e){return this.Z_<=e&&e<=this.X_}yh(e){return this.Z_===e.Vs()&&this.X_===e.ui()}}function ig(e,r){return null===e||null===r?e===r:e.yh(r)}class ip{constructor(){this.G_=new Map,this.Qe=null,this.J_=!1}Q_(e){this.J_=e,this.Qe=null}tu(e,r){this.iu(r),this.Qe=null;for(let l=r;l<e.length;++l){let r=e[l],a=this.G_.get(r.timeWeight);void 0===a&&(a=[],this.G_.set(r.timeWeight,a)),a.push({index:l,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}nu(e,r){let l=Math.ceil(r/e);return null!==this.Qe&&this.Qe.su===l||(this.Qe={ja:this.eu(l),su:l}),this.Qe.ja}iu(e){if(0===e)return void this.G_.clear();let r=[];for(let l of(this.G_.forEach((l,a)=>{e<=l[0].index?r.push(a):l.splice(tQ(l,e,r=>r.index<e),1/0)}),r))this.G_.delete(l)}eu(e){let r=[];for(let l of Array.from(this.G_.keys()).sort((e,r)=>r-e)){if(!this.G_.get(l))continue;let a=r;r=[];let h=a.length,o=0,c=F(this.G_.get(l)),u=c.length,d=1/0,f=-1/0;for(let l=0;l<u;l++){let u=c[l],m=u.index;for(;o<h;){let e=a[o],l=e.index;if(!(l<m)){d=l;break}o++,r.push(e),f=l,d=1/0}if(d-m>=e&&m-f>=e)r.push(u),f=m;else if(this.J_)return a}for(;o<h;o++)r.push(a[o])}return r}}class ix{constructor(e){this.ru=e}hu(){return null===this.ru?null:new im(Math.floor(this.ru.Vs()),Math.ceil(this.ru.ui()))}lu(){return this.ru}static au(){return new ix(null)}}class iv{constructor(e,r,l,a){this.o_=0,this.ou=null,this._u=[],this.wo=null,this.bo=null,this.uu=new ip,this.cu=new Map,this.du=ix.au(),this.fu=!0,this.vu=new ti,this.pu=new ti,this.mu=new ti,this.bu=null,this.wu=null,this.gu=[],this.cn=r,this.ko=l,this.Mu=r.rightOffset,this.xu=r.barSpacing,this.$i=e,this.U_=a,this.Su(),this.uu.Q_(r.uniformDistribution)}W(){return this.cn}ku(e){ts(this.ko,e),this.yu(),this.Su()}Hh(e,r){var l;ts(this.cn,e),this.cn.fixLeftEdge&&this.Cu(),this.cn.fixRightEdge&&this.Tu(),void 0!==e.barSpacing&&this.$i.Gn(e.barSpacing),void 0!==e.rightOffset&&this.$i.Jn(e.rightOffset),void 0!==e.minBarSpacing&&this.$i.Gn(null!==(l=e.barSpacing)&&void 0!==l?l:this.xu),this.yu(),this.Su(),this.mu.m()}mn(e){var r,l;return null!==(l=null===(r=this._u[e])||void 0===r?void 0:r.time)&&void 0!==l?l:null}Ui(e){var r;return null!==(r=this._u[e])&&void 0!==r?r:null}Da(e,r){if(this._u.length<1)return null;if(this.U_.key(e)>this.U_.key(this._u[this._u.length-1].time))return r?this._u.length-1:null;let l=tQ(this._u,this.U_.key(e),(e,r)=>this.U_.key(e.time)<r);return this.U_.key(e)<this.U_.key(this._u[l].time)?r?l:null:l}Ni(){return 0===this.o_||0===this._u.length||null===this.ou}Ra(){return this._u.length>0}Zs(){return this.Pu(),this.du.hu()}Ru(){return this.Pu(),this.du.lu()}Du(){let e=this.Zs();if(null===e)return null;let r={from:e.Vs(),to:e.ui()};return this.Vu(r)}Vu(e){let r=Math.round(e.from),l=Math.round(e.to),a=K(this.Ou()),h=K(this.Bu());return{from:K(this.Ui(Math.max(a,r))),to:K(this.Ui(Math.min(h,l)))}}Au(e){return{from:K(this.Da(e.from,!0)),to:K(this.Da(e.to,!0))}}Hi(){return this.o_}x_(e){if(!isFinite(e)||e<=0||this.o_===e)return;let r=this.Ru(),l=this.o_;if(this.o_=e,this.fu=!0,this.cn.lockVisibleTimeRangeOnResize&&0!==l){let r=this.xu*e/l;this.xu=r}this.cn.fixLeftEdge&&null!==r&&0>=r.Vs()&&(this.Mu-=Math.round((l-e)/this.xu)+1,this.fu=!0),this.Iu(),this.zu()}It(e){if(this.Ni()||!tr(e))return 0;let r=this.Lu()+this.Mu-e;return this.o_-(r+.5)*this.xu-1}Js(e,r){let l=this.Lu(),a=void 0===r?0:r.from,h=void 0===r?e.length:r.to;for(let r=a;r<h;r++){let a=e[r].ot,h=l+this.Mu-a,o=this.o_-(h+.5)*this.xu-1;e[r].nt=o}}Eu(e){return Math.ceil(this.Nu(e))}Jn(e){this.fu=!0,this.Mu=e,this.zu(),this.$i.Fu(),this.$i.$h()}he(){return this.xu}Gn(e){this.Wu(e),this.zu(),this.$i.Fu(),this.$i.$h()}ju(){return this.Mu}ja(){if(this.Ni())return null;if(null!==this.wu)return this.wu;let e=this.xu,r=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),l=Math.round(r/e),a=K(this.Zs()),h=Math.max(a.Vs(),a.Vs()-l),o=Math.max(a.ui(),a.ui()-l),c=this.uu.nu(e,r),u=this.Ou()+l,d=this.Bu()-l,f=this.Hu(),m=this.cn.fixLeftEdge||f,g=this.cn.fixRightEdge||f,p=0;for(let e of c){let l;h<=e.index&&e.index<=o&&(p<this.gu.length?((l=this.gu[p]).coord=this.It(e.index),l.label=this.$u(e),l.weight=e.weight):(l={needAlignCoordinate:!1,coord:this.It(e.index),label:this.$u(e),weight:e.weight},this.gu.push(l)),this.xu>r/2&&!f?l.needAlignCoordinate=!1:l.needAlignCoordinate=m&&e.index<=u||g&&e.index>=d,p++)}return this.gu.length=p,this.wu=this.gu,this.gu}Uu(){this.fu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}qu(e){this.fu=!0,this.ou=e,this.zu(),this.Cu()}Yu(e,r){let l=this.Nu(e),a=this.he();this.Gn(a+a/10*r),this.cn.rightBarStaysOnScroll||this.Jn(this.ju()+(l-this.Nu(e)))}Ko(e){this.wo&&this.i_(),null===this.bo&&null===this.bu&&(this.Ni()||(this.bo=e,this.Zu()))}Go(e){if(null===this.bu)return;let r=tH(this.o_-e,0,this.o_),l=tH(this.o_-K(this.bo),0,this.o_);0!==r&&0!==l&&this.Gn(this.bu.he*r/l)}Jo(){null!==this.bo&&(this.bo=null,this.Xu())}Qo(e){null===this.wo&&null===this.bu&&(this.Ni()||(this.wo=e,this.Zu()))}t_(e){if(null===this.wo)return;let r=(this.wo-e)/this.he();this.Mu=K(this.bu).ju+r,this.fu=!0,this.zu()}i_(){null!==this.wo&&(this.wo=null,this.Xu())}Ku(){this.Gu(this.cn.rightOffset)}Gu(e,r=400){if(!isFinite(e))throw RangeError("offset is required and must be finite number");if(!isFinite(r)||r<=0)throw RangeError("animationDuration (optional) must be finite positive number");let l=this.Mu,a=performance.now();this.$i.Zn({Ju:e=>(e-a)/r>=1,Qu:h=>{let o=(h-a)/r;return o>=1?e:l+(e-l)*o}})}bt(e,r){this.fu=!0,this._u=e,this.uu.tu(e,r),this.zu()}tc(){return this.vu}nc(){return this.pu}sc(){return this.mu}Lu(){return this.ou||0}ec(e){let r=e.K_();this.Wu(this.o_/r),this.Mu=e.ui()-this.Lu(),this.zu(),this.fu=!0,this.$i.Fu(),this.$i.$h()}rc(){let e=this.Ou(),r=this.Bu();null!==e&&null!==r&&this.ec(new im(e,r+this.cn.rightOffset))}hc(e){let r=new im(e.from,e.to);this.ec(r)}qi(e){return void 0!==this.ko.timeFormatter?this.ko.timeFormatter(e.originalTime):this.U_.formatHorzItem(e.time)}Hu(){let{handleScroll:e,handleScale:r}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||r.axisDoubleClickReset.time||r.axisPressedMouseMove.time||r.mouseWheel||r.pinch)}Ou(){return 0===this._u.length?null:0}Bu(){return 0===this._u.length?null:this._u.length-1}lc(e){return(this.o_-1-e)/this.xu}Nu(e){let r=this.lc(e);return Math.round(1e6*(this.Lu()+this.Mu-r))/1e6}Wu(e){let r=this.xu;this.xu=e,this.Iu(),r!==this.xu&&(this.fu=!0,this.ac())}Pu(){if(!this.fu)return;if(this.fu=!1,this.Ni())return void this.oc(ix.au());let e=this.Lu(),r=this.o_/this.xu,l=this.Mu+e,a=new im(l-r+1,l);this.oc(new ix(a))}Iu(){let e=this._c();if(this.xu<e&&(this.xu=e,this.fu=!0),0!==this.o_){let e=.5*this.o_;this.xu>e&&(this.xu=e,this.fu=!0)}}_c(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&0!==this._u.length?this.o_/this._u.length:this.cn.minBarSpacing}zu(){let e=this.uc();this.Mu>e&&(this.Mu=e,this.fu=!0);let r=this.cc();null!==r&&this.Mu<r&&(this.Mu=r,this.fu=!0)}cc(){let e=this.Ou(),r=this.ou;return null===e||null===r?null:e-r-1+(this.cn.fixLeftEdge?this.o_/this.xu:Math.min(2,this._u.length))}uc(){return this.cn.fixRightEdge?0:this.o_/this.xu-Math.min(2,this._u.length)}Zu(){this.bu={he:this.he(),ju:this.ju()}}Xu(){this.bu=null}$u(e){let r=this.cu.get(e.weight);return void 0===r&&(r=new id(e=>this.dc(e),this.U_),this.cu.set(e.weight,r)),r.q_(e)}dc(e){return this.U_.formatTickmark(e,this.ko)}oc(e){let r=this.du;this.du=e,ig(r.hu(),this.du.hu())||this.vu.m(),ig(r.lu(),this.du.lu())||this.pu.m(),this.ac()}ac(){this.wu=null}yu(){this.ac(),this.cu.clear()}Su(){this.U_.updateFormatter(this.ko)}Cu(){if(!this.cn.fixLeftEdge)return;let e=this.Ou();if(null===e)return;let r=this.Zs();if(null===r)return;let l=r.Vs()-e;if(l<0){let e=this.Mu-l-1;this.Jn(e)}this.Iu()}Tu(){this.zu(),this.Iu()}}class ib{X(e,r,l){e.useMediaCoordinateSpace(e=>this.K(e,r,l))}wl(e,r,l){e.useMediaCoordinateSpace(e=>this.fc(e,r,l))}fc(e,r,l){}}class iy extends ib{constructor(e){super(),this.vc=new Map,this.zt=e}K(e){}fc(e){if(!this.zt.yt)return;let{context:r,mediaSize:l}=e,a=0;for(let e of this.zt.mc){if(0===e.Kt.length)continue;r.font=e.R;let h=this.bc(r,e.Kt);h>l.width?e.Yu=l.width/h:e.Yu=1,a+=e.wc*e.Yu}let h=0;switch(this.zt.gc){case"top":h=0;break;case"center":h=Math.max((l.height-a)/2,0);break;case"bottom":h=Math.max(l.height-a,0)}for(let e of(r.fillStyle=this.zt.V,this.zt.mc)){r.save();let a=0;switch(this.zt.Mc){case"left":r.textAlign="left",a=e.wc/2;break;case"center":r.textAlign="center",a=l.width/2;break;case"right":r.textAlign="right",a=l.width-1-e.wc/2}r.translate(a,h),r.textBaseline="top",r.font=e.R,r.scale(e.Yu,e.Yu),r.fillText(e.Kt,0,e.xc),r.restore(),h+=e.wc*e.Yu}}bc(e,r){let l=this.Sc(e.font),a=l.get(r);return void 0===a&&(a=e.measureText(r).width,l.set(r,a)),a}Sc(e){let r=this.vc.get(e);return void 0===r&&(r=new Map,this.vc.set(e,r)),r}}class iw{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",mc:[],gc:"center",Mc:"center"},this.Wt=new iy(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){let e=this.jt.W(),r=this.Ft;r.yt=e.visible,r.yt&&(r.V=e.color,r.Mc=e.horzAlign,r.gc=e.vertAlign,r.mc=[{Kt:e.text,R:td(e.fontSize,e.fontFamily,e.fontStyle),wc:1.2*e.fontSize,xc:0,Yu:0}])}}class iN extends tR{constructor(e,r){super(),this.cn=r,this.wn=new iw(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}!function(e){e[e.OnTouchEnd=0]="OnTouchEnd",e[e.OnNextTap=1]="OnNextTap"}(f||(f={}));class ij{constructor(e,r,l){this.kc=[],this.yc=[],this.o_=0,this.Cc=null,this.Tc=new ti,this.Pc=new ti,this.Rc=null,this.Dc=e,this.cn=r,this.U_=l,this.Vc=new tf(this),this.kl=new iv(this,r.timeScale,this.cn.localization,l),this.vt=new tP(this,r.crosshair),this.Oc=new e2(r.crosshair),this.Bc=new iN(this,r.watermark),this.Ac(),this.kc[0].M_(2e3),this.Ic=this.zc(0),this.Lc=this.zc(1)}Xl(){this.Ec(tO.es())}$h(){this.Ec(tO.ss())}aa(){this.Ec(new tO(1))}Kl(e){let r=this.Nc(e);this.Ec(r)}Fc(){return this.Cc}Wc(e){let r=this.Cc;this.Cc=e,null!==r&&this.Kl(r.jc),null!==e&&this.Kl(e.jc)}W(){return this.cn}Hh(e){ts(this.cn,e),this.kc.forEach(r=>r.m_(e)),void 0!==e.timeScale&&this.kl.Hh(e.timeScale),void 0!==e.localization&&this.kl.ku(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Tc.m(),this.Ic=this.zc(0),this.Lc=this.zc(1),this.Xl()}Hc(e,r){if("left"===e)return void this.Hh({leftPriceScale:r});if("right"===e)return void this.Hh({rightPriceScale:r});let l=this.$c(e);null!==l&&(l.Dt.Hh(r),this.Tc.m())}$c(e){for(let r of this.kc){let l=r.b_(e);if(null!==l)return{Ht:r,Dt:l}}return null}St(){return this.kl}Uc(){return this.kc}qc(){return this.Bc}Yc(){return this.vt}Zc(){return this.Pc}Xc(e,r){e.zo(r),this.Fu()}x_(e){this.o_=e,this.kl.x_(this.o_),this.kc.forEach(r=>r.x_(e)),this.Fu()}Ac(e){let r=new iu(this.kl,this);void 0!==e?this.kc.splice(e,0,r):this.kc.push(r);let l=void 0===e?this.kc.length-1:e,a=tO.es();return a.Nn(l,{Fn:0,Wn:!0}),this.Ec(a),r}D_(e,r,l){e.D_(r,l)}V_(e,r,l){e.V_(r,l),this.Gl(),this.Ec(this.Kc(e,2))}O_(e,r){e.O_(r),this.Ec(this.Kc(e,2))}B_(e,r,l){r.Do()||e.B_(r,l)}A_(e,r,l){r.Do()||(e.A_(r,l),this.Gl(),this.Ec(this.Kc(e,2)))}I_(e,r){r.Do()||(e.I_(r),this.Ec(this.Kc(e,2)))}L_(e,r){e.L_(r),this.Ec(this.Kc(e,2))}Gc(e){this.kl.Ko(e)}Jc(e,r){let l=this.St();if(l.Ni()||0===r)return;let a=l.Hi();e=Math.max(1,Math.min(e,a)),l.Yu(e,r),this.Fu()}Qc(e){this.td(0),this.nd(e),this.sd()}ed(e){this.kl.Go(e),this.Fu()}rd(){this.kl.Jo(),this.$h()}td(e){this.kl.Qo(e)}nd(e){this.kl.t_(e),this.Fu()}sd(){this.kl.i_(),this.$h()}wt(){return this.yc}hd(e,r,l,a,h){this.vt.gn(e,r);let o=NaN,c=this.kl.Eu(e),u=this.kl.Zs();null!==u&&(c=Math.min(Math.max(u.Vs(),c),u.ui()));let d=a.vn(),f=d.Ct();null!==f&&(o=d.pn(r,f)),o=this.Oc.Va(o,c,a),this.vt.kn(c,o,a),this.aa(),h||this.Pc.m(this.vt.xt(),{x:e,y:r},l)}ld(e,r,l){let a=l.vn(),h=a.Ct(),o=a.Rt(e,K(h)),c=this.kl.Da(r,!0),u=this.kl.It(K(c));this.hd(u,o,null,l,!0)}ad(e){this.Yc().Cn(),this.aa(),e||this.Pc.m(null,null,null)}Gl(){let e=this.vt.Ht();if(null!==e){let r=this.vt.xn(),l=this.vt.Sn();this.hd(r,l,null,e)}this.vt.Vn()}od(e,r,l){let a=this.kl.mn(0);void 0!==r&&void 0!==l&&this.kl.bt(r,l);let h=this.kl.mn(0),o=this.kl.Lu(),c=this.kl.Zs();if(null!==c&&null!==a&&null!==h){let r=c.Xr(o),u=this.U_.key(a)>this.U_.key(h),d=null!==e&&e>o&&!u,f=this.kl.W().allowShiftVisibleRangeOnWhitespaceReplacement,m=r&&(void 0!==l||f)&&this.kl.W().shiftVisibleRangeOnNewBar;if(d&&!m){let r=e-o;this.kl.Jn(this.kl.ju()-r)}}this.kl.qu(e)}ta(e){null!==e&&e.N_()}cr(e){let r=this.kc.find(r=>r.$o().includes(e));return void 0===r?null:r}Fu(){this.Bc.Vn(),this.kc.forEach(e=>e.N_()),this.Gl()}S(){this.kc.forEach(e=>e.S()),this.kc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}_d(){return this.Vc}mr(){return this.Vc.W()}w_(){return this.Tc}ud(e,r,l){let a=this.kc[0],h=this.dd(r,e,a,l);return this.yc.push(h),1===this.yc.length?this.Xl():this.$h(),h}fd(e){let r=this.cr(e),l=this.yc.indexOf(e);V(-1!==l,"Series not found"),this.yc.splice(l,1),K(r).Yo(e),e.S&&e.S()}Zl(e,r){let l=K(this.cr(e));l.Yo(e);let a=this.$c(r);if(null===a){let a=e.Xi();l.Uo(e,r,a)}else{let h=a.Ht===l?e.Xi():void 0;a.Ht.Uo(e,r,h)}}rc(){let e=tO.ss();e.$n(),this.Ec(e)}vd(e){let r=tO.ss();r.Yn(e),this.Ec(r)}Kn(){let e=tO.ss();e.Kn(),this.Ec(e)}Gn(e){let r=tO.ss();r.Gn(e),this.Ec(r)}Jn(e){let r=tO.ss();r.Jn(e),this.Ec(r)}Zn(e){let r=tO.ss();r.Zn(e),this.Ec(r)}Un(){let e=tO.ss();e.Un(),this.Ec(e)}pd(){return this.cn.rightPriceScale.visible?"right":"left"}md(){return this.Lc}q(){return this.Ic}Bt(e){let r=this.Lc,l=this.Ic;if(r===l)return r;if(e=Math.max(0,Math.min(100,Math.round(100*e))),null===this.Rc||this.Rc.Ts!==l||this.Rc.Ps!==r)this.Rc={Ts:l,Ps:r,bd:new Map};else{let r=this.Rc.bd.get(e);if(void 0!==r)return r}let a=function(e,r,l){let[a,h,o,c]=Q(e),[u,d,f,m]=Q(r),g=[U(a+l*(u-a)),U(h+l*(d-h)),U(o+l*(f-o)),G(c+l*(m-c))];return`rgba(${g[0]}, ${g[1]}, ${g[2]}, ${g[3]})`}(l,r,e/100);return this.Rc.bd.set(e,a),a}Kc(e,r){let l=new tO(r);if(null!==e){let a=this.kc.indexOf(e);l.Nn(a,{Fn:r})}return l}Nc(e,r){return void 0===r&&(r=2),this.Kc(this.cr(e),r)}Ec(e){this.Dc&&this.Dc(e),this.kc.forEach(e=>e.W_().Uh().bt())}dd(e,r,l,a){let h=new e1(this,e,r,l,a),o=void 0!==e.priceScaleId?e.priceScaleId:this.pd();return l.Uo(h,o),tT(o)||h.Hh(e),h}zc(e){let r=this.cn.layout;return"gradient"===r.background.type?0===e?r.background.topColor:r.background.bottomColor:r.background.color}}(function(e){e[e.Disabled=0]="Disabled",e[e.Continuous=1]="Continuous",e[e.OnDataUpdate=2]="OnDataUpdate"})(m||(m={})),function(e){e[e.LastBar=0]="LastBar",e[e.LastVisible=1]="LastVisible"}(g||(g={})),function(e){e.Solid="solid",e.VerticalGradient="gradient"}(p||(p={})),function(e){e[e.Year=0]="Year",e[e.Month=1]="Month",e[e.DayOfMonth=2]="DayOfMonth",e[e.Time=3]="Time",e[e.TimeWithSeconds=4]="TimeWithSeconds"}(x||(x={}));let iS=e=>e.getUTCFullYear();class i_{constructor(e="yyyy-MM-dd",r="default"){this.wd=e,this.gd=r}q_(e){var r,l,a;return r=e,l=this.wd,a=this.gd,l.replace(/yyyy/g,tD(iS(r),4)).replace(/yy/g,tD(iS(r)%100,2)).replace(/MMMM/g,new Date(r.getUTCFullYear(),r.getUTCMonth(),1).toLocaleString(a,{month:"long"})).replace(/MMM/g,new Date(r.getUTCFullYear(),r.getUTCMonth(),1).toLocaleString(a,{month:"short"})).replace(/MM/g,tD(r.getUTCMonth()+1,2)).replace(/dd/g,tD(r.getUTCDate(),2))}}class iM{constructor(e){this.Md=e||"%h:%m:%s"}q_(e){return this.Md.replace("%h",tD(e.getUTCHours(),2)).replace("%m",tD(e.getUTCMinutes(),2)).replace("%s",tD(e.getUTCSeconds(),2))}}let iE={xd:"yyyy-MM-dd",Sd:"%h:%m:%s",kd:" ",yd:"default"};function ik(e){return 60*e*6e4}function iC(e){return 60*e*1e3}let iL=[{Rd:1e3,Dd:10},{Rd:iC(1),Dd:20},{Rd:iC(5),Dd:21},{Rd:iC(30),Dd:22},{Rd:ik(1),Dd:30},{Rd:ik(3),Dd:31},{Rd:ik(6),Dd:32},{Rd:ik(12),Dd:33}];function iz(e){let r=new Date(e);if(isNaN(r.getTime()))throw Error(`Invalid date string=${e}, expected format=yyyy-mm-dd`);return{day:r.getUTCDate(),month:r.getUTCMonth()+1,year:r.getUTCFullYear()}}let iR="undefined"!=typeof window;function iP(){return!!iR&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function iT(){return!!iR&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function iO(e,r,l){let a=(e.Id-r.Id)/(e.ot-r.ot);return Math.sign(a)*Math.min(Math.abs(a),l)}class iD{constructor(e,r,l,a){this.zd=null,this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=0,this.jd=0,this.Hd=e,this.$d=r,this.Ud=l,this.rs=a}qd(e,r){if(null!==this.zd){if(this.zd.ot===r)return void(this.zd.Id=e);if(Math.abs(this.zd.Id-e)<this.rs)return}this.Nd=this.Ed,this.Ed=this.Ld,this.Ld=this.zd,this.zd={ot:r,Id:e}}Dr(e,r){var l,a,h,o,c,u;if(null===this.zd||null===this.Ld||r-this.zd.ot>50)return;let d=0,f=iO(this.zd,this.Ld,this.$d),m=(l=this.zd,a=this.Ld,l.Id-a.Id),g=[f],p=[m];if(d+=m,null!==this.Ed){let e=iO(this.Ld,this.Ed,this.$d);if(Math.sign(e)===Math.sign(f)){let r=(h=this.Ld,o=this.Ed,h.Id-o.Id);if(g.push(e),p.push(r),d+=r,null!==this.Nd){let e=iO(this.Ed,this.Nd,this.$d);if(Math.sign(e)===Math.sign(f)){let r=(c=this.Ed,u=this.Nd,c.Id-u.Id);g.push(e),p.push(r),d+=r}}}}let x=0;for(let e=0;e<g.length;++e)x+=p[e]/d*g[e];Math.abs(x)<this.Hd||(this.Fd={Id:e,ot:r},this.jd=x,this.Wd=function(e,r){let l=Math.log(r);return Math.log(-(1*l/e))/l}(Math.abs(x),this.Ud))}Qu(e){let r=K(this.Fd),l=e-r.ot;return r.Id+this.jd*(Math.pow(this.Ud,l)-1)/Math.log(this.Ud)}Ju(e){return null===this.Fd||this.Yd(e)===this.Wd}Yd(e){return Math.min(e-K(this.Fd).ot,this.Wd)}}class i${constructor(e,r){this.Zd=void 0,this.Xd=void 0,this.Kd=void 0,this.en=!1,this.Gd=e,this.Jd=r,this.Qd()}bt(){this.Qd()}tf(){this.Zd&&this.Gd.removeChild(this.Zd),this.Xd&&this.Gd.removeChild(this.Xd),this.Zd=void 0,this.Xd=void 0}if(){return this.en!==this.nf()||this.Kd!==this.sf()}sf(){return tt(Q(this.Jd.W().layout.textColor))>160?"dark":"light"}nf(){return this.Jd.W().layout.attributionLogo}ef(){let e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Qd(){this.if()&&(this.tf(),this.en=this.nf(),this.en&&(this.Kd=this.sf(),this.Xd=document.createElement("style"),this.Xd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Zd=document.createElement("a"),this.Zd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.ef()}`,this.Zd.title="Charting by TradingView",this.Zd.id="tv-attr-logo",this.Zd.target="_blank",this.Zd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Zd.toggleAttribute("data-dark","dark"===this.Kd),this.Gd.appendChild(this.Xd),this.Gd.appendChild(this.Zd)))}}function iA(e,r){let l=K(e.ownerDocument).createElement("canvas");e.appendChild(l);let a=i(l,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:(e,r)=>({width:Math.max(e.width,r.width),height:Math.max(e.height,r.height)})});return a.resizeCanvasElement(r),a}function iI(e){var r;e.width=1,e.height=1,null===(r=e.getContext("2d"))||void 0===r||r.clearRect(0,0,1,1)}function iW(e,r,l,a){e.wl&&e.wl(r,l,a)}function iB(e,r,l,a){e.X(r,l,a)}function iV(e,r,l,a){for(let h of e(l,a)){let e=h.gt();null!==e&&r(e)}}class iF{constructor(e,r,l){this.rf=0,this.hf=null,this.lf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.af=0,this._f=null,this.uf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.cf=null,this.df=!1,this.ff=null,this.vf=null,this.pf=!1,this.mf=!1,this.bf=!1,this.wf=null,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=0,this.Tf=!1,this.Pf=!1,this.Rf=!1,this.Df=0,this.Vf=null,this.Of=!iT(),this.Bf=e=>{this.Af(e)},this.If=e=>{if(this.zf(e)){let r=this.Lf(e);if(++this.af,this._f&&this.af>1){let{Ef:l}=this.Nf(iX(e),this.uf);l<30&&!this.bf&&this.Ff(r,this.jf.Wf),this.Hf()}}else{let r=this.Lf(e);if(++this.rf,this.hf&&this.rf>1){let{Ef:l}=this.Nf(iX(e),this.lf);l<5&&!this.mf&&this.$f(r,this.jf.Uf),this.qf()}}},this.Yf=e,this.jf=r,this.cn=l,this.Zf()}S(){null!==this.wf&&(this.wf(),this.wf=null),null!==this.gf&&(this.gf(),this.gf=null),null!==this.xf&&(this.xf(),this.xf=null),null!==this.Sf&&(this.Sf(),this.Sf=null),null!==this.kf&&(this.kf(),this.kf=null),null!==this.Mf&&(this.Mf(),this.Mf=null),this.Xf(),this.qf()}Kf(e){this.xf&&this.xf();let r=this.Gf.bind(this);if(this.xf=()=>{this.Yf.removeEventListener("mousemove",r)},this.Yf.addEventListener("mousemove",r),this.zf(e))return;let l=this.Lf(e);this.$f(l,this.jf.Jf),this.Of=!0}qf(){null!==this.hf&&clearTimeout(this.hf),this.rf=0,this.hf=null,this.lf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Hf(){null!==this._f&&clearTimeout(this._f),this.af=0,this._f=null,this.uf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Gf(e){if(this.Rf||null!==this.vf||this.zf(e))return;let r=this.Lf(e);this.$f(r,this.jf.Qf),this.Of=!0}tv(e){let r=iG(e.changedTouches,K(this.Vf));if(null===r||(this.Df=iU(e),null!==this.yf)||this.Pf)return;this.Tf=!0;let{iv:l,nv:a,Ef:h}=this.Nf(iX(r),K(this.vf));if(this.pf||!(h<5)){if(!this.pf){let e=.5*l,r=a>=e&&!this.cn.sv(),h=e>a&&!this.cn.ev();r||h||(this.Pf=!0),this.pf=!0,this.bf=!0,this.Xf(),this.Hf()}if(!this.Pf){let l=this.Lf(e,r);this.Ff(l,this.jf.rv),iH(e)}}}hv(e){if(0!==e.button)return;let{Ef:r}=this.Nf(iX(e),K(this.ff));if(r>=5&&(this.mf=!0,this.qf()),this.mf){let r=this.Lf(e);this.$f(r,this.jf.lv)}}Nf(e,r){let l=Math.abs(r.nt-e.nt),a=Math.abs(r.st-e.st);return{iv:l,nv:a,Ef:l+a}}av(e){let r=iG(e.changedTouches,K(this.Vf));if(null===r&&0===e.touches.length&&(r=e.changedTouches[0]),null===r)return;this.Vf=null,this.Df=iU(e),this.Xf(),this.vf=null,this.kf&&(this.kf(),this.kf=null);let l=this.Lf(e,r);if(this.Ff(l,this.jf.ov),++this.af,this._f&&this.af>1){let{Ef:e}=this.Nf(iX(r),this.uf);e<30&&!this.bf&&this.Ff(l,this.jf.Wf),this.Hf()}else this.bf||(this.Ff(l,this.jf._v),this.jf._v&&iH(e));0===this.af&&iH(e),0===e.touches.length&&this.df&&(this.df=!1,iH(e))}Af(e){if(0!==e.button)return;let r=this.Lf(e);if(this.ff=null,this.Rf=!1,this.Sf&&(this.Sf(),this.Sf=null),iP()&&this.Yf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Bf),!this.zf(e)){if(this.$f(r,this.jf.uv),++this.rf,this.hf&&this.rf>1){let{Ef:l}=this.Nf(iX(e),this.lf);l<5&&!this.mf&&this.$f(r,this.jf.Uf),this.qf()}else this.mf||this.$f(r,this.jf.cv)}}Xf(){null!==this.cf&&(clearTimeout(this.cf),this.cf=null)}dv(e){if(null!==this.Vf)return;let r=e.changedTouches[0];this.Vf=r.identifier,this.Df=iU(e);let l=this.Yf.ownerDocument.documentElement;this.bf=!1,this.pf=!1,this.Pf=!1,this.vf=iX(r),this.kf&&(this.kf(),this.kf=null);{let r=this.tv.bind(this),a=this.av.bind(this);this.kf=()=>{l.removeEventListener("touchmove",r),l.removeEventListener("touchend",a)},l.addEventListener("touchmove",r,{passive:!1}),l.addEventListener("touchend",a,{passive:!1}),this.Xf(),this.cf=setTimeout(this.fv.bind(this,e),240)}let a=this.Lf(e,r);this.Ff(a,this.jf.vv),this._f||(this.af=0,this._f=setTimeout(this.Hf.bind(this),500),this.uf=iX(r))}pv(e){if(0!==e.button)return;let r=this.Yf.ownerDocument.documentElement;iP()&&r.addEventListener("mouseleave",this.Bf),this.mf=!1,this.ff=iX(e),this.Sf&&(this.Sf(),this.Sf=null);{let e=this.hv.bind(this),l=this.Af.bind(this);this.Sf=()=>{r.removeEventListener("mousemove",e),r.removeEventListener("mouseup",l)},r.addEventListener("mousemove",e),r.addEventListener("mouseup",l)}if(this.Rf=!0,this.zf(e))return;let l=this.Lf(e);this.$f(l,this.jf.mv),this.hf||(this.rf=0,this.hf=setTimeout(this.qf.bind(this),500),this.lf=iX(e))}Zf(){var e;this.Yf.addEventListener("mouseenter",this.Kf.bind(this)),this.Yf.addEventListener("touchcancel",this.Xf.bind(this));{let e=this.Yf.ownerDocument,r=e=>{this.jf.bv&&(e.composed&&this.Yf.contains(e.composedPath()[0])||e.target&&this.Yf.contains(e.target)||this.jf.bv())};this.gf=()=>{e.removeEventListener("touchstart",r)},this.wf=()=>{e.removeEventListener("mousedown",r)},e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!0})}iT()&&(this.Mf=()=>{this.Yf.removeEventListener("dblclick",this.If)},this.Yf.addEventListener("dblclick",this.If)),this.Yf.addEventListener("mouseleave",this.wv.bind(this)),this.Yf.addEventListener("touchstart",this.dv.bind(this),{passive:!0}),e=this.Yf,iR&&void 0!==window.chrome&&e.addEventListener("mousedown",e=>{if(1===e.button)return e.preventDefault(),!1}),this.Yf.addEventListener("mousedown",this.pv.bind(this)),this.gv(),this.Yf.addEventListener("touchmove",()=>{},{passive:!1})}gv(){void 0===this.jf.Mv&&void 0===this.jf.xv&&void 0===this.jf.Sv||(this.Yf.addEventListener("touchstart",e=>this.kv(e.touches),{passive:!0}),this.Yf.addEventListener("touchmove",e=>{if(2===e.touches.length&&null!==this.yf&&void 0!==this.jf.xv){let r=iK(e.touches[0],e.touches[1])/this.Cf;this.jf.xv(this.yf,r),iH(e)}},{passive:!1}),this.Yf.addEventListener("touchend",e=>{this.kv(e.touches)}))}kv(e){1===e.length&&(this.Tf=!1),2!==e.length||this.Tf||this.df?this.yv():this.Cv(e)}Cv(e){let r=this.Yf.getBoundingClientRect()||{left:0,top:0};this.yf={nt:(e[0].clientX-r.left+(e[1].clientX-r.left))/2,st:(e[0].clientY-r.top+(e[1].clientY-r.top))/2},this.Cf=iK(e[0],e[1]),void 0!==this.jf.Mv&&this.jf.Mv(),this.Xf()}yv(){null!==this.yf&&(this.yf=null,void 0!==this.jf.Sv&&this.jf.Sv())}wv(e){if(this.xf&&this.xf(),this.zf(e)||!this.Of)return;let r=this.Lf(e);this.$f(r,this.jf.Tv),this.Of=!iT()}fv(e){let r=iG(e.touches,K(this.Vf));if(null===r)return;let l=this.Lf(e,r);this.Ff(l,this.jf.Pv),this.bf=!0,this.df=!0}zf(e){return e.sourceCapabilities&&void 0!==e.sourceCapabilities.firesTouchEvents?e.sourceCapabilities.firesTouchEvents:iU(e)<this.Df+500}Ff(e,r){r&&r.call(this.jf,e)}$f(e,r){r&&r.call(this.jf,e)}Lf(e,r){let l=r||e,a=this.Yf.getBoundingClientRect()||{left:0,top:0};return{clientX:l.clientX,clientY:l.clientY,pageX:l.pageX,pageY:l.pageY,screenX:l.screenX,screenY:l.screenY,localX:l.clientX-a.left,localY:l.clientY-a.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Rv:!e.type.startsWith("mouse")&&"contextmenu"!==e.type&&"click"!==e.type,Dv:e.type,Vv:l.target,Ov:e.view,Bv:()=>{"touchstart"!==e.type&&iH(e)}}}}function iK(e,r){let l=e.clientX-r.clientX,a=e.clientY-r.clientY;return Math.sqrt(l*l+a*a)}function iH(e){e.cancelable&&e.preventDefault()}function iX(e){return{nt:e.pageX,st:e.pageY}}function iU(e){return e.timeStamp||performance.now()}function iG(e,r){for(let l=0;l<e.length;++l)if(e[l].identifier===r)return e[l];return null}function iJ(e){return{jc:e.jc,Av:{wr:e.Iv.externalId},zv:e.Iv.cursorStyle}}function iY(e,r){return l=>{var a,h,o,c;return(null!==(h=null===(a=l.Dt())||void 0===a?void 0:a.Ta())&&void 0!==h?h:"")!==r?[]:null!==(c=null===(o=l.ca)||void 0===o?void 0:o.call(l,e))&&void 0!==c?c:[]}}function iq(e,r,l,a){if(!e.length)return;let h=0,o=l/2,c=e[0].At(a,!0),u=1===r?o-(e[0].Vi()-c/2):e[0].Vi()-c/2-o;u=Math.max(0,u);for(let o=1;o<e.length;o++){let c=e[o],d=e[o-1],f=d.At(a,!1),m=c.Vi(),g=d.Vi();if(1===r?m>g-f:m<g+f){let a=g-f*r;c.Oi(a);let o=a-r*f/2;if((1===r?o<0:o>l)&&u>0){let a=Math.min(1===r?-1-o:o-l,u);for(let l=h;l<e.length;l++)e[l].Oi(e[l].Vi()+r*a);u-=a}}else h=o,u=1===r?g-f-m:m-(g+f)}}class iZ{constructor(e,r,l,a){this.Li=null,this.Lv=null,this.Ev=!1,this.Nv=new ed(200),this.Jr=null,this.Fv=0,this.Wv=!1,this.jv=()=>{this.Wv||this.tn.Hv().$t().$h()},this.$v=()=>{this.Wv||this.tn.Hv().$t().$h()},this.tn=e,this.cn=r,this.So=r.layout,this.Vc=l,this.Uv="left"===a,this.qv=iY("normal",a),this.Yv=iY("top",a),this.Zv=iY("bottom",a),this.Xv=document.createElement("div"),this.Xv.style.height="100%",this.Xv.style.overflow="hidden",this.Xv.style.width="25px",this.Xv.style.left="0",this.Xv.style.position="relative",this.Kv=iA(this.Xv,t({width:16,height:16})),this.Kv.subscribeSuggestedBitmapSizeChanged(this.jv);let h=this.Kv.canvasElement;h.style.position="absolute",h.style.zIndex="1",h.style.left="0",h.style.top="0",this.Gv=iA(this.Xv,t({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.$v);let o=this.Gv.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";let c={mv:this.Jv.bind(this),vv:this.Jv.bind(this),lv:this.Qv.bind(this),rv:this.Qv.bind(this),bv:this.tp.bind(this),uv:this.ip.bind(this),ov:this.ip.bind(this),Uf:this.np.bind(this),Wf:this.np.bind(this),Jf:this.sp.bind(this),Tv:this.ep.bind(this)};this.rp=new iF(this.Gv.canvasElement,c,{sv:()=>!this.cn.handleScroll.vertTouchDrag,ev:()=>!0})}S(){this.rp.S(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.$v),iI(this.Gv.canvasElement),this.Gv.dispose(),this.Kv.unsubscribeSuggestedBitmapSizeChanged(this.jv),iI(this.Kv.canvasElement),this.Kv.dispose(),null!==this.Li&&this.Li.Xo().p(this),this.Li=null}hp(){return this.Xv}P(){return this.So.fontSize}lp(){let e=this.Vc.W();return this.Jr!==e.R&&(this.Nv.ir(),this.Jr=e.R),e}ap(){var e;if(null===this.Li)return 0;let r=0,l=this.lp(),a=K(this.Kv.canvasElement.getContext("2d"));a.save();let h=this.Li.ja();a.font=this.op(),h.length>0&&(r=Math.max(this.Nv.xi(a,h[0].no),this.Nv.xi(a,h[h.length-1].no)));let o=this._p();for(let e=o.length;e--;){let l=this.Nv.xi(a,o[e].Kt());l>r&&(r=l)}let c=this.Li.Ct();if(null!==c&&null!==this.Lv){let e=this.Li.pn(1,c),l=this.Li.pn(this.Lv.height-2,c);r=Math.max(r,this.Nv.xi(a,this.Li.Fi(Math.floor(Math.min(e,l))+.11111111111111,c)),this.Nv.xi(a,this.Li.Fi(Math.ceil(Math.max(e,l))-.11111111111111,c)))}a.restore();let u=r||34;return(e=Math.ceil(l.C+l.T+l.A+l.I+5+u))+e%2}up(e){null!==this.Lv&&n(this.Lv,e)||(this.Lv=e,this.Wv=!0,this.Kv.resizeCanvasElement(e),this.Gv.resizeCanvasElement(e),this.Wv=!1,this.Xv.style.width=`${e.width}px`,this.Xv.style.height=`${e.height}px`)}cp(){return K(this.Lv).width}Gi(e){this.Li!==e&&(null!==this.Li&&this.Li.Xo().p(this),this.Li=e,e.Xo().l(this.do.bind(this),this))}Dt(){return this.Li}ir(){let e=this.tn.dp();this.tn.Hv().$t().L_(e,K(this.Dt()))}fp(e){if(null===this.Lv)return;if(1!==e){this.vp(),this.Kv.applySuggestedBitmapSize();let e=s(this.Kv);null!==e&&(e.useBitmapCoordinateSpace(e=>{this.pp(e),this.Ae(e)}),this.tn.mp(e,this.Zv),this.bp(e),this.tn.mp(e,this.qv),this.wp(e))}this.Gv.applySuggestedBitmapSize();let r=s(this.Gv);null!==r&&(r.useBitmapCoordinateSpace(({context:e,bitmapSize:r})=>{e.clearRect(0,0,r.width,r.height)}),this.gp(r),this.tn.mp(r,this.Yv))}Mp(){return this.Kv.bitmapSize}xp(e,r,l){let a=this.Mp();a.width>0&&a.height>0&&e.drawImage(this.Kv.canvasElement,r,l)}bt(){var e;null===(e=this.Li)||void 0===e||e.ja()}Jv(e){if(null===this.Li||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;let r=this.tn.Hv().$t(),l=this.tn.dp();this.Ev=!0,r.D_(l,this.Li,e.localY)}Qv(e){if(null===this.Li||!this.cn.handleScale.axisPressedMouseMove.price)return;let r=this.tn.Hv().$t(),l=this.tn.dp(),a=this.Li;r.V_(l,a,e.localY)}tp(){if(null===this.Li||!this.cn.handleScale.axisPressedMouseMove.price)return;let e=this.tn.Hv().$t(),r=this.tn.dp(),l=this.Li;this.Ev&&(this.Ev=!1,e.O_(r,l))}ip(e){if(null===this.Li||!this.cn.handleScale.axisPressedMouseMove.price)return;let r=this.tn.Hv().$t(),l=this.tn.dp();this.Ev=!1,r.O_(l,this.Li)}np(e){this.cn.handleScale.axisDoubleClickReset.price&&this.ir()}sp(e){null!==this.Li&&(!this.tn.Hv().$t().W().handleScale.axisPressedMouseMove.price||this.Li.gh()||this.Li.Vo()||this.Sp(1))}ep(e){this.Sp(0)}_p(){let e=[],r=null===this.Li?void 0:this.Li;return(l=>{for(let a=0;a<l.length;++a){let h=l[a].Rn(this.tn.dp(),r);for(let r=0;r<h.length;r++)e.push(h[r])}})(this.tn.dp().$o()),e}pp({context:e,bitmapSize:r}){let{width:l,height:a}=r,h=this.tn.dp().$t(),o=h.q(),c=h.md();o===c?tN(e,0,0,l,a,o):t_(e,0,0,l,a,o,c)}Ae({context:e,bitmapSize:r,horizontalPixelRatio:l}){let a;if(null===this.Lv||null===this.Li||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;let h=Math.max(1,Math.floor(this.lp().C*l));a=this.Uv?r.width-h:0,e.fillRect(a,0,h,r.height)}bp(e){if(null===this.Lv||null===this.Li)return;let r=this.Li.ja(),l=this.Li.W(),a=this.lp(),h=this.Uv?this.Lv.width-a.T:0;l.borderVisible&&l.ticksVisible&&e.useBitmapCoordinateSpace(({context:e,horizontalPixelRatio:o,verticalPixelRatio:c})=>{e.fillStyle=l.borderColor;let u=Math.max(1,Math.floor(c)),d=Math.floor(.5*c),f=Math.round(a.T*o);for(let l of(e.beginPath(),r))e.rect(Math.floor(h*o),Math.round(l.La*c)-d,f,u);e.fill()}),e.useMediaCoordinateSpace(({context:e})=>{var o;e.font=this.op(),e.fillStyle=null!==(o=l.textColor)&&void 0!==o?o:this.So.textColor,e.textAlign=this.Uv?"right":"left",e.textBaseline="middle";let c=this.Uv?Math.round(h-a.A):Math.round(h+a.T+a.A),u=r.map(r=>this.Nv.Mi(e,r.no));for(let l=r.length;l--;){let a=r[l];e.fillText(a.no,c,a.La+u[l])}})}vp(){if(null===this.Lv||null===this.Li)return;let e=[],r=this.Li.$o().slice(),l=this.tn.dp(),a=this.lp();this.Li===l.vr()&&this.tn.dp().$o().forEach(e=>{l.dr(e)&&r.push(e)});let h=this.Li;r.forEach(r=>{r.Rn(l,h).forEach(r=>{r.Oi(null),r.Bi()&&e.push(r)})}),e.forEach(e=>e.Oi(e.ki())),this.Li.W().alignLabels&&this.kp(e,a)}kp(e,r){if(null===this.Lv)return;let l=this.Lv.height/2,a=e.filter(e=>e.ki()<=l),h=e.filter(e=>e.ki()>l);for(let l of(a.sort((e,r)=>r.ki()-e.ki()),h.sort((e,r)=>e.ki()-r.ki()),e)){let e=Math.floor(l.At(r)/2),a=l.ki();a>-e&&a<e&&l.Oi(e),a>this.Lv.height-e&&a<this.Lv.height+e&&l.Oi(this.Lv.height-e)}iq(a,1,this.Lv.height,r),iq(h,-1,this.Lv.height,r)}wp(e){if(null===this.Lv)return;let r=this._p(),l=this.lp(),a=this.Uv?"right":"left";r.forEach(r=>{r.Ai()&&r.gt(K(this.Li)).X(e,l,this.Nv,a)})}gp(e){if(null===this.Lv||null===this.Li)return;let r=this.tn.Hv().$t(),l=[],a=this.tn.dp(),h=r.Yc().Rn(a,this.Li);h.length&&l.push(h);let o=this.lp(),c=this.Uv?"right":"left";l.forEach(r=>{r.forEach(r=>{r.gt(K(this.Li)).X(e,o,this.Nv,c)})})}Sp(e){this.Xv.style.cursor=1===e?"ns-resize":"default"}do(){let e=this.ap();this.Fv<e&&this.tn.Hv().$t().Xl(),this.Fv=e}op(){return td(this.So.fontSize,this.So.fontFamily)}}function iQ(e,r){var l,a;return null!==(a=null===(l=e._a)||void 0===l?void 0:l.call(e,r))&&void 0!==a?a:[]}function i0(e,r){var l,a;return null!==(a=null===(l=e.Pn)||void 0===l?void 0:l.call(e,r))&&void 0!==a?a:[]}function i1(e,r){var l,a;return null!==(a=null===(l=e.Ji)||void 0===l?void 0:l.call(e,r))&&void 0!==a?a:[]}function i2(e,r){var l,a;return null!==(a=null===(l=e.la)||void 0===l?void 0:l.call(e,r))&&void 0!==a?a:[]}class i4{constructor(e,r){this.Lv=t({width:0,height:0}),this.yp=null,this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=!1,this.Dp=new ti,this.Vp=new ti,this.Op=0,this.Bp=!1,this.Ap=null,this.Ip=!1,this.zp=null,this.Lp=null,this.Wv=!1,this.jv=()=>{this.Wv||null===this.Ep||this.$i().$h()},this.$v=()=>{this.Wv||null===this.Ep||this.$i().$h()},this.Jd=e,this.Ep=r,this.Ep.F_().l(this.Np.bind(this),this,!0),this.Fp=document.createElement("td"),this.Fp.style.padding="0",this.Fp.style.position="relative";let l=document.createElement("div");l.style.width="100%",l.style.height="100%",l.style.position="relative",l.style.overflow="hidden",this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Fp.appendChild(l),this.Kv=iA(l,t({width:16,height:16})),this.Kv.subscribeSuggestedBitmapSizeChanged(this.jv);let a=this.Kv.canvasElement;a.style.position="absolute",a.style.zIndex="1",a.style.left="0",a.style.top="0",this.Gv=iA(l,t({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.$v);let h=this.Gv.canvasElement;h.style.position="absolute",h.style.zIndex="2",h.style.left="0",h.style.top="0",this.Hp=document.createElement("tr"),this.Hp.appendChild(this.Wp),this.Hp.appendChild(this.Fp),this.Hp.appendChild(this.jp),this.$p(),this.rp=new iF(this.Gv.canvasElement,this,{sv:()=>null===this.Ap&&!this.Jd.W().handleScroll.vertTouchDrag,ev:()=>null===this.Ap&&!this.Jd.W().handleScroll.horzTouchDrag})}S(){null!==this.yp&&this.yp.S(),null!==this.Cp&&this.Cp.S(),this.Tp=null,this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.$v),iI(this.Gv.canvasElement),this.Gv.dispose(),this.Kv.unsubscribeSuggestedBitmapSizeChanged(this.jv),iI(this.Kv.canvasElement),this.Kv.dispose(),null!==this.Ep&&this.Ep.F_().p(this),this.rp.S()}dp(){return K(this.Ep)}Up(e){var r,l;null!==this.Ep&&this.Ep.F_().p(this),this.Ep=e,null!==this.Ep&&this.Ep.F_().l(i4.prototype.Np.bind(this),this,!0),this.$p(),this.Jd.qp().indexOf(this)===this.Jd.qp().length-1?(this.Tp=null!==(r=this.Tp)&&void 0!==r?r:new i$(this.Fp,this.Jd),this.Tp.bt()):(null===(l=this.Tp)||void 0===l||l.tf(),this.Tp=null)}Hv(){return this.Jd}hp(){return this.Hp}$p(){if(null!==this.Ep&&(this.Yp(),0!==this.$i().wt().length)){if(null!==this.yp){let e=this.Ep.P_();this.yp.Gi(K(e))}if(null!==this.Cp){let e=this.Ep.R_();this.Cp.Gi(K(e))}}}Zp(){null!==this.yp&&this.yp.bt(),null!==this.Cp&&this.Cp.bt()}g_(){return null!==this.Ep?this.Ep.g_():0}M_(e){this.Ep&&this.Ep.M_(e)}Jf(e){if(!this.Ep)return;this.Xp();let r=e.localX,l=e.localY;this.Kp(r,l,e)}mv(e){this.Xp(),this.Gp(),this.Kp(e.localX,e.localY,e)}Qf(e){var r;if(!this.Ep)return;this.Xp();let l=e.localX,a=e.localY;this.Kp(l,a,e);let h=this.br(l,a);this.Jd.Jp(null!==(r=null==h?void 0:h.zv)&&void 0!==r?r:null),this.$i().Wc(h&&{jc:h.jc,Av:h.Av})}cv(e){null!==this.Ep&&(this.Xp(),this.Qp(e))}Uf(e){null!==this.Ep&&this.tm(this.Vp,e)}Wf(e){this.Uf(e)}lv(e){this.Xp(),this.im(e),this.Kp(e.localX,e.localY,e)}uv(e){null!==this.Ep&&(this.Xp(),this.Bp=!1,this.nm(e))}_v(e){null!==this.Ep&&this.Qp(e)}Pv(e){if(this.Bp=!0,null===this.Ap){let r={x:e.localX,y:e.localY};this.sm(r,r,e)}}Tv(e){null!==this.Ep&&(this.Xp(),this.Ep.$t().Wc(null),this.rm())}hm(){return this.Dp}lm(){return this.Vp}Mv(){this.Op=1,this.$i().Un()}xv(e,r){if(!this.Jd.W().handleScale.pinch)return;let l=5*(r-this.Op);this.Op=r,this.$i().Jc(e.nt,l)}vv(e){this.Bp=!1,this.Ip=null!==this.Ap,this.Gp();let r=this.$i().Yc();null!==this.Ap&&r.yt()&&(this.zp={x:r.Yt(),y:r.Zt()},this.Ap={x:e.localX,y:e.localY})}rv(e){if(null===this.Ep)return;let r=e.localX,l=e.localY;if(null===this.Ap)this.im(e);else{this.Ip=!1;let a=K(this.zp),h=a.x+(r-this.Ap.x),o=a.y+(l-this.Ap.y);this.Kp(h,o,e)}}ov(e){0===this.Hv().W().trackingMode.exitMode&&(this.Ip=!0),this.am(),this.nm(e)}br(e,r){let l=this.Ep;return null===l?null:function(e,r,l){let a=e.$o(),h=function(e,r,l){var a,h,o,c;let u,d;for(let f of e)for(let e of null!==(h=null===(a=f.fa)||void 0===a?void 0:a.call(f,r,l))&&void 0!==h?h:[])o=e.zOrder,(c=null==u?void 0:u.zOrder)&&("top"!==o||"top"===c)&&("normal"!==o||"bottom"!==c)||(u=e,d=f);return u&&d?{Iv:u,jc:d}:null}(a,r,l);if("top"===(null==h?void 0:h.Iv.zOrder))return iJ(h);for(let o of a){if(h&&h.jc===o&&"bottom"!==h.Iv.zOrder&&!h.Iv.isBackground)return iJ(h);let a=function(e,r,l){for(let a of e){let e=a.gt();if(null!==e&&e.br){let h=e.br(r,l);if(null!==h)return{Ov:a,Av:h}}}return null}(o.Pn(e),r,l);if(null!==a)return{jc:o,Ov:a.Ov,Av:a.Av};if(h&&h.jc===o&&"bottom"!==h.Iv.zOrder&&h.Iv.isBackground)return iJ(h)}return(null==h?void 0:h.Iv)?iJ(h):null}(l,e,r)}om(e,r){K("left"===r?this.yp:this.Cp).up(t({width:e,height:this.Lv.height}))}_m(){return this.Lv}up(e){n(this.Lv,e)||(this.Lv=e,this.Wv=!0,this.Kv.resizeCanvasElement(e),this.Gv.resizeCanvasElement(e),this.Wv=!1,this.Fp.style.width=e.width+"px",this.Fp.style.height=e.height+"px")}um(){let e=K(this.Ep);for(let r of(e.T_(e.P_()),e.T_(e.R_()),e.Oa()))if(e.dr(r)){let l=r.Dt();null!==l&&e.T_(l),r.Vn()}}Mp(){return this.Kv.bitmapSize}xp(e,r,l){let a=this.Mp();a.width>0&&a.height>0&&e.drawImage(this.Kv.canvasElement,r,l)}fp(e){if(0===e||null===this.Ep)return;if(e>1&&this.um(),null!==this.yp&&this.yp.fp(e),null!==this.Cp&&this.Cp.fp(e),1!==e){this.Kv.applySuggestedBitmapSize();let e=s(this.Kv);null!==e&&(e.useBitmapCoordinateSpace(e=>{this.pp(e)}),this.Ep&&(this.dm(e,iQ),this.fm(e),this.vm(e),this.dm(e,i0),this.dm(e,i1)))}this.Gv.applySuggestedBitmapSize();let r=s(this.Gv);null!==r&&(r.useBitmapCoordinateSpace(({context:e,bitmapSize:r})=>{e.clearRect(0,0,r.width,r.height)}),this.pm(r),this.dm(r,i2))}bm(){return this.yp}wm(){return this.Cp}mp(e,r){this.dm(e,r)}Np(){null!==this.Ep&&this.Ep.F_().p(this),this.Ep=null}Qp(e){this.tm(this.Dp,e)}tm(e,r){let l=r.localX,a=r.localY;e.M()&&e.m(this.$i().St().Eu(l),{x:l,y:a},r)}pp({context:e,bitmapSize:r}){let{width:l,height:a}=r,h=this.$i(),o=h.q(),c=h.md();o===c?tN(e,0,0,l,a,c):t_(e,0,0,l,a,o,c)}fm(e){let r=K(this.Ep).W_().Uh().gt();null!==r&&r.X(e,!1)}vm(e){let r=this.$i().qc();this.gm(e,i0,iW,r),this.gm(e,i0,iB,r)}pm(e){this.gm(e,i0,iB,this.$i().Yc())}dm(e,r){let l=K(this.Ep).$o();for(let a of l)this.gm(e,r,iW,a);for(let a of l)this.gm(e,r,iB,a)}gm(e,r,l,a){let h=K(this.Ep),o=h.$t().Fc(),c=null!==o&&o.jc===a,u=null!==o&&c&&void 0!==o.Av?o.Av.gr:void 0;iV(r,r=>l(r,e,c,u),a,h)}Yp(){if(null===this.Ep)return;let e=this.Jd,r=this.Ep.P_().W().visible,l=this.Ep.R_().W().visible;r||null===this.yp||(this.Wp.removeChild(this.yp.hp()),this.yp.S(),this.yp=null),l||null===this.Cp||(this.jp.removeChild(this.Cp.hp()),this.Cp.S(),this.Cp=null);let a=e.$t()._d();r&&null===this.yp&&(this.yp=new iZ(this,e.W(),a,"left"),this.Wp.appendChild(this.yp.hp())),l&&null===this.Cp&&(this.Cp=new iZ(this,e.W(),a,"right"),this.jp.appendChild(this.Cp.hp()))}Mm(e){return e.Rv&&this.Bp||null!==this.Ap}xm(e){return Math.max(0,Math.min(e,this.Lv.width-1))}Sm(e){return Math.max(0,Math.min(e,this.Lv.height-1))}Kp(e,r,l){this.$i().hd(this.xm(e),this.Sm(r),l,K(this.Ep))}rm(){this.$i().ad()}am(){this.Ip&&(this.Ap=null,this.rm())}sm(e,r,l){this.Ap=e,this.Ip=!1,this.Kp(r.x,r.y,l);let a=this.$i().Yc();this.zp={x:a.Yt(),y:a.Zt()}}$i(){return this.Jd.$t()}nm(e){if(!this.Rp)return;let r=this.$i(),l=this.dp();if(r.I_(l,l.vn()),this.Pp=null,this.Rp=!1,r.sd(),null!==this.Lp){let e=performance.now(),l=r.St();this.Lp.Dr(l.ju(),e),this.Lp.Ju(e)||r.Zn(this.Lp)}}Xp(){this.Ap=null}Gp(){if(this.Ep){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)K(document.activeElement).blur();else{let e=document.getSelection();null!==e&&e.removeAllRanges()}this.Ep.vn().Ni()||this.$i().St().Ni()}}im(e){if(null===this.Ep)return;let r=this.$i(),l=r.St();if(l.Ni())return;let a=this.Jd.W(),h=a.handleScroll,o=a.kineticScroll;if((!h.pressedMouseMove||e.Rv)&&(!h.horzTouchDrag&&!h.vertTouchDrag||!e.Rv))return;let c=this.Ep.vn(),u=performance.now();if(null!==this.Pp||this.Mm(e)||(this.Pp={x:e.clientX,y:e.clientY,Vd:u,km:e.localX,ym:e.localY}),null!==this.Pp&&!this.Rp&&(this.Pp.x!==e.clientX||this.Pp.y!==e.clientY)){if(e.Rv&&o.touch||!e.Rv&&o.mouse){let e=l.he();this.Lp=new iD(.2/e,7/e,.997,15/e),this.Lp.qd(l.ju(),this.Pp.Vd)}else this.Lp=null;c.Ni()||r.B_(this.Ep,c,e.localY),r.td(e.localX),this.Rp=!0}this.Rp&&(c.Ni()||r.A_(this.Ep,c,e.localY),r.nd(e.localX),null!==this.Lp&&this.Lp.qd(l.ju(),u))}}class i3{constructor(e,r,l,a,h){this.ft=!0,this.Lv=t({width:0,height:0}),this.jv=()=>this.fp(3),this.Uv="left"===e,this.Vc=l._d,this.cn=r,this.Cm=a,this.Tm=h,this.Xv=document.createElement("div"),this.Xv.style.width="25px",this.Xv.style.height="100%",this.Xv.style.overflow="hidden",this.Kv=iA(this.Xv,t({width:16,height:16})),this.Kv.subscribeSuggestedBitmapSizeChanged(this.jv)}S(){this.Kv.unsubscribeSuggestedBitmapSizeChanged(this.jv),iI(this.Kv.canvasElement),this.Kv.dispose()}hp(){return this.Xv}_m(){return this.Lv}up(e){n(this.Lv,e)||(this.Lv=e,this.Kv.resizeCanvasElement(e),this.Xv.style.width=`${e.width}px`,this.Xv.style.height=`${e.height}px`,this.ft=!0)}fp(e){if(e<3&&!this.ft||0===this.Lv.width||0===this.Lv.height)return;this.ft=!1,this.Kv.applySuggestedBitmapSize();let r=s(this.Kv);null!==r&&r.useBitmapCoordinateSpace(e=>{this.pp(e),this.Ae(e)})}Mp(){return this.Kv.bitmapSize}xp(e,r,l){let a=this.Mp();a.width>0&&a.height>0&&e.drawImage(this.Kv.canvasElement,r,l)}Ae({context:e,bitmapSize:r,horizontalPixelRatio:l,verticalPixelRatio:a}){if(!this.Cm())return;e.fillStyle=this.cn.timeScale.borderColor;let h=Math.floor(this.Vc.W().C*l),o=Math.floor(this.Vc.W().C*a),c=this.Uv?r.width-h:0;e.fillRect(c,0,h,o)}pp({context:e,bitmapSize:r}){tN(e,0,0,r.width,r.height,this.Tm())}}function i5(e){return r=>{var l,a;return null!==(a=null===(l=r.da)||void 0===l?void 0:l.call(r,e))&&void 0!==a?a:[]}}let i6=i5("normal"),i8=i5("top"),i9=i5("bottom");class i7{constructor(e,r){this.Pm=null,this.Rm=null,this.k=null,this.Dm=!1,this.Lv=t({width:0,height:0}),this.Vm=new ti,this.Nv=new ed(5),this.Wv=!1,this.jv=()=>{this.Wv||this.Jd.$t().$h()},this.$v=()=>{this.Wv||this.Jd.$t().$h()},this.Jd=e,this.U_=r,this.cn=e.W().layout,this.Zd=document.createElement("tr"),this.Om=document.createElement("td"),this.Om.style.padding="0",this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Xv=document.createElement("td"),this.Xv.style.height="25px",this.Xv.style.padding="0",this.Am=document.createElement("div"),this.Am.style.width="100%",this.Am.style.height="100%",this.Am.style.position="relative",this.Am.style.overflow="hidden",this.Xv.appendChild(this.Am),this.Kv=iA(this.Am,t({width:16,height:16})),this.Kv.subscribeSuggestedBitmapSizeChanged(this.jv);let l=this.Kv.canvasElement;l.style.position="absolute",l.style.zIndex="1",l.style.left="0",l.style.top="0",this.Gv=iA(this.Am,t({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.$v);let a=this.Gv.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0",this.Zd.appendChild(this.Om),this.Zd.appendChild(this.Xv),this.Zd.appendChild(this.Bm),this.Im(),this.Jd.$t().w_().l(this.Im.bind(this),this),this.rp=new iF(this.Gv.canvasElement,this,{sv:()=>!0,ev:()=>!this.Jd.W().handleScroll.horzTouchDrag})}S(){this.rp.S(),null!==this.Pm&&this.Pm.S(),null!==this.Rm&&this.Rm.S(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.$v),iI(this.Gv.canvasElement),this.Gv.dispose(),this.Kv.unsubscribeSuggestedBitmapSizeChanged(this.jv),iI(this.Kv.canvasElement),this.Kv.dispose()}hp(){return this.Zd}zm(){return this.Pm}Lm(){return this.Rm}mv(e){if(this.Dm)return;this.Dm=!0;let r=this.Jd.$t();!r.St().Ni()&&this.Jd.W().handleScale.axisPressedMouseMove.time&&r.Gc(e.localX)}vv(e){this.mv(e)}bv(){let e=this.Jd.$t();!e.St().Ni()&&this.Dm&&(this.Dm=!1,this.Jd.W().handleScale.axisPressedMouseMove.time&&e.rd())}lv(e){let r=this.Jd.$t();!r.St().Ni()&&this.Jd.W().handleScale.axisPressedMouseMove.time&&r.ed(e.localX)}rv(e){this.lv(e)}uv(){this.Dm=!1;let e=this.Jd.$t();e.St().Ni()&&!this.Jd.W().handleScale.axisPressedMouseMove.time||e.rd()}ov(){this.uv()}Uf(){this.Jd.W().handleScale.axisDoubleClickReset.time&&this.Jd.$t().Kn()}Wf(){this.Uf()}Jf(){this.Jd.$t().W().handleScale.axisPressedMouseMove.time&&this.Sp(1)}Tv(){this.Sp(0)}_m(){return this.Lv}Em(){return this.Vm}Nm(e,r,l){n(this.Lv,e)||(this.Lv=e,this.Wv=!0,this.Kv.resizeCanvasElement(e),this.Gv.resizeCanvasElement(e),this.Wv=!1,this.Xv.style.width=`${e.width}px`,this.Xv.style.height=`${e.height}px`,this.Vm.m(e)),null!==this.Pm&&this.Pm.up(t({width:r,height:e.height})),null!==this.Rm&&this.Rm.up(t({width:l,height:e.height}))}Fm(){let e=this.Wm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.jm)}bt(){this.Jd.$t().St().ja()}Mp(){return this.Kv.bitmapSize}xp(e,r,l){let a=this.Mp();a.width>0&&a.height>0&&e.drawImage(this.Kv.canvasElement,r,l)}fp(e){if(0===e)return;if(1!==e){this.Kv.applySuggestedBitmapSize();let r=s(this.Kv);null!==r&&(r.useBitmapCoordinateSpace(e=>{this.pp(e),this.Ae(e),this.Hm(r,i9)}),this.bp(r),this.Hm(r,i6)),null!==this.Pm&&this.Pm.fp(e),null!==this.Rm&&this.Rm.fp(e)}this.Gv.applySuggestedBitmapSize();let r=s(this.Gv);null!==r&&(r.useBitmapCoordinateSpace(({context:e,bitmapSize:r})=>{e.clearRect(0,0,r.width,r.height)}),this.$m([...this.Jd.$t().wt(),this.Jd.$t().Yc()],r),this.Hm(r,i8))}Hm(e,r){let l=this.Jd.$t().wt();for(let a of l)iV(r,r=>iW(r,e,!1,void 0),a,void 0);for(let a of l)iV(r,r=>iB(r,e,!1,void 0),a,void 0)}pp({context:e,bitmapSize:r}){tN(e,0,0,r.width,r.height,this.Jd.$t().md())}Ae({context:e,bitmapSize:r,verticalPixelRatio:l}){if(this.Jd.W().timeScale.borderVisible){e.fillStyle=this.Um();let a=Math.max(1,Math.floor(this.Wm().C*l));e.fillRect(0,0,r.width,a)}}bp(e){let r=this.Jd.$t().St(),l=r.ja();if(!l||0===l.length)return;let a=this.U_.maxTickMarkWeight(l),h=this.Wm(),o=r.W();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:e,horizontalPixelRatio:r,verticalPixelRatio:a})=>{e.strokeStyle=this.Um(),e.fillStyle=this.Um();let o=Math.max(1,Math.floor(r)),c=Math.floor(.5*r);e.beginPath();let u=Math.round(h.T*a);for(let a=l.length;a--;){let h=Math.round(l[a].coord*r);e.rect(h-c,0,o,u)}e.fill()}),e.useMediaCoordinateSpace(({context:e})=>{let r=h.C+h.T+h.L+h.P/2;for(let h of(e.textAlign="center",e.textBaseline="middle",e.fillStyle=this.$(),e.font=this.op(),l))if(h.weight<a){let l=h.needAlignCoordinate?this.qm(e,h.coord,h.label):h.coord;e.fillText(h.label,l,r)}for(let h of(this.Jd.W().timeScale.allowBoldLabels&&(e.font=this.Ym()),l))if(h.weight>=a){let l=h.needAlignCoordinate?this.qm(e,h.coord,h.label):h.coord;e.fillText(h.label,l,r)}})}qm(e,r,l){let a=this.Nv.xi(e,l),h=Math.floor(r-a/2)+.5;return h<0?r+=Math.abs(0-h):h+a>this.Lv.width&&(r-=Math.abs(this.Lv.width-(h+a))),r}$m(e,r){let l=this.Wm();for(let a of e)for(let e of a.Qi())e.gt().X(r,l)}Um(){return this.Jd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}op(){return td(this.j(),this.cn.fontFamily)}Ym(){return td(this.j(),this.cn.fontFamily,"bold")}Wm(){null===this.k&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new ed,jm:0});let e=this.k,r=this.op();if(e.R!==r){let l=this.j();e.P=l,e.R=r,e.L=3*l/12,e.B=3*l/12,e.ji=9*l/12,e.N=0,e.jm=4*l/12,e.Wi.ir()}return this.k}Sp(e){this.Xv.style.cursor=1===e?"ew-resize":"default"}Im(){let e=this.Jd.$t(),r=e.W();r.leftPriceScale.visible||null===this.Pm||(this.Om.removeChild(this.Pm.hp()),this.Pm.S(),this.Pm=null),r.rightPriceScale.visible||null===this.Rm||(this.Bm.removeChild(this.Rm.hp()),this.Rm.S(),this.Rm=null);let l={_d:this.Jd.$t()._d()},a=()=>r.leftPriceScale.borderVisible&&e.St().W().borderVisible,h=()=>e.md();r.leftPriceScale.visible&&null===this.Pm&&(this.Pm=new i3("left",r,l,a,h),this.Om.appendChild(this.Pm.hp())),r.rightPriceScale.visible&&null===this.Rm&&(this.Rm=new i3("right",r,l,a,h),this.Bm.appendChild(this.Rm.hp()))}}let st=!!iR&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(e=>e.brand.includes("Chromium"))&&!!iR&&((null===(v=null==navigator?void 0:navigator.userAgentData)||void 0===v?void 0:v.platform)?"Windows"===navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0);function se(e){return!!(e.handleScroll.mouseWheel||e.handleScale.mouseWheel)}function si(e,r){var l={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>r.indexOf(a)&&(l[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var h=0;for(a=Object.getOwnPropertySymbols(e);h<a.length;h++)0>r.indexOf(a[h])&&Object.prototype.propertyIsEnumerable.call(e,a[h])&&(l[a[h]]=e[a[h]])}return l}function ss(e,r,l,a){let h=l.value,o={se:r,ot:e,Vt:[h,h,h,h],Ib:a};return void 0!==l.color&&(o.V=l.color),o}function sn(e,r,l,a){let h=l.value,o={se:r,ot:e,Vt:[h,h,h,h],Ib:a};return void 0!==l.lineColor&&(o.lt=l.lineColor),void 0!==l.topColor&&(o.Ts=l.topColor),void 0!==l.bottomColor&&(o.Ps=l.bottomColor),o}function sr(e,r,l,a){let h=l.value,o={se:r,ot:e,Vt:[h,h,h,h],Ib:a};return void 0!==l.topLineColor&&(o.Pe=l.topLineColor),void 0!==l.bottomLineColor&&(o.Re=l.bottomLineColor),void 0!==l.topFillColor1&&(o.Se=l.topFillColor1),void 0!==l.topFillColor2&&(o.ke=l.topFillColor2),void 0!==l.bottomFillColor1&&(o.ye=l.bottomFillColor1),void 0!==l.bottomFillColor2&&(o.Ce=l.bottomFillColor2),o}function sl(e,r,l,a){let h={se:r,ot:e,Vt:[l.open,l.high,l.low,l.close],Ib:a};return void 0!==l.color&&(h.V=l.color),h}function sa(e,r,l,a){let h={se:r,ot:e,Vt:[l.open,l.high,l.low,l.close],Ib:a};return void 0!==l.color&&(h.V=l.color),void 0!==l.borderColor&&(h.Ot=l.borderColor),void 0!==l.wickColor&&(h.Zh=l.wickColor),h}function sh(e,r,l,a,h){let o=F(h)(l),c=o[o.length-1],{time:u,color:d}=l;return{se:r,ot:e,Vt:[c,Math.max(...o),Math.min(...o),c],Ib:a,He:si(l,["time","color"]),V:d}}function so(e){return void 0!==e.Vt}function sc(e,r){return void 0!==r.customValues&&(e.Wb=r.customValues),e}function su(e){return(r,l,a,h,o,c)=>(c?c(a):void 0===a.open&&void 0===a.value)?sc({ot:r,se:l,Ib:h},a):sc(e(r,l,a,h,o),a)}function sd(e){return({Candlestick:su(sa),Bar:su(sl),Area:su(sn),Baseline:su(sr),Histogram:su(ss),Line:su(ss),Custom:su(sh)})[e]}function sf(e){return{se:0,jb:new Map,ha:e}}function sm(e,r){if(void 0!==e&&0!==e.length)return{Hb:r.key(e[0].ot),$b:r.key(e[e.length-1].ot)}}function sg(e){let r;return e.forEach(e=>{void 0===r&&(r=e.Ib)}),F(r)}function sp(e,r){e.se=r,e.jb.forEach(e=>{e.se=r})}function sx(e){let r={value:e.Vt[3],time:e.Ib};return void 0!==e.Wb&&(r.customValues=e.Wb),r}function sv(e){let r=sx(e);return void 0!==e.V&&(r.color=e.V),r}function sb(e){let r=sx(e);return void 0!==e.lt&&(r.lineColor=e.lt),void 0!==e.Ts&&(r.topColor=e.Ts),void 0!==e.Ps&&(r.bottomColor=e.Ps),r}function sy(e){let r=sx(e);return void 0!==e.Pe&&(r.topLineColor=e.Pe),void 0!==e.Re&&(r.bottomLineColor=e.Re),void 0!==e.Se&&(r.topFillColor1=e.Se),void 0!==e.ke&&(r.topFillColor2=e.ke),void 0!==e.ye&&(r.bottomFillColor1=e.ye),void 0!==e.Ce&&(r.bottomFillColor2=e.Ce),r}function sw(e){let r={open:e.Vt[0],high:e.Vt[1],low:e.Vt[2],close:e.Vt[3],time:e.Ib};return void 0!==e.Wb&&(r.customValues=e.Wb),r}function sN(e){let r=sw(e);return void 0!==e.V&&(r.color=e.V),r}function sj(e){let r=sw(e),{V:l,Ot:a,Zh:h}=e;return void 0!==l&&(r.color=l),void 0!==a&&(r.borderColor=a),void 0!==h&&(r.wickColor=h),r}function sS(e){return({Area:sb,Line:sv,Baseline:sy,Histogram:sv,Bar:sN,Candlestick:sj,Custom:s_})[e]}function s_(e){let r=e.Ib;return Object.assign(Object.assign({},e.He),{time:r})}let sM={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},sE={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},sk={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:tu,attributionLogo:!0},sC={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},sL={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},sz={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:tu,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function sR(e,r,l){let a=Object.assign({time:r},si(e,["time","originalTime"]));return void 0!==l&&(a.originalTime=l),a}let sP={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class sT{constructor(e){this.Eh=e}applyOptions(e){this.Eh.Hh(e)}options(){return this.Eh.W()}ow(){return this.Eh}}Object.assign(Object.assign({},{title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}}),{color:"#2196f3"});let sO=[{value:"1m",label:"1m"},{value:"5m",label:"5m"},{value:"15m",label:"15m"},{value:"1h",label:"1h"},{value:"4h",label:"4h"},{value:"1d",label:"1d"}];function sD({agentId:e}){let r=(0,y.useRef)(null);(0,y.useRef)(null),(0,y.useRef)(null);let[l,a]=(0,y.useState)("1h"),[h,o]=(0,y.useState)([]),[c,u]=(0,y.useState)(null),[d,f]=(0,y.useState)(!0),{isConnected:m,priceData:g}=R(e),p=e=>0===e?"0":e<.001?e.toExponential(4):e.toFixed(6),x=e=>e>=1e6?`${(e/1e6).toFixed(2)}M`:e>=1e3?`${(e/1e3).toFixed(2)}K`:e.toFixed(0);return(0,b.jsxs)("div",{className:"bg-gray-800 rounded-xl border border-gray-700 overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-4 sm:p-6 border-b border-gray-700",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[b.jsx("h3",{className:"text-lg font-bold text-white",children:"Price Chart"}),b.jsx(P,{size:"sm"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[b.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Price"}),(0,b.jsxs)("div",{className:"text-lg sm:text-xl font-bold text-white",children:[c?p(c.currentPrice):"..."," SOL"]}),c&&0!==c.priceChangePercent24h&&(0,b.jsxs)("div",{className:`text-xs font-semibold ${c.priceChangePercent24h>=0?"text-green-400":"text-red-400"}`,children:[c.priceChangePercent24h>=0?"+":"",c.priceChangePercent24h.toFixed(2),"% (24h)"]})]}),(0,b.jsxs)("div",{children:[b.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Market Cap"}),(0,b.jsxs)("div",{className:"text-lg sm:text-xl font-bold text-purple-400",children:["$",c?x(c.marketCap):"..."]})]}),(0,b.jsxs)("div",{children:[b.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"24h Change"}),(0,b.jsxs)("div",{className:`text-lg sm:text-xl font-bold ${c&&c.priceChange24h>=0?"text-green-400":"text-red-400"}`,children:[c&&c.priceChange24h>=0?"+":"",c?p(Math.abs(c.priceChange24h)):"..."," SOL"]})]}),(0,b.jsxs)("div",{children:[b.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Total Trades"}),b.jsx("div",{className:"text-lg sm:text-xl font-bold text-white",children:c?x(c.totalTrades):"..."})]})]})]}),b.jsx("div",{className:"px-4 sm:px-6 py-3 border-b border-gray-700 flex gap-2 overflow-x-auto",children:sO.map(e=>b.jsx("button",{onClick:()=>a(e.value),className:`px-3 py-1.5 rounded-lg font-semibold text-sm transition whitespace-nowrap ${l===e.value?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:e.label},e.value))}),(0,b.jsxs)("div",{className:"relative",children:[d&&b.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800/50 z-10",children:b.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-purple-500 border-t-transparent rounded-full"})}),b.jsx("div",{ref:r,className:"w-full"})]}),(0,b.jsxs)("div",{className:"p-4 border-t border-gray-700 flex gap-6 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[b.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),b.jsx("span",{className:"text-gray-400",children:"Bullish (Buy Pressure)"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[b.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),b.jsx("span",{className:"text-gray-400",children:"Bearish (Sell Pressure)"})]})]})]})}var s$=l(52577),sA=l(2718),sI=l.n(sA),sW=l(84653),sB=l.n(sW),sV=l(61092),sF=l.n(sV),sK=l(65684),sH=l.n(sK);function sX(e,r){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),l.push.apply(l,a)}return l}function sU(e){for(var r=1;r<arguments.length;r++){var l=null!=arguments[r]?arguments[r]:{};r%2?sX(Object(l),!0).forEach(function(r){sF()(e,r,l[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):sX(Object(l)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(l,r))})}return e}var sG={},sJ=["language","children","style","customStyle","codeTagProps","useInlineStyles","showLineNumbers","showInlineLineNumbers","startingLineNumber","lineNumberContainerStyle","lineNumberStyle","wrapLines","wrapLongLines","lineProps","renderer","PreTag","CodeTag","code","astGenerator"];function sY(e,r){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),l.push.apply(l,a)}return l}function sq(e){for(var r=1;r<arguments.length;r++){var l=null!=arguments[r]?arguments[r]:{};r%2?sY(Object(l),!0).forEach(function(r){sF()(e,r,l[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):sY(Object(l)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(l,r))})}return e}var sZ=/\n/g;function sQ(e){var r,l,a,h,o=e.codeString,c=e.codeStyle,u=e.containerStyle,d=e.numberStyle,f=e.startingLineNumber;return w().createElement("code",{style:Object.assign({},c,void 0===u?{float:"left",paddingRight:"10px"}:u)},(l=(r={lines:o.replace(/\n$/,"").split("\n"),style:void 0===d?{}:d,startingLineNumber:f}).lines,a=r.startingLineNumber,h=r.style,l.map(function(e,r){var l=r+a;return w().createElement("span",{key:"line-".concat(r),className:"react-syntax-highlighter-line-number",style:"function"==typeof h?h(l):h},"".concat(l,"\n"))})))}function s0(e,r){return{type:"element",tagName:"span",properties:{key:"line-number--".concat(e),className:["comment","linenumber","react-syntax-highlighter-line-number"],style:r},children:[{type:"text",value:e}]}}function s1(e,r,l){var a={display:"inline-block",minWidth:"".concat(l.toString().length,".25em"),paddingRight:"1em",textAlign:"right",userSelect:"none"},h="function"==typeof e?e(r):e;return sq(sq({},a),h)}function s2(e){var r=e.children,l=e.lineNumber,a=e.lineNumberStyle,h=e.largestLineNumber,o=e.showInlineLineNumbers,c=e.lineProps,u=void 0===c?{}:c,d=e.className,f=void 0===d?[]:d,m=e.showLineNumbers,g=e.wrapLongLines,p=e.wrapLines,x=void 0!==p&&p?sq({},"function"==typeof u?u(l):u):{};if(x.className=x.className?[].concat(sB()(x.className.trim().split(/\s+/)),sB()(f)):f,l&&o){var v=s1(a,l,h);r.unshift(s0(l,v))}return g&m&&(x.style=sq({display:"flex"},x.style)),{type:"element",tagName:"span",properties:x,children:r}}function s4(e){var r=e.rows,l=e.stylesheet,a=e.useInlineStyles;return r.map(function(e,r){return function e(r){var l=r.node,a=r.stylesheet,h=r.style,o=r.useInlineStyles,c=r.key,u=l.properties,d=l.type,f=l.tagName,m=l.value;if("text"===d)return m;if(f){var g,p,x=(g=0,function(r){return g+=1,r.map(function(r,l){return e({node:r,stylesheet:a,useInlineStyles:o,key:"code-segment-".concat(g,"-").concat(l)})})});if(o){var v=Object.keys(a).reduce(function(e,r){return r.split(".").forEach(function(r){e.includes(r)||e.push(r)}),e},[]),b=u.className&&u.className.includes("token")?["token"]:[],y=u.className&&b.concat(u.className.filter(function(e){return!v.includes(e)}));p=sU(sU({},u),{},{className:y.join(" ")||void 0,style:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0;return(function(e){if(0===e.length||1===e.length)return e;var r,l=e.join(".");return sG[l]||(sG[l]=0===(r=e.length)||1===r?e:2===r?[e[0],e[1],"".concat(e[0],".").concat(e[1]),"".concat(e[1],".").concat(e[0])]:3===r?[e[0],e[1],e[2],"".concat(e[0],".").concat(e[1]),"".concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[0]),"".concat(e[1],".").concat(e[2]),"".concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[1],".").concat(e[0])]:r>=4?[e[0],e[1],e[2],e[3],"".concat(e[0],".").concat(e[1]),"".concat(e[0],".").concat(e[2]),"".concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[0]),"".concat(e[1],".").concat(e[2]),"".concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[1]),"".concat(e[2],".").concat(e[3]),"".concat(e[3],".").concat(e[0]),"".concat(e[3],".").concat(e[1]),"".concat(e[3],".").concat(e[2]),"".concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[1],".").concat(e[3]),"".concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[2],".").concat(e[3]),"".concat(e[0],".").concat(e[3],".").concat(e[1]),"".concat(e[0],".").concat(e[3],".").concat(e[2]),"".concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[1],".").concat(e[2],".").concat(e[3]),"".concat(e[1],".").concat(e[3],".").concat(e[0]),"".concat(e[1],".").concat(e[3],".").concat(e[2]),"".concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[0],".").concat(e[3]),"".concat(e[2],".").concat(e[1],".").concat(e[0]),"".concat(e[2],".").concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[3],".").concat(e[0]),"".concat(e[2],".").concat(e[3],".").concat(e[1]),"".concat(e[3],".").concat(e[0],".").concat(e[1]),"".concat(e[3],".").concat(e[0],".").concat(e[2]),"".concat(e[3],".").concat(e[1],".").concat(e[0]),"".concat(e[3],".").concat(e[1],".").concat(e[2]),"".concat(e[3],".").concat(e[2],".").concat(e[0]),"".concat(e[3],".").concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[1],".").concat(e[2],".").concat(e[3]),"".concat(e[0],".").concat(e[1],".").concat(e[3],".").concat(e[2]),"".concat(e[0],".").concat(e[2],".").concat(e[1],".").concat(e[3]),"".concat(e[0],".").concat(e[2],".").concat(e[3],".").concat(e[1]),"".concat(e[0],".").concat(e[3],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[3],".").concat(e[2],".").concat(e[1]),"".concat(e[1],".").concat(e[0],".").concat(e[2],".").concat(e[3]),"".concat(e[1],".").concat(e[0],".").concat(e[3],".").concat(e[2]),"".concat(e[1],".").concat(e[2],".").concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[2],".").concat(e[3],".").concat(e[0]),"".concat(e[1],".").concat(e[3],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[3],".").concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[0],".").concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[0],".").concat(e[3],".").concat(e[1]),"".concat(e[2],".").concat(e[1],".").concat(e[0],".").concat(e[3]),"".concat(e[2],".").concat(e[1],".").concat(e[3],".").concat(e[0]),"".concat(e[2],".").concat(e[3],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[3],".").concat(e[1],".").concat(e[0]),"".concat(e[3],".").concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[3],".").concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[3],".").concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[3],".").concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[3],".").concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[3],".").concat(e[2],".").concat(e[1],".").concat(e[0])]:void 0),sG[l]})(e.filter(function(e){return"token"!==e})).reduce(function(e,r){return sU(sU({},e),l[r])},r)}(u.className,Object.assign({},u.style,void 0===h?{}:h),a)})}else p=sU(sU({},u),{},{className:u.className.join(" ")});var N=x(l.children);return w().createElement(f,sH()({key:c},p),N)}}({node:e,stylesheet:l,useInlineStyles:a,key:"code-segment-".concat(r)})})}function s3(e){return e&&void 0!==e.highlightAuto}var s5=l(11405),s6=(a={},function(e){var r,l,h=e.language,o=e.children,c=e.style,u=void 0===c?a:c,d=e.customStyle,f=void 0===d?{}:d,m=e.codeTagProps,g=void 0===m?{className:h?"language-".concat(h):void 0,style:sq(sq({},u['code[class*="language-"]']),u['code[class*="language-'.concat(h,'"]')])}:m,p=e.useInlineStyles,x=void 0===p||p,v=e.showLineNumbers,b=void 0!==v&&v,y=e.showInlineLineNumbers,N=void 0===y||y,j=e.startingLineNumber,S=void 0===j?1:j,_=e.lineNumberContainerStyle,M=e.lineNumberStyle,E=void 0===M?{}:M,k=e.wrapLines,C=e.wrapLongLines,L=void 0!==C&&C,z=e.lineProps,R=e.renderer,P=e.PreTag,T=void 0===P?"pre":P,O=e.CodeTag,D=void 0===O?"code":O,$=e.code,A=void 0===$?(Array.isArray(o)?o[0]:o)||"":$,I=e.astGenerator,W=sI()(e,sJ);I=I||s5;var B=b?w().createElement(sQ,{containerStyle:_,codeStyle:g.style||{},numberStyle:E,startingLineNumber:S,codeString:A}):null,V=u.hljs||u['pre[class*="language-"]']||{backgroundColor:"#fff"},F=s3(I)?"hljs":"prismjs",K=x?Object.assign({},W,{style:Object.assign({},V,f)}):Object.assign({},W,{className:W.className?"".concat(F," ").concat(W.className):F,style:Object.assign({},f)});if(L?g.style=sq({whiteSpace:"pre-wrap"},g.style):g.style=sq({whiteSpace:"pre"},g.style),!I)return w().createElement(T,K,B,w().createElement(D,g,A));(void 0===k&&R||L)&&(k=!0),R=R||s4;var H=[{type:"text",value:A}],X=function(e){var r=e.astGenerator,l=e.language,a=e.code,h=e.defaultCodeValue;if(s3(r)){var o=-1!==r.listLanguages().indexOf(l);return"text"===l?{value:h,language:"text"}:o?r.highlight(l,a):r.highlightAuto(a)}try{return l&&"text"!==l?{value:r.highlight(a,l)}:{value:h}}catch(e){return{value:h}}}({astGenerator:I,language:h,code:A,defaultCodeValue:H});null===X.language&&(X.value=H);var U=S+(null!==(r=null===(l=A.match(/\n/g))||void 0===l?void 0:l.length)&&void 0!==r?r:0),G=function(e,r,l,a,h,o,c,u,d){var f,m=function e(r){for(var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],h=0;h<r.length;h++){var o=r[h];if("text"===o.type)a.push(s2({children:[o],className:sB()(new Set(l))}));else if(o.children){var c=l.concat(o.properties.className);e(o.children,c).forEach(function(e){return a.push(e)})}}return a}(e.value),g=[],p=-1,x=0;function v(e,o){var f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return r||f.length>0?function(e,o){var f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return s2({children:e,lineNumber:o,lineNumberStyle:u,largestLineNumber:c,showInlineLineNumbers:h,lineProps:l,className:f,showLineNumbers:a,wrapLongLines:d,wrapLines:r})}(e,o,f):function(e,r){if(a&&r&&h){var l=s1(u,r,c);e.unshift(s0(r,l))}return e}(e,o)}for(;x<m.length;)!function(){var e=m[x],r=e.children[0].value;if(r.match(sZ)){var l=r.split("\n");l.forEach(function(r,h){var c=a&&g.length+o,u={type:"text",value:"".concat(r,"\n")};if(0===h){var d=v(m.slice(p+1,x).concat(s2({children:[u],className:e.properties.className})),c);g.push(d)}else if(h===l.length-1){var f=m[x+1]&&m[x+1].children&&m[x+1].children[0],b={type:"text",value:"".concat(r)};if(f){var y=s2({children:[b],className:e.properties.className});m.splice(x+1,0,y)}else{var w=v([b],c,e.properties.className);g.push(w)}}else{var N=v([u],c,e.properties.className);g.push(N)}}),p=x}x++}();if(p!==m.length-1){var b=m.slice(p+1,m.length);if(b&&b.length){var y=v(b,a&&g.length+o);g.push(y)}}return r?g:(f=[]).concat.apply(f,g)}(X,k,void 0===z?{}:z,b,N,S,U,E,L);return w().createElement(T,K,w().createElement(D,g,!N&&B,R({rows:G,stylesheet:u,useInlineStyles:x})))});s6.registerLanguage=s5.registerLanguage;var s8=l(98290);let s9=l.n(s8)(),s7={hljs:{display:"block",overflowX:"auto",padding:"0.5em",color:"#abb2bf",background:"#282c34"},"hljs-comment":{color:"#5c6370",fontStyle:"italic"},"hljs-quote":{color:"#5c6370",fontStyle:"italic"},"hljs-doctag":{color:"#c678dd"},"hljs-keyword":{color:"#c678dd"},"hljs-formula":{color:"#c678dd"},"hljs-section":{color:"#e06c75"},"hljs-name":{color:"#e06c75"},"hljs-selector-tag":{color:"#e06c75"},"hljs-deletion":{color:"#e06c75"},"hljs-subst":{color:"#e06c75"},"hljs-literal":{color:"#56b6c2"},"hljs-string":{color:"#98c379"},"hljs-regexp":{color:"#98c379"},"hljs-addition":{color:"#98c379"},"hljs-attribute":{color:"#98c379"},"hljs-meta-string":{color:"#98c379"},"hljs-built_in":{color:"#e6c07b"},"hljs-class .hljs-title":{color:"#e6c07b"},"hljs-attr":{color:"#d19a66"},"hljs-variable":{color:"#d19a66"},"hljs-template-variable":{color:"#d19a66"},"hljs-type":{color:"#d19a66"},"hljs-selector-class":{color:"#d19a66"},"hljs-selector-attr":{color:"#d19a66"},"hljs-selector-pseudo":{color:"#d19a66"},"hljs-number":{color:"#d19a66"},"hljs-symbol":{color:"#61aeee"},"hljs-bullet":{color:"#61aeee"},"hljs-link":{color:"#61aeee",textDecoration:"underline"},"hljs-meta":{color:"#61aeee"},"hljs-selector-id":{color:"#61aeee"},"hljs-title":{color:"#61aeee"},"hljs-emphasis":{fontStyle:"italic"},"hljs-strong":{fontWeight:"bold"}};s6.registerLanguage("typescript",s9);let nt=process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001",ne=`// 🤖 Your Custom Trading Strategy
// This code runs when your agent evaluates trading opportunities

interface MarketData {
  price: number;
  volume24h: number;
  priceChange24h: number;
  liquidity: number;
}

interface Position {
  amount: number;
  entryPrice: number;
}

// Your strategy function - return true to BUY, false to SKIP
export function shouldBuy(market: MarketData, position: Position | null): boolean {
  // Example: Buy if price dropped >5% and volume is high
  if (market.priceChange24h < -5 && market.volume24h > 100000) {
    return true;
  }

  // Add your own logic here!
  return false;
}

// Your sell strategy - return true to SELL, false to HOLD
export function shouldSell(market: MarketData, position: Position): boolean {
  const profit = ((market.price - position.entryPrice) / position.entryPrice) * 100;

  // Example: Take profit at +20% or stop loss at -10%
  if (profit > 20 || profit < -10) {
    return true;
  }

  return false;
}

// Risk management - how much SOL to trade (0.1 to 1.0)
export function calculatePositionSize(market: MarketData, availableBalance: number): number {
  // Start conservative
  return availableBalance * 0.1;
}`;function ni({agentId:e,initialCode:r,onSave:l}){let[a,h]=(0,y.useState)(r||ne),[o,c]=(0,y.useState)(!1),[u,d]=(0,y.useState)(!1),[f,m]=(0,y.useState)(!1),[g,p]=(0,y.useState)(!1),[x,v]=(0,y.useState)(null),[w,N]=(0,y.useState)(null),j=async()=>{d(!0);try{(await E.Z.post(`${nt}/strategy/save`,{agentId:e,name:"Custom Strategy",description:"User-defined trading strategy",code:a})).data.success&&(alert("✅ Strategy saved! Your agent will use this code on next trade."),c(!1),l&&await l(a))}catch(r){let e=r.response?.data?.details||[];alert("❌ Failed to save:\n"+(e.length>0?`Validation errors:
${e.join("\n")}`:r.response?.data?.error||r.message))}finally{d(!1)}},S=async()=>{m(!0),v(null);try{let e=await E.Z.post(`${nt}/strategy/test`,{code:a,marketData:{price:.5,volume24h:15e4,priceChange24h:-7.5,liquidity:5e4}});e.data.success&&!e.data.result.error?v({success:!0,shouldBuy:e.data.result.shouldBuy,shouldSell:e.data.result.shouldSell,positionSize:e.data.result.positionSize,market:e.data.result.market}):v({success:!1,error:e.data.result.error||"Unknown error"})}catch(e){v({success:!1,error:e.response?.data?.error||e.message})}finally{m(!1)}},_=async()=>{p(!0),N(null);try{let r=await E.Z.post(`${nt}/strategy/backtest`,{agentId:e,code:a});r.data.success&&N(r.data.results)}catch(e){N({error:e.response?.data?.error||e.message})}finally{p(!1)}},M=[{name:"\uD83D\uDCC8 Momentum Trader",desc:"Buy on strong upward momentum",code:`export function shouldBuy(market: MarketData): boolean {
  return market.priceChange24h > 10 && market.volume24h > 200000;
}`},{name:"\uD83D\uDD0D Value Hunter",desc:"Buy dips with good liquidity",code:`export function shouldBuy(market: MarketData): boolean {
  return market.priceChange24h < -15 && market.liquidity > 100000;
}`},{name:"⚡ Scalper",desc:"Quick profits on volatility",code:`export function shouldSell(market: MarketData, position: Position): boolean {
  const profit = ((market.price - position.entryPrice) / position.entryPrice) * 100;
  return profit > 3 || profit < -2; // Quick 3% profit or 2% stop
}`}];return(0,b.jsxs)("div",{className:"bg-gray-800 rounded-xl border border-gray-700 overflow-hidden",children:[b.jsx("div",{className:"bg-gradient-to-r from-purple-900/50 to-pink-900/50 p-4 border-b border-purple-500/50",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[b.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"⚡ Custom Trading Strategy"}),b.jsx("p",{className:"text-sm text-gray-300",children:"Write your own trading logic in TypeScript"})]}),b.jsx("div",{className:"flex gap-2",children:o?(0,b.jsxs)(b.Fragment,{children:[b.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold transition",children:"Cancel"}),b.jsx("button",{onClick:j,disabled:u,className:"px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 rounded-lg font-bold transition disabled:opacity-50",children:u?"Saving...":"\uD83D\uDCBE Save Strategy"})]}):b.jsx("button",{onClick:()=>c(!0),className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 rounded-lg font-bold transition",children:"✏️ Edit Code"})})]})}),b.jsx("div",{className:"p-6",children:o?(0,b.jsxs)("div",{className:"space-y-4",children:[b.jsx("textarea",{value:a,onChange:e=>h(e.target.value),className:"w-full h-96 bg-gray-900 text-white font-mono text-sm p-4 rounded-lg border border-gray-700 focus:border-purple-500 outline-none resize-none",spellCheck:!1}),(0,b.jsxs)("div",{className:"flex gap-3",children:[b.jsx("button",{onClick:S,disabled:f,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold transition disabled:opacity-50",children:f?"\uD83D\uDD04 Testing...":"\uD83E\uDDEA Test Strategy"}),b.jsx("button",{onClick:_,disabled:g,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg font-semibold transition disabled:opacity-50",children:g?"\uD83D\uDD04 Backtesting...":"\uD83D\uDCCA Backtest"}),b.jsx("button",{onClick:()=>h(ne),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold transition",children:"\uD83D\uDD04 Reset to Template"})]}),x&&b.jsx("div",{className:`rounded-lg p-4 border ${x.success?"bg-green-900/20 border-green-600/50":"bg-red-900/20 border-red-600/50"}`,children:x.success?(0,b.jsxs)("div",{children:[b.jsx("h4",{className:"font-bold text-green-400 mb-3",children:"✅ Test Results"}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-gray-400",children:"Market Price:"}),(0,b.jsxs)("span",{className:"text-white",children:["$",x.market.price]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-gray-400",children:"Volume 24h:"}),b.jsx("span",{className:"text-white",children:x.market.volume24h.toLocaleString()})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-gray-400",children:"Price Change:"}),(0,b.jsxs)("span",{className:x.market.priceChange24h>=0?"text-green-400":"text-red-400",children:[x.market.priceChange24h.toFixed(2),"%"]})]}),(0,b.jsxs)("div",{className:"border-t border-gray-700 pt-2 mt-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-gray-400",children:"Should Buy:"}),b.jsx("span",{className:x.shouldBuy?"text-green-400 font-bold":"text-gray-500",children:x.shouldBuy?"YES ✓":"NO"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-gray-400",children:"Should Sell:"}),b.jsx("span",{className:x.shouldSell?"text-red-400 font-bold":"text-gray-500",children:x.shouldSell?"YES ✓":"NO"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-gray-400",children:"Position Size:"}),(0,b.jsxs)("span",{className:"text-purple-400 font-bold",children:[x.positionSize.toFixed(4)," SOL"]})]})]})]})]}):(0,b.jsxs)("div",{children:[b.jsx("h4",{className:"font-bold text-red-400 mb-2",children:"❌ Test Failed"}),b.jsx("p",{className:"text-sm text-red-300",children:x.error})]})}),w&&b.jsx("div",{className:`rounded-lg p-4 border ${w.error?"bg-red-900/20 border-red-600/50":"bg-purple-900/20 border-purple-600/50"}`,children:w.error?(0,b.jsxs)("div",{children:[b.jsx("h4",{className:"font-bold text-red-400 mb-2",children:"❌ Backtest Failed"}),b.jsx("p",{className:"text-sm text-red-300",children:w.error})]}):(0,b.jsxs)("div",{children:[b.jsx("h4",{className:"font-bold text-purple-400 mb-3",children:"\uD83D\uDCCA Backtest Results (100 periods)"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[b.jsx("div",{className:"text-gray-400 mb-1",children:"Total Trades"}),b.jsx("div",{className:"text-2xl font-bold text-white",children:w.totalTrades})]}),(0,b.jsxs)("div",{children:[b.jsx("div",{className:"text-gray-400 mb-1",children:"Win Rate"}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-green-400",children:[w.winRate.toFixed(1),"%"]})]}),(0,b.jsxs)("div",{children:[b.jsx("div",{className:"text-gray-400 mb-1",children:"Total Return"}),(0,b.jsxs)("div",{className:`text-2xl font-bold ${w.totalReturn>=0?"text-green-400":"text-red-400"}`,children:[w.totalReturn>=0?"+":"",w.totalReturn.toFixed(2),"%"]})]}),(0,b.jsxs)("div",{children:[b.jsx("div",{className:"text-gray-400 mb-1",children:"Wins"}),b.jsx("div",{className:"text-xl font-bold text-green-400",children:w.wins})]}),(0,b.jsxs)("div",{children:[b.jsx("div",{className:"text-gray-400 mb-1",children:"Losses"}),b.jsx("div",{className:"text-xl font-bold text-red-400",children:w.losses})]}),(0,b.jsxs)("div",{children:[b.jsx("div",{className:"text-gray-400 mb-1",children:"Avg Return/Trade"}),(0,b.jsxs)("div",{className:`text-xl font-bold ${w.avgReturn>=0?"text-green-400":"text-red-400"}`,children:[w.avgReturn.toFixed(2),"%"]})]})]})]})})]}):b.jsx("div",{className:"bg-gray-900 rounded-lg overflow-hidden",children:b.jsx(s6,{language:"typescript",style:s7,customStyle:{margin:0,padding:"1.5rem",background:"transparent",fontSize:"0.875rem"},children:a})})}),o&&(0,b.jsxs)("div",{className:"p-6 pt-0",children:[b.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:"\uD83D\uDCDA Quick Examples"}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:M.map(e=>(0,b.jsxs)("button",{onClick:()=>h(a+"\n\n"+e.code),className:"bg-gray-900 hover:bg-gray-800 p-4 rounded-lg border border-gray-700 hover:border-purple-500 transition text-left",children:[b.jsx("div",{className:"font-bold text-white mb-1",children:e.name}),b.jsx("div",{className:"text-xs text-gray-400",children:e.desc})]},e.name))})]}),b.jsx("div",{className:"bg-gray-900/50 p-4 border-t border-gray-700",children:(0,b.jsxs)("div",{className:"flex items-start gap-3 text-sm text-gray-400",children:[b.jsx("span",{className:"text-2xl",children:"\uD83D\uDCA1"}),(0,b.jsxs)("div",{children:[b.jsx("strong",{className:"text-white",children:"Pro Tips:"}),(0,b.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[b.jsx("li",{children:"Your code runs in a secure sandbox - no network access"}),b.jsx("li",{children:"Backtest your strategy before going live"}),b.jsx("li",{children:"Start conservative with position sizes"}),b.jsx("li",{children:"Use stop losses to protect your capital"})]})]})]})})]})}function ns({agentId:e,timeframe:r="1h"}){var l,a;let[h,o]=(0,y.useState)(null),[c,u]=(0,y.useState)(!0),[d,f]=(0,y.useState)(r),m=e=>e>70?"text-red-400":e<30?"text-green-400":"text-yellow-400",g=e=>"bullish"===e?"\uD83D\uDE80":"bearish"===e?"\uD83D\uDCC9":"➡️";if(c&&!h)return b.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6",children:(0,b.jsxs)("div",{className:"animate-pulse space-y-4",children:[b.jsx("div",{className:"h-6 bg-gray-800 rounded w-1/3"}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[...Array(6)].map((e,r)=>b.jsx("div",{className:"h-24 bg-gray-800 rounded"},r))})]})});if(!h?.latest)return(0,b.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6 text-center",children:[b.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCA"}),b.jsx("p",{className:"text-gray-400",children:"Insufficient data for technical indicators"}),b.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"More trading activity needed"})]});let{latest:p,signals:x}=h;return(0,b.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-purple-900/50 to-pink-900/50 p-6 border-b border-gray-800",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[b.jsx("h3",{className:"text-2xl font-bold text-white",children:"\uD83D\uDCCA Technical Indicators"}),(0,b.jsxs)("select",{value:d,onChange:e=>f(e.target.value),className:"bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm",children:[b.jsx("option",{value:"5m",children:"5 Minutes"}),b.jsx("option",{value:"15m",children:"15 Minutes"}),b.jsx("option",{value:"1h",children:"1 Hour"}),b.jsx("option",{value:"4h",children:"4 Hours"}),b.jsx("option",{value:"1d",children:"1 Day"})]})]}),b.jsx("div",{className:`bg-gradient-to-r ${"bullish"===(l=x.overallSentiment)?"from-green-600 to-emerald-600":"bearish"===l?"from-red-600 to-pink-600":"from-gray-600 to-slate-600"} rounded-lg p-4`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[b.jsx("div",{className:"text-sm text-white/80 mb-1",children:"Overall Sentiment"}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-white capitalize",children:[g(x.overallSentiment)," ",x.overallSentiment]})]}),(0,b.jsxs)("div",{className:"text-right",children:[b.jsx("div",{className:"text-sm text-white/80",children:"Signal Breakdown"}),(0,b.jsxs)("div",{className:"flex gap-4 mt-1",children:[(0,b.jsxs)("span",{className:"text-white font-semibold",children:["\uD83D\uDFE2 ",x.buySignals]}),(0,b.jsxs)("span",{className:"text-white font-semibold",children:["\uD83D\uDD34 ",x.sellSignals]}),(0,b.jsxs)("span",{className:"text-white font-semibold",children:["⚪ ",x.neutralSignals]})]})]})]})})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[b.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"RSI (14)"}),b.jsx("div",{className:`text-3xl font-bold ${m(p.rsi.value)} mb-2`,children:p.rsi.value?.toFixed(2)||"N/A"}),b.jsx("div",{className:"text-sm text-gray-300",children:"overbought"===(a=p.rsi.signal)?"⚠️ Overbought":"oversold"===a?"\uD83D\uDCB0 Oversold":"➡️ Neutral"}),b.jsx("div",{className:"mt-2 w-full bg-gray-700 rounded-full h-2",children:b.jsx("div",{className:`h-2 rounded-full ${m(p.rsi.value)}`,style:{width:`${p.rsi.value||0}%`}})})]}),(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[b.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"MACD"}),(0,b.jsxs)("div",{className:`text-3xl font-bold mb-2 ${"bullish"===p.macd.trend?"text-green-400":"bearish"===p.macd.trend?"text-red-400":"text-gray-400"}`,children:[g(p.macd.trend)," ",p.macd.trend]}),(0,b.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-gray-400",children:"MACD:"}),b.jsx("span",{className:"text-white",children:p.macd.macd?.toFixed(4)||"N/A"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-gray-400",children:"Signal:"}),b.jsx("span",{className:"text-white",children:p.macd.signal?.toFixed(4)||"N/A"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-gray-400",children:"Histogram:"}),b.jsx("span",{className:p.macd.histogram>0?"text-green-400":"text-red-400",children:p.macd.histogram?.toFixed(4)||"N/A"})]})]})]}),(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[b.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Bollinger Bands"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[b.jsx("span",{className:"text-gray-400",children:"Upper:"}),b.jsx("span",{className:"text-red-400",children:p.bollingerBands.upper?.toFixed(6)||"N/A"})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[b.jsx("span",{className:"text-gray-400",children:"Middle:"}),b.jsx("span",{className:"text-yellow-400",children:p.bollingerBands.middle?.toFixed(6)||"N/A"})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[b.jsx("span",{className:"text-gray-400",children:"Lower:"}),b.jsx("span",{className:"text-green-400",children:p.bollingerBands.lower?.toFixed(6)||"N/A"})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm pt-2 border-t border-gray-700",children:[b.jsx("span",{className:"text-gray-400",children:"%B:"}),(0,b.jsxs)("span",{className:`font-semibold ${p.bollingerBands.percentB<.2?"text-green-400":p.bollingerBands.percentB>.8?"text-red-400":"text-yellow-400"}`,children:[(100*p.bollingerBands.percentB)?.toFixed(1)||"N/A","%"]})]})]})]}),(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[b.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"ATR (Volatility)"}),b.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:p.atr?.toFixed(6)||"N/A"}),b.jsx("div",{className:"text-sm text-gray-300",children:p.atr>1e-5?"⚡ High Volatility":"\uD83D\uDE34 Low Volatility"})]}),(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[b.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"On-Balance Volume"}),b.jsx("div",{className:"text-2xl font-bold text-blue-400 mb-2",children:p.obv?.toLocaleString()||"N/A"}),b.jsx("div",{className:"text-sm text-gray-300",children:"Volume Trend Indicator"})]}),(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[b.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"VWAP"}),b.jsx("div",{className:"text-2xl font-bold text-cyan-400 mb-2",children:p.vwap?.toFixed(6)||"N/A"}),b.jsx("div",{className:"text-sm text-gray-300",children:"Volume Weighted Avg"})]}),(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 md:col-span-2 lg:col-span-3",children:[b.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Stochastic Oscillator"}),(0,b.jsxs)("div",{className:"flex gap-8",children:[(0,b.jsxs)("div",{children:[b.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"%K"}),b.jsx("div",{className:"text-2xl font-bold text-purple-400",children:p.stochastic.k?.toFixed(2)||"N/A"})]}),(0,b.jsxs)("div",{children:[b.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"%D"}),b.jsx("div",{className:"text-2xl font-bold text-pink-400",children:p.stochastic.d?.toFixed(2)||"N/A"})]}),(0,b.jsxs)("div",{className:"flex-1",children:[b.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Signal"}),(0,b.jsxs)("div",{className:"relative w-full bg-gray-700 rounded-full h-8",children:[p.stochastic.k&&b.jsx("div",{className:"absolute top-0 left-0 h-8 bg-purple-500/50 rounded-full transition-all",style:{width:`${p.stochastic.k}%`}}),b.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:b.jsx("span",{className:"text-xs text-white font-semibold",children:p.stochastic.k<20?"\uD83D\uDCB0 Oversold":p.stochastic.k>80?"⚠️ Overbought":"➡️ Neutral"})})]})]})]})]})]}),b.jsx("div",{className:"mt-6 bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:(0,b.jsxs)("div",{className:"text-xs text-gray-400",children:[b.jsx("strong",{className:"text-white",children:"Note:"})," Technical indicators are calculated based on historical price data (",h.dataPoints," data points). They should be used in conjunction with other analysis methods. Past performance does not guarantee future results."]})})]})]})}function nn({agentId:e}){var r,l,a,h,o;let[c,u]=(0,y.useState)(null),[d,f]=(0,y.useState)(!0),[m,g]=(0,y.useState)([]);return d&&!c?b.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6",children:(0,b.jsxs)("div",{className:"animate-pulse space-y-4",children:[b.jsx("div",{className:"h-6 bg-gray-800 rounded w-1/3"}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[...Array(6)].map((e,r)=>b.jsx("div",{className:"h-24 bg-gray-800 rounded"},r))})]})}):c?(0,b.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl overflow-hidden",children:[b.jsx("div",{className:"bg-gradient-to-r from-purple-900/50 to-blue-900/50 p-6 border-b border-gray-800",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[b.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Performance Metrics"}),(0,b.jsxs)("p",{className:"text-sm text-gray-300",children:["Last updated: ",new Date(c.lastUpdated).toLocaleString()]})]}),(0,b.jsxs)("div",{className:"text-right",children:[b.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Global Rank"}),(0,b.jsxs)("div",{className:`text-4xl font-bold ${1===(r=c.rank)?"text-yellow-400":r<=3?"text-gray-300":r<=10?"text-orange-400":"text-gray-400"}`,children:[1===(l=c.rank)?"\uD83E\uDD47":2===l?"\uD83E\uDD48":3===l?"\uD83E\uDD49":l<=10?"\uD83C\uDFC5":"\uD83D\uDCCA"," #",c.rank]}),0!==c.rankChange&&(0,b.jsxs)("div",{className:`text-sm mt-1 ${c.rankChange>0?"text-green-400":"text-red-400"}`,children:[(a=c.rankChange)>0?"⬆️":a<0?"⬇️":"➡️"," ",Math.abs(c.rankChange)]})]})]})}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[b.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Return on Investment"}),(0,b.jsxs)("div",{className:`text-3xl font-bold ${(h=c.roi)>20?"text-green-400":h>0?"text-green-300":h<-20?"text-red-400":h<0?"text-red-300":"text-gray-400"} mb-1`,children:[c.roi>0?"+":"",c.roi.toFixed(2),"%"]}),(0,b.jsxs)("div",{className:"text-xs text-gray-400",children:["Total P&L: ",parseFloat(c.totalProfitLoss).toFixed(4)," SOL"]})]}),(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[b.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Win Rate"}),(0,b.jsxs)("div",{className:`text-3xl font-bold ${(o=c.winRate)>=70?"text-green-400":o>=50?"text-yellow-400":o>=30?"text-orange-400":"text-red-400"} mb-1`,children:[c.winRate.toFixed(1),"%"]}),(0,b.jsxs)("div",{className:"text-xs text-gray-400",children:[c.winningTrades,"W / ",c.losingTrades,"L"]})]}),(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[b.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Total Trades"}),b.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-1",children:c.totalTrades}),b.jsx("div",{className:"text-xs text-gray-400",children:"All-time activity"})]}),(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[b.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Profit Factor"}),b.jsx("div",{className:`text-3xl font-bold mb-1 ${c.profitFactor>2?"text-green-400":c.profitFactor>1?"text-yellow-400":"text-red-400"}`,children:c.profitFactor.toFixed(2)}),(0,b.jsxs)("div",{className:"text-xs text-gray-400",children:["Avg Win: ",parseFloat(c.averageProfit).toFixed(4)," SOL"]})]}),(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[b.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Sharpe Ratio"}),b.jsx("div",{className:`text-3xl font-bold mb-1 ${c.sharpeRatio>2?"text-green-400":c.sharpeRatio>1?"text-yellow-400":"text-gray-400"}`,children:c.sharpeRatio.toFixed(2)}),b.jsx("div",{className:"text-xs text-gray-400",children:"Risk-adjusted returns"})]}),(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[b.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Max Drawdown"}),(0,b.jsxs)("div",{className:"text-3xl font-bold text-red-400 mb-1",children:["-",parseFloat(c.maxDrawdown).toFixed(4)]}),b.jsx("div",{className:"text-xs text-gray-400",children:"SOL"})]})]}),(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 mb-6",children:[b.jsx("div",{className:"text-sm text-gray-400 mb-3",children:"Trading Volume"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[b.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"24 Hours"}),(0,b.jsxs)("div",{className:"text-lg font-bold text-purple-400",children:[parseFloat(c.volume24h).toFixed(2)," SOL"]})]}),(0,b.jsxs)("div",{children:[b.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"7 Days"}),(0,b.jsxs)("div",{className:"text-lg font-bold text-blue-400",children:[parseFloat(c.volume7d).toFixed(2)," SOL"]})]}),(0,b.jsxs)("div",{children:[b.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"30 Days"}),(0,b.jsxs)("div",{className:"text-lg font-bold text-cyan-400",children:[parseFloat(c.volume30d).toFixed(2)," SOL"]})]}),(0,b.jsxs)("div",{children:[b.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"All Time"}),(0,b.jsxs)("div",{className:"text-lg font-bold text-green-400",children:[parseFloat(c.volumeAllTime).toFixed(2)," SOL"]})]})]})]}),m.length>0&&(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[b.jsx("div",{className:"text-sm text-gray-400 mb-3",children:"7-Day Performance History"}),b.jsx("div",{className:"flex items-end justify-between h-32 gap-1",children:m.map((e,r)=>{let l=Math.max(...m.map(e=>Math.abs(e.roi))),a=l>0?Math.abs(e.roi)/l*100:0;return b.jsx("div",{className:"flex-1 flex flex-col items-center",children:b.jsx("div",{className:`w-full ${e.roi>=0?"bg-green-500":"bg-red-500"} rounded-t`,style:{height:`${a}%`},title:`${e.roi.toFixed(2)}% ROI`})},r)})}),b.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center",children:"Daily ROI performance"})]}),b.jsx("div",{className:"mt-6 bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:(0,b.jsxs)("div",{className:"text-xs text-gray-400",children:[b.jsx("strong",{className:"text-white",children:"Note:"})," Performance metrics are calculated based on trade history and updated every 5 minutes. Rankings are based on ROI compared to all agents on the platform."]})})]})]}):(0,b.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6 text-center",children:[b.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCA"}),b.jsx("p",{className:"text-gray-400",children:"No performance data available yet"}),b.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Agent needs to make some trades first"})]})}process.env.NEXT_PUBLIC_BACKEND_URL,process.env.NEXT_PUBLIC_BACKEND_URL;let nr="https://degenagent-backend.onrender.com/api";function nl(){let e=(0,N.useParams)().pubkey,{publicKey:r,sendTransaction:l}=(0,j.O)(),{connection:a}=(0,S.R)(),[h,o]=(0,y.useState)(null),[c,u]=(0,y.useState)(!0),[d,f]=(0,y.useState)(""),[m,g]=(0,y.useState)(!1),[p,x]=(0,y.useState)(!1),[v,w]=(0,y.useState)(0),[k,C]=(0,y.useState)("overview"),L=async()=>{try{let r=await E.Z.get(`${nr}/agent/${e}`);o(r.data),u(!1)}catch(e){console.error("Error fetching agent:",e),u(!1)}},z=async()=>{if(r&&d){g(!0);try{let h=parseFloat(d),o=await E.Z.post(`${nr}/agent/${e}/deposit`,{amount:h,userWallet:r.toString()}),c=Buffer.from(o.data.transaction,"base64"),u=M.YW.from(c),m=await l(u,a);await a.confirmTransaction(m,"confirmed"),f(""),L(),alert("Deposit successful!")}catch(e){console.error("Error depositing:",e),alert(e.response?.data?.error||"Failed to deposit")}finally{g(!1)}}},R=async()=>{if(r){x(!0);try{let h=await E.Z.post(`${nr}/agent/${e}/claim`,{userWallet:r.toString()}),o=Buffer.from(h.data.transaction,"base64"),c=M.YW.from(o),u=await l(c,a);await a.confirmTransaction(u,"confirmed"),L(),alert("Revenue claimed successfully!")}catch(e){console.error("Error claiming:",e),alert(e.response?.data?.error||"Failed to claim revenue")}finally{x(!1)}}};return c?b.jsx("div",{className:"max-w-6xl mx-auto px-3 sm:px-6 lg:px-8 py-12 sm:py-20 text-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-solana-purple"}),b.jsx("div",{className:"text-lg sm:text-xl",children:"Loading agent..."})]})}):h?(0,b.jsxs)("div",{className:"max-w-6xl mx-auto px-3 sm:px-6 lg:px-8 py-6 sm:py-12",children:[(0,b.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[b.jsx(s$.Z,{name:h.name,size:"xl"}),b.jsx("h1",{className:"text-2xl sm:text-4xl font-bold",children:h.name})]}),b.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold w-fit ${"Active"===h.status?"bg-green-500/20 text-green-500 shadow-lg shadow-green-500/20":"bg-gray-500/20 text-gray-500"}`,children:h.status})]}),b.jsx("p",{className:"text-gray-400 text-sm sm:text-lg mb-4",children:h.purpose}),b.jsx("div",{className:"bg-gradient-to-r from-purple-900/50 to-pink-900/50 border border-purple-500/50 rounded-xl p-4 mb-4",children:b.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:(0,b.jsxs)("div",{className:"flex-1",children:[b.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Token Contract Address (CA)"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[b.jsx("code",{className:"text-white font-mono text-sm bg-black/30 px-3 py-2 rounded flex-1 break-all",children:h.tokenMint}),b.jsx("button",{onClick:()=>{navigator.clipboard.writeText(h.tokenMint),alert("Token CA copied to clipboard!")},className:"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg font-semibold text-sm whitespace-nowrap transition",children:"\uD83D\uDCCB Copy CA"})]})]})})}),b.jsx("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 text-xs sm:text-sm",children:(0,b.jsxs)("div",{className:"text-gray-500 break-all",children:["Agent: ",b.jsx("span",{className:"text-gray-400 font-mono",children:no(h.agentWallet)})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-6 sm:mb-8",children:[b.jsx(na,{label:"Vault Balance",value:`${h.vaultBalance.toFixed(4)} SOL`,highlight:!0}),b.jsx(na,{label:"Total Trades",value:h.totalTrades}),b.jsx(na,{label:"Total Volume",value:`$${h.totalVolume}`}),b.jsx(na,{label:"Win Rate",value:"N/A"})]}),b.jsx("div",{className:"mb-6",children:(0,b.jsxs)("div",{className:"flex gap-2 border-b border-gray-700",children:[b.jsx("button",{onClick:()=>C("overview"),className:`px-6 py-3 font-semibold transition ${"overview"===k?"text-purple-400 border-b-2 border-purple-400":"text-gray-400 hover:text-gray-300"}`,children:"\uD83D\uDCCA Overview"}),b.jsx("button",{onClick:()=>C("trade"),className:`px-6 py-3 font-semibold transition ${"trade"===k?"text-green-400 border-b-2 border-green-400":"text-gray-400 hover:text-gray-300"}`,children:"\uD83D\uDCB0 Trade"}),b.jsx("button",{onClick:()=>C("indicators"),className:`px-6 py-3 font-semibold transition ${"indicators"===k?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,children:"\uD83D\uDCC8 Indicators"}),b.jsx("button",{onClick:()=>C("performance"),className:`px-6 py-3 font-semibold transition ${"performance"===k?"text-yellow-400 border-b-2 border-yellow-400":"text-gray-400 hover:text-gray-300"}`,children:"\uD83C\uDFC6 Performance"}),b.jsx("button",{onClick:()=>C("code"),className:`px-6 py-3 font-semibold transition ${"code"===k?"text-pink-400 border-b-2 border-pink-400":"text-gray-400 hover:text-gray-300"}`,children:"⚡ Custom Code"})]})}),"overview"===k&&b.jsx(b.Fragment,{children:b.jsx("div",{className:"mb-6 sm:mb-8",children:b.jsx(sD,{agentId:e})})}),"trade"===k&&b.jsx(b.Fragment,{children:b.jsx("div",{className:"mb-6 sm:mb-8",children:b.jsx(O,{agentId:e})})}),"indicators"===k&&b.jsx(b.Fragment,{children:b.jsx("div",{className:"mb-6 sm:mb-8",children:b.jsx(ns,{agentId:e})})}),"performance"===k&&b.jsx(b.Fragment,{children:b.jsx("div",{className:"mb-6 sm:mb-8",children:b.jsx(nn,{agentId:e})})}),"code"===k&&b.jsx(b.Fragment,{children:b.jsx("div",{className:"mb-6 sm:mb-8",children:b.jsx(ni,{agentId:e})})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[(0,b.jsxs)("div",{className:"bg-gray-900/50 rounded-xl p-5 sm:p-6 border border-gray-800",children:[b.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-3 sm:mb-4",children:"Fund Agent"}),b.jsx("p",{className:"text-sm sm:text-base text-gray-400 mb-4",children:"Deposit SOL to enable autonomous trading"}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[b.jsx("input",{type:"number",step:"0.1",min:"0",placeholder:"Amount in SOL",className:"flex-1 px-4 py-3 sm:py-4 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-solana-purple focus:ring-2 focus:ring-solana-purple/20 transition-all text-base touch-manipulation",value:d,onChange:e=>f(e.target.value)}),r?b.jsx("button",{onClick:z,disabled:m||!d,className:"bg-solana-purple hover:bg-purple-700 active:scale-95 disabled:bg-gray-700 disabled:cursor-not-allowed disabled:transform-none text-white font-bold py-3 sm:py-4 px-6 sm:px-8 rounded-xl transition-all shadow-lg hover:shadow-xl touch-manipulation min-h-[48px] whitespace-nowrap",children:m?"Depositing...":"Deposit"}):b.jsx("div",{className:"[&>button]:w-full sm:[&>button]:w-auto [&>button]:min-h-[48px] [&>button]:rounded-xl",children:b.jsx(_.a,{})})]})]}),(0,b.jsxs)("div",{className:"bg-gray-900/50 rounded-xl p-5 sm:p-6 border border-gray-800",children:[b.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-3 sm:mb-4",children:"Claim Revenue"}),b.jsx("p",{className:"text-sm sm:text-base text-gray-400 mb-4",children:"Token holders earn share of profits"}),(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-500",children:["Your Tokens: ",b.jsx("span",{className:"text-solana-green font-bold",children:v.toLocaleString()})]}),r?b.jsx("button",{onClick:R,disabled:p||0===v,className:"w-full bg-solana-green hover:bg-green-600 active:scale-95 disabled:bg-gray-700 disabled:cursor-not-allowed disabled:transform-none text-white font-bold py-3 sm:py-4 px-6 rounded-xl transition-all shadow-lg hover:shadow-xl touch-manipulation min-h-[48px]",children:p?"Claiming...":"Claim Revenue"}):b.jsx("div",{className:"[&>button]:w-full [&>button]:min-h-[48px] [&>button]:rounded-xl",children:b.jsx(_.a,{})})]})]})]}),(0,b.jsxs)("div",{className:"bg-gray-900/50 rounded-xl p-5 sm:p-6 border border-gray-800 mb-6 sm:mb-8",children:[b.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4",children:"Performance Overview"}),b.jsx("div",{className:"h-48 sm:h-64 flex items-end justify-around gap-2 sm:gap-4 pb-4",children:[65,78,82,71,88,92,85].map((e,r)=>(0,b.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-2",children:[b.jsx("div",{className:"w-full bg-solana-purple/20 rounded-t-lg relative overflow-hidden",style:{height:`${e}%`},children:b.jsx("div",{className:"absolute bottom-0 w-full bg-solana-purple rounded-t-lg transition-all duration-500",style:{height:"100%"}})}),(0,b.jsxs)("span",{className:"text-xs text-gray-500",children:["D",r+1]})]},r))})]}),(0,b.jsxs)("div",{className:"bg-gray-900/50 rounded-xl p-5 sm:p-6 border border-gray-800",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[b.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Recent Trades"}),(0,b.jsxs)("span",{className:"text-xs sm:text-sm text-gray-500",children:[h.recentTrades.length," trades"]})]}),0===h.recentTrades.length?(0,b.jsxs)("div",{className:"text-center py-8 sm:py-12",children:[b.jsx("div",{className:"text-4xl sm:text-6xl mb-4 opacity-50",children:"\uD83D\uDCCA"}),b.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"No trades yet. Fund your agent to start trading!"})]}):b.jsx("div",{className:"space-y-2 sm:space-y-3",children:h.recentTrades.map((e,r)=>b.jsx(nh,{trade:e},r))})]})]}):b.jsx("div",{className:"max-w-6xl mx-auto px-3 sm:px-6 lg:px-8 py-12 sm:py-20 text-center",children:b.jsx("div",{className:"text-lg sm:text-xl text-red-500",children:"Agent not found"})})}function na({label:e,value:r,highlight:l}){return(0,b.jsxs)("div",{className:`bg-gray-900/50 rounded-xl p-4 sm:p-6 border transition-all ${l?"border-solana-purple shadow-lg shadow-solana-purple/20":"border-gray-800"}`,children:[b.jsx("div",{className:"text-gray-500 text-xs sm:text-sm mb-1",children:e}),b.jsx("div",{className:`text-lg sm:text-2xl font-bold ${l?"text-solana-purple":"text-solana-green"}`,children:r})]})}function nh({trade:e}){return(0,b.jsxs)("div",{className:"bg-gray-800/50 rounded-xl p-4 sm:p-5 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 hover:bg-gray-800/70 transition-all",children:[(0,b.jsxs)("div",{className:"flex-1",children:[b.jsx("div",{className:"font-mono text-xs sm:text-sm text-gray-400 mb-1",children:no(e.signature)}),b.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:e.timestamp?new Date(1e3*e.timestamp).toLocaleString():"N/A"})]}),b.jsx("a",{href:`https://explorer.solana.com/tx/${e.signature}?cluster=devnet`,target:"_blank",rel:"noopener noreferrer",className:"text-solana-purple hover:text-purple-400 font-medium text-sm sm:text-base whitespace-nowrap touch-manipulation active:scale-95 transition-all",children:"View Explorer →"})]})}function no(e){return`${e.slice(0,4)}...${e.slice(-4)}`}},52577:(e,r,l)=>{"use strict";l.d(r,{Z:()=>h});var a=l(10326);function h({name:e,size:r="md",className:l=""}){let h=(e=>{let r=0;for(let l=0;l<e.length;l++)r=e.charCodeAt(l)+((r<<5)-r);let l=["from-purple-500 to-pink-500","from-blue-500 to-cyan-500","from-green-500 to-emerald-500","from-orange-500 to-red-500","from-indigo-500 to-purple-500","from-pink-500 to-rose-500","from-teal-500 to-green-500","from-yellow-500 to-orange-500"];return l[Math.abs(r)%l.length]})(e),o=(e=>{let r=e.trim().split(" ");return r.length>=2?(r[0][0]+r[1][0]).toUpperCase():e.slice(0,2).toUpperCase()})(e);return a.jsx("div",{className:`
        ${{sm:"w-8 h-8 text-xs",md:"w-12 h-12 text-sm",lg:"w-16 h-16 text-lg",xl:"w-24 h-24 text-2xl"}[r]}
        rounded-full
        bg-gradient-to-br ${h}
        flex items-center justify-center
        font-bold text-white
        shadow-lg
        ${l}
      `,children:o})}},79752:(e,r,l)=>{"use strict";var a=l(82602),h=o(Error);function o(e){return r.displayName=e.displayName||e.name,r;function r(r){return r&&(r=a.apply(null,arguments)),new e(r)}}e.exports=h,h.eval=o(EvalError),h.range=o(RangeError),h.reference=o(ReferenceError),h.syntax=o(SyntaxError),h.type=o(TypeError),h.uri=o(URIError),h.create=o},82602:e=>{!function(){var r;function l(e){for(var r,l,a,h,o=1,c=[].slice.call(arguments),u=0,d=e.length,f="",m=!1,g=!1,p=function(){return c[o++]};u<d;++u)if(r=e[u],m)switch(m=!1,"."==r?(g=!1,r=e[++u]):"0"==r&&"."==e[u+1]?(g=!0,u+=2,r=e[u]):g=!0,h=function(){for(var l="";/\d/.test(e[u]);)l+=e[u++],r=e[u];return l.length>0?parseInt(l):null}(),r){case"b":f+=parseInt(p(),10).toString(2);break;case"c":"string"==typeof(l=p())||l instanceof String?f+=l:f+=String.fromCharCode(parseInt(l,10));break;case"d":f+=parseInt(p(),10);break;case"f":a=String(parseFloat(p()).toFixed(h||6)),f+=g?a:a.replace(/^0/,"");break;case"j":f+=JSON.stringify(p());break;case"o":f+="0"+parseInt(p(),10).toString(8);break;case"s":f+=p();break;case"x":f+="0x"+parseInt(p(),10).toString(16);break;case"X":f+="0x"+parseInt(p(),10).toString(16).toUpperCase();break;default:f+=r}else"%"===r?m=!0:f+=r;return f}(r=e.exports=l).format=l,r.vsprintf=function(e,r){return l.apply(null,[e].concat(r))},"undefined"!=typeof console&&"function"==typeof console.log&&(r.printf=function(){console.log(l.apply(null,arguments))})}()},44322:e=>{function r(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(function(l){var a=e[l];"object"!=typeof a||Object.isFrozen(a)||r(a)}),e}r.default=r;class l{constructor(e){void 0===e.data&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function a(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function h(e,...r){let l=Object.create(null);for(let r in e)l[r]=e[r];return r.forEach(function(e){for(let r in e)l[r]=e[r]}),l}let o=e=>!!e.kind;class c{constructor(e,r){this.buffer="",this.classPrefix=r.classPrefix,e.walk(this)}addText(e){this.buffer+=a(e)}openNode(e){if(!o(e))return;let r=e.kind;e.sublanguage||(r=`${this.classPrefix}${r}`),this.span(r)}closeNode(e){o(e)&&(this.buffer+="</span>")}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}class u{constructor(){this.rootNode={children:[]},this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){let r={kind:e,children:[]};this.add(r),this.stack.push(r)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,r){return"string"==typeof r?e.addText(r):r.children&&(e.openNode(r),r.children.forEach(r=>this._walk(e,r)),e.closeNode(r)),e}static _collapse(e){"string"!=typeof e&&e.children&&(e.children.every(e=>"string"==typeof e)?e.children=[e.children.join("")]:e.children.forEach(e=>{u._collapse(e)}))}}class d extends u{constructor(e){super(),this.options=e}addKeyword(e,r){""!==e&&(this.openNode(r),this.addText(e),this.closeNode())}addText(e){""!==e&&this.add(e)}addSublanguage(e,r){let l=e.root;l.kind=r,l.sublanguage=!0,this.add(l)}toHTML(){return new c(this,this.options).value()}finalize(){return!0}}function f(e){return e?"string"==typeof e?e:e.source:null}let m=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,g="[a-zA-Z]\\w*",p="[a-zA-Z_]\\w*",x="\\b\\d+(\\.\\d+)?",v="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",b="\\b(0b[01]+)",y={begin:"\\\\[\\s\\S]",relevance:0},w={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},N=function(e,r,l={}){let a=h({className:"comment",begin:e,end:r,contains:[]},l);return a.contains.push(w),a.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):",relevance:0}),a},j=N("//","$"),S=N("/\\*","\\*/"),_=N("#","$");var M=Object.freeze({__proto__:null,MATCH_NOTHING_RE:/\b\B/,IDENT_RE:g,UNDERSCORE_IDENT_RE:p,NUMBER_RE:x,C_NUMBER_RE:v,BINARY_NUMBER_RE:b,RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:(e={})=>{let r=/^#![ ]*\//;return e.binary&&(e.begin=function(...e){return e.map(e=>f(e)).join("")}(r,/.*\b/,e.binary,/\b.*/)),h({className:"meta",begin:r,end:/$/,relevance:0,"on:begin":(e,r)=>{0!==e.index&&r.ignoreMatch()}},e)},BACKSLASH_ESCAPE:y,APOS_STRING_MODE:{className:"string",begin:"'",end:"'",illegal:"\\n",contains:[y]},QUOTE_STRING_MODE:{className:"string",begin:'"',end:'"',illegal:"\\n",contains:[y]},PHRASAL_WORDS_MODE:w,COMMENT:N,C_LINE_COMMENT_MODE:j,C_BLOCK_COMMENT_MODE:S,HASH_COMMENT_MODE:_,NUMBER_MODE:{className:"number",begin:x,relevance:0},C_NUMBER_MODE:{className:"number",begin:v,relevance:0},BINARY_NUMBER_MODE:{className:"number",begin:b,relevance:0},CSS_NUMBER_MODE:{className:"number",begin:x+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},REGEXP_MODE:{begin:/(?=\/[^/\n]*\/)/,contains:[{className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[y,{begin:/\[/,end:/\]/,relevance:0,contains:[y]}]}]},TITLE_MODE:{className:"title",begin:g,relevance:0},UNDERSCORE_TITLE_MODE:{className:"title",begin:p,relevance:0},METHOD_GUARD:{begin:"\\.\\s*"+p,relevance:0},END_SAME_AS_BEGIN:function(e){return Object.assign(e,{"on:begin":(e,r)=>{r.data._beginMatch=e[1]},"on:end":(e,r)=>{r.data._beginMatch!==e[1]&&r.ignoreMatch()}})}});function E(e,r){"."===e.input[e.index-1]&&r.ignoreMatch()}function k(e,r){r&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=E,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,void 0===e.relevance&&(e.relevance=0))}function C(e,r){Array.isArray(e.illegal)&&(e.illegal=function(...e){return"("+e.map(e=>f(e)).join("|")+")"}(...e.illegal))}function L(e,r){if(e.match){if(e.begin||e.end)throw Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function z(e,r){void 0===e.relevance&&(e.relevance=1)}let R=["of","and","for","in","not","or","if","then","parent","list","value"],P={"after:highlightElement":({el:e,result:r,text:l})=>{let h=O(e);if(!h.length)return;let o=document.createElement("div");o.innerHTML=r.value,r.value=function(e,r,l){let h=0,o="",c=[];function u(){return e.length&&r.length?e[0].offset!==r[0].offset?e[0].offset<r[0].offset?e:r:"start"===r[0].event?e:r:e.length?e:r}function d(e){o+="<"+T(e)+[].map.call(e.attributes,function(e){return" "+e.nodeName+'="'+a(e.value)+'"'}).join("")+">"}function f(e){o+="</"+T(e)+">"}function m(e){("start"===e.event?d:f)(e.node)}for(;e.length||r.length;){let r=u();if(o+=a(l.substring(h,r[0].offset)),h=r[0].offset,r===e){c.reverse().forEach(f);do m(r.splice(0,1)[0]),r=u();while(r===e&&r.length&&r[0].offset===h);c.reverse().forEach(d)}else"start"===r[0].event?c.push(r[0].node):c.pop(),m(r.splice(0,1)[0])}return o+a(l.substr(h))}(h,O(o),l)}};function T(e){return e.nodeName.toLowerCase()}function O(e){let r=[];return function e(l,a){for(let h=l.firstChild;h;h=h.nextSibling)3===h.nodeType?a+=h.nodeValue.length:1!==h.nodeType||(r.push({event:"start",offset:a,node:h}),a=e(h,a),T(h).match(/br|hr|img|input/)||r.push({event:"stop",offset:a,node:h}));return a}(e,0),r}let D={},$=e=>{console.error(e)},A=(e,...r)=>{console.log(`WARN: ${e}`,...r)},I=(e,r)=>{D[`${e}/${r}`]||(console.log(`Deprecated as of ${e}. ${r}`),D[`${e}/${r}`]=!0)},W=Symbol("nomatch");var B=function(e){let o=Object.create(null),c=Object.create(null),u=[],g=!0,p=/(^(<[^>]+>|\t|)+|\n)/gm,x="Could not find the language '{}', did you forget to load/include a language module?",v={disableAutodetect:!0,name:"Plain text",contains:[]},b={noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:null,__emitter:d};function y(e){return b.noHighlightRe.test(e)}function w(e,r,l,a){let h="",o="";"object"==typeof r?(h=e,l=r.ignoreIllegals,o=r.language,a=void 0):(I("10.7.0","highlight(lang, code, ...args) has been deprecated."),I("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),o=e,h=r);let c={code:h,language:o};F("before:highlight",c);let u=c.result?c.result:N(c.language,c.code,l,a);return u.code=c.code,F("after:highlight",u),u}function N(e,r,c,d){function p(){null!=E.subLanguage?function(){if(""===O)return;let e=null;if("string"==typeof E.subLanguage){if(!o[E.subLanguage]){T.addText(O);return}e=N(E.subLanguage,O,!0,P[E.subLanguage]),P[E.subLanguage]=e.top}else e=j(O,E.subLanguage.length?E.subLanguage:null);E.relevance>0&&(A+=e.relevance),T.addSublanguage(e.emitter,e.language)}():function(){if(!E.keywords){T.addText(O);return}let e=0;E.keywordPatternRe.lastIndex=0;let r=E.keywordPatternRe.exec(O),l="";for(;r;){l+=O.substring(e,r.index);let a=function(e,r){let l=S.case_insensitive?r[0].toLowerCase():r[0];return Object.prototype.hasOwnProperty.call(e.keywords,l)&&e.keywords[l]}(E,r);if(a){let[e,h]=a;if(T.addText(l),l="",A+=h,e.startsWith("_"))l+=r[0];else{let l=S.classNameAliases[e]||e;T.addKeyword(r[0],l)}}else l+=r[0];e=E.keywordPatternRe.lastIndex,r=E.keywordPatternRe.exec(O)}l+=O.substr(e),T.addText(l)}(),O=""}function v(e){return e.className&&T.openNode(S.classNameAliases[e.className]||e.className),E=Object.create(e,{parent:{value:E}})}let y={};function w(a,h){let o=h&&h[0];if(O+=a,null==o)return p(),0;if("begin"===y.type&&"end"===h.type&&y.index===h.index&&""===o){if(O+=r.slice(h.index,h.index+1),!g){let r=Error("0 width match regex");throw r.languageName=e,r.badRule=y.rule,r}return 1}if(y=h,"begin"===h.type)return function(e){let r=e[0],a=e.rule,h=new l(a);for(let l of[a.__beforeBegin,a["on:begin"]])if(l&&(l(e,h),h.isMatchIgnored))return 0===E.matcher.regexIndex?(O+=r[0],1):(V=!0,0);return a&&a.endSameAsBegin&&(a.endRe=RegExp(r.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),a.skip?O+=r:(a.excludeBegin&&(O+=r),p(),a.returnBegin||a.excludeBegin||(O=r)),v(a),a.returnBegin?0:r.length}(h);if("illegal"!==h.type||c){if("end"===h.type){let e=function(e){let a=e[0],h=r.substr(e.index),o=function e(r,a,h){let o=function(e,r){let l=e&&e.exec(r);return l&&0===l.index}(r.endRe,h);if(o){if(r["on:end"]){let e=new l(r);r["on:end"](a,e),e.isMatchIgnored&&(o=!1)}if(o){for(;r.endsParent&&r.parent;)r=r.parent;return r}}if(r.endsWithParent)return e(r.parent,a,h)}(E,e,h);if(!o)return W;let c=E;c.skip?O+=a:(c.returnEnd||c.excludeEnd||(O+=a),p(),c.excludeEnd&&(O=a));do E.className&&T.closeNode(),E.skip||E.subLanguage||(A+=E.relevance),E=E.parent;while(E!==o.parent);return o.starts&&(o.endSameAsBegin&&(o.starts.endRe=o.endRe),v(o.starts)),c.returnEnd?0:a.length}(h);if(e!==W)return e}}else{let e=Error('Illegal lexeme "'+o+'" for mode "'+(E.className||"<unnamed>")+'"');throw e.mode=E,e}if("illegal"===h.type&&""===o)return 1;if(B>1e5&&B>3*h.index)throw Error("potential infinite loop, way more iterations than matches");return O+=o,o.length}let S=D(e);if(!S)throw $(x.replace("{}",e)),Error('Unknown language: "'+e+'"');let _=function(e,{plugins:r}){function l(r,l){return RegExp(f(r),"m"+(e.case_insensitive?"i":"")+(l?"g":""))}class a{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(e,r){r.position=this.position++,this.matchIndexes[this.matchAt]=r,this.regexes.push([r,e]),this.matchAt+=RegExp(e.toString()+"|").exec("").length-1+1}compile(){0===this.regexes.length&&(this.exec=()=>null);let e=this.regexes.map(e=>e[1]);this.matcherRe=l(function(e,r="|"){let l=0;return e.map(e=>{let r=l+=1,a=f(e),h="";for(;a.length>0;){let e=m.exec(a);if(!e){h+=a;break}h+=a.substring(0,e.index),a=a.substring(e.index+e[0].length),"\\"===e[0][0]&&e[1]?h+="\\"+String(Number(e[1])+r):(h+=e[0],"("===e[0]&&l++)}return h}).map(e=>`(${e})`).join(r)}(e),!0),this.lastIndex=0}exec(e){this.matcherRe.lastIndex=this.lastIndex;let r=this.matcherRe.exec(e);if(!r)return null;let l=r.findIndex((e,r)=>r>0&&void 0!==e),a=this.matchIndexes[l];return r.splice(0,l),Object.assign(r,a)}}class o{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(e){if(this.multiRegexes[e])return this.multiRegexes[e];let r=new a;return this.rules.slice(e).forEach(([e,l])=>r.addRule(e,l)),r.compile(),this.multiRegexes[e]=r,r}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(e,r){this.rules.push([e,r]),"begin"===r.type&&this.count++}exec(e){let r=this.getMatcher(this.regexIndex);r.lastIndex=this.lastIndex;let l=r.exec(e);if(this.resumingScanAtSamePosition()){if(l&&l.index===this.lastIndex);else{let r=this.getMatcher(0);r.lastIndex=this.lastIndex+1,l=r.exec(e)}}return l&&(this.regexIndex+=l.position+1,this.regexIndex===this.count&&this.considerAll()),l}}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=h(e.classNameAliases||{}),function r(a,c){if(a.isCompiled)return a;[L].forEach(e=>e(a,c)),e.compilerExtensions.forEach(e=>e(a,c)),a.__beforeBegin=null,[k,C,z].forEach(e=>e(a,c)),a.isCompiled=!0;let u=null;if("object"==typeof a.keywords&&(u=a.keywords.$pattern,delete a.keywords.$pattern),a.keywords&&(a.keywords=function e(r,l,a="keyword"){let h={};return"string"==typeof r?o(a,r.split(" ")):Array.isArray(r)?o(a,r):Object.keys(r).forEach(function(a){Object.assign(h,e(r[a],l,a))}),h;function o(e,r){l&&(r=r.map(e=>e.toLowerCase())),r.forEach(function(r){var l,a;let o=r.split("|");h[o[0]]=[e,(l=o[0],(a=o[1])?Number(a):R.includes(l.toLowerCase())?0:1)]})}}(a.keywords,e.case_insensitive)),a.lexemes&&u)throw Error("ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) ");return u=u||a.lexemes||/\w+/,a.keywordPatternRe=l(u,!0),c&&(a.begin||(a.begin=/\B|\b/),a.beginRe=l(a.begin),a.endSameAsBegin&&(a.end=a.begin),a.end||a.endsWithParent||(a.end=/\B|\b/),a.end&&(a.endRe=l(a.end)),a.terminatorEnd=f(a.end)||"",a.endsWithParent&&c.terminatorEnd&&(a.terminatorEnd+=(a.end?"|":"")+c.terminatorEnd)),a.illegal&&(a.illegalRe=l(a.illegal)),a.contains||(a.contains=[]),a.contains=[].concat(...a.contains.map(function(e){var r;return((r="self"===e?a:e).variants&&!r.cachedVariants&&(r.cachedVariants=r.variants.map(function(e){return h(r,{variants:null},e)})),r.cachedVariants)?r.cachedVariants:!function e(r){return!!r&&(r.endsWithParent||e(r.starts))}(r)?Object.isFrozen(r)?h(r):r:h(r,{starts:r.starts?h(r.starts):null})})),a.contains.forEach(function(e){r(e,a)}),a.starts&&r(a.starts,c),a.matcher=function(e){let r=new o;return e.contains.forEach(e=>r.addRule(e.begin,{rule:e,type:"begin"})),e.terminatorEnd&&r.addRule(e.terminatorEnd,{type:"end"}),e.illegal&&r.addRule(e.illegal,{type:"illegal"}),r}(a),a}(e)}(S,{plugins:u}),M="",E=d||_,P={},T=new b.__emitter(b);!function(){let e=[];for(let r=E;r!==S;r=r.parent)r.className&&e.unshift(r.className);e.forEach(e=>T.openNode(e))}();let O="",A=0,I=0,B=0,V=!1;try{for(E.matcher.considerAll();;){B++,V?V=!1:E.matcher.considerAll(),E.matcher.lastIndex=I;let e=E.matcher.exec(r);if(!e)break;let l=r.substring(I,e.index),a=w(l,e);I=e.index+a}return w(r.substr(I)),T.closeAllNodes(),T.finalize(),M=T.toHTML(),{relevance:Math.floor(A),value:M,language:e,illegal:!1,emitter:T,top:E}}catch(l){if(l.message&&l.message.includes("Illegal"))return{illegal:!0,illegalBy:{msg:l.message,context:r.slice(I-100,I+100),mode:l.mode},sofar:M,relevance:0,value:a(r),emitter:T};if(g)return{illegal:!1,relevance:0,value:a(r),emitter:T,language:e,top:E,errorRaised:l};throw l}}function j(e,r){r=r||b.languages||Object.keys(o);let l=function(e){let r={relevance:0,emitter:new b.__emitter(b),value:a(e),illegal:!1,top:v};return r.emitter.addText(e),r}(e),h=r.filter(D).filter(V).map(r=>N(r,e,!1));h.unshift(l);let[c,u]=h.sort((e,r)=>{if(e.relevance!==r.relevance)return r.relevance-e.relevance;if(e.language&&r.language){if(D(e.language).supersetOf===r.language)return 1;if(D(r.language).supersetOf===e.language)return -1}return 0});return c.second_best=u,c}let S=/^(<[^>]+>|\t)+/gm;function _(e){let r=function(e){let r=e.className+" ";r+=e.parentNode?e.parentNode.className:"";let l=b.languageDetectRe.exec(r);if(l){let r=D(l[1]);return r||(A(x.replace("{}",l[1])),A("Falling back to no-highlight mode for this block.",e)),r?l[1]:"no-highlight"}return r.split(/\s+/).find(e=>y(e)||D(e))}(e);if(y(r))return;F("before:highlightElement",{el:e,language:r});let l=e.textContent,a=r?w(l,{language:r,ignoreIllegals:!0}):j(l);F("after:highlightElement",{el:e,result:a,text:l}),e.innerHTML=a.value,function(e,r,l){let a=r?c[r]:l;e.classList.add("hljs"),a&&e.classList.add(a)}(e,r,a.language),e.result={language:a.language,re:a.relevance,relavance:a.relevance},a.second_best&&(e.second_best={language:a.second_best.language,re:a.second_best.relevance,relavance:a.second_best.relevance})}let E=()=>{E.called||(E.called=!0,I("10.6.0","initHighlighting() is deprecated.  Use highlightAll() instead."),document.querySelectorAll("pre code").forEach(_))},T=!1;function O(){if("loading"===document.readyState){T=!0;return}document.querySelectorAll("pre code").forEach(_)}function D(e){return o[e=(e||"").toLowerCase()]||o[c[e]]}function B(e,{languageName:r}){"string"==typeof e&&(e=[e]),e.forEach(e=>{c[e.toLowerCase()]=r})}function V(e){let r=D(e);return r&&!r.disableAutodetect}function F(e,r){u.forEach(function(l){l[e]&&l[e](r)})}for(let l in"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",function(){T&&O()},!1),Object.assign(e,{highlight:w,highlightAuto:j,highlightAll:O,fixMarkup:function(e){var r;return I("10.2.0","fixMarkup will be removed entirely in v11.0"),I("10.2.0","Please see https://github.com/highlightjs/highlight.js/issues/2534"),r=e,b.tabReplace||b.useBR?r.replace(p,e=>"\n"===e?b.useBR?"<br>":e:b.tabReplace?e.replace(/\t/g,b.tabReplace):e):r},highlightElement:_,highlightBlock:function(e){return I("10.7.0","highlightBlock will be removed entirely in v12.0"),I("10.7.0","Please use highlightElement now."),_(e)},configure:function(e){e.useBR&&(I("10.3.0","'useBR' will be removed entirely in v11.0"),I("10.3.0","Please see https://github.com/highlightjs/highlight.js/issues/2559")),b=h(b,e)},initHighlighting:E,initHighlightingOnLoad:function(){I("10.6.0","initHighlightingOnLoad() is deprecated.  Use highlightAll() instead."),T=!0},registerLanguage:function(r,l){let a=null;try{a=l(e)}catch(e){if($("Language definition for '{}' could not be registered.".replace("{}",r)),g)$(e);else throw e;a=v}a.name||(a.name=r),o[r]=a,a.rawDefinition=l.bind(null,e),a.aliases&&B(a.aliases,{languageName:r})},unregisterLanguage:function(e){for(let r of(delete o[e],Object.keys(c)))c[r]===e&&delete c[r]},listLanguages:function(){return Object.keys(o)},getLanguage:D,registerAliases:B,requireLanguage:function(e){I("10.4.0","requireLanguage will be removed entirely in v11."),I("10.4.0","Please see https://github.com/highlightjs/highlight.js/pull/2844");let r=D(e);if(r)return r;throw Error("The '{}' language is required, but not loaded.".replace("{}",e))},autoDetection:V,inherit:h,addPlugin:function(e){var r;(r=e)["before:highlightBlock"]&&!r["before:highlightElement"]&&(r["before:highlightElement"]=e=>{r["before:highlightBlock"](Object.assign({block:e.el},e))}),r["after:highlightBlock"]&&!r["after:highlightElement"]&&(r["after:highlightElement"]=e=>{r["after:highlightBlock"](Object.assign({block:e.el},e))}),u.push(e)},vuePlugin:function(e){let r={props:["language","code","autodetect"],data:function(){return{detectedLanguage:"",unknownLanguage:!1}},computed:{className(){return this.unknownLanguage?"":"hljs "+this.detectedLanguage},highlighted(){if(!this.autoDetect&&!e.getLanguage(this.language))return console.warn(`The language "${this.language}" you specified could not be found.`),this.unknownLanguage=!0,a(this.code);let r={};return this.autoDetect?(r=e.highlightAuto(this.code),this.detectedLanguage=r.language):(r=e.highlight(this.language,this.code,this.ignoreIllegals),this.detectedLanguage=this.language),r.value},autoDetect(){var e;return!this.language||!!((e=this.autodetect)||""===e)},ignoreIllegals:()=>!0},render(e){return e("pre",{},[e("code",{class:this.className,domProps:{innerHTML:this.highlighted}})])}};return{Component:r,VuePlugin:{install(e){e.component("highlightjs",r)}}}}(e).VuePlugin}),e.debugMode=function(){g=!1},e.safeMode=function(){g=!0},e.versionString="10.7.3",M)"object"==typeof M[l]&&r(M[l]);return Object.assign(e,M),e.addPlugin({"before:highlightElement":({el:e})=>{b.useBR&&(e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ /]*>/g,"\n"))},"after:highlightElement":({result:e})=>{b.useBR&&(e.value=e.value.replace(/\n/g,"<br>"))}}),e.addPlugin(P),e.addPlugin({"after:highlightElement":({result:e})=>{b.tabReplace&&(e.value=e.value.replace(S,e=>e.replace(/\t/g,b.tabReplace)))}}),e}({});e.exports=B},98290:e=>{let r="[A-Za-z$_][0-9A-Za-z$_]*",l=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],a=["true","false","null","undefined","NaN","Infinity"],h=[].concat(["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],["arguments","this","super","console","window","document","localStorage","module","global"],["Intl","DataView","Number","Math","Date","String","RegExp","Object","Function","Boolean","Error","Symbol","Set","Map","WeakSet","WeakMap","Proxy","Reflect","JSON","Promise","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Float32Array","Array","Uint8Array","Uint8ClampedArray","ArrayBuffer","BigInt64Array","BigUint64Array","BigInt"],["EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"]);function o(e){return c("(?=",e,")")}function c(...e){return e.map(e=>e?"string"==typeof e?e:e.source:null).join("")}e.exports=function(e){let u={$pattern:r,keyword:l.concat(["type","namespace","typedef","interface","public","private","protected","implements","declare","abstract","readonly"]),literal:a,built_in:h.concat(["any","void","number","boolean","string","object","never","enum"])},d={className:"meta",begin:"@"+r},f=(e,r,l)=>{let a=e.contains.findIndex(e=>e.label===r);if(-1===a)throw Error("can not find mode to replace");e.contains.splice(a,1,l)},m=function(e){let u=(e,{after:r})=>{let l="</"+e[0].slice(1);return -1!==e.input.indexOf(l,r)},d=/<[A-Za-z0-9\\._:-]+/,f=/\/[A-Za-z0-9\\._:-]+>|\/>/,m={$pattern:r,keyword:l,literal:a,built_in:h},g="[0-9](_?[0-9])*",p=`\\.(${g})`,x="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",v={className:"number",variants:[{begin:`(\\b(${x})((${p})|\\.)?|(${p}))[eE][+-]?(${g})\\b`},{begin:`\\b(${x})\\b((${p})\\b|\\.)?|(${p})\\b`},{begin:"\\\b(0|[1-9](_?[0-9])*)n\\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},b={className:"subst",begin:"\\$\\{",end:"\\}",keywords:m,contains:[]},y={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,b],subLanguage:"xml"}},w={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,b],subLanguage:"css"}},N={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,b]},j={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+",contains:[{className:"type",begin:"\\{",end:"\\}",relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},S=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,y,w,N,v,e.REGEXP_MODE];b.contains=S.concat({begin:/\{/,end:/\}/,keywords:m,contains:["self"].concat(S)});let _=[].concat(j,b.contains),M=_.concat([{begin:/\(/,end:/\)/,keywords:m,contains:["self"].concat(_)}]),E={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:m,contains:M};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:m,exports:{PARAMS_CONTAINS:M},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,y,w,N,j,v,{begin:c(/[{,\n]\s*/,o(c(/(((\/\/.*$)|(\/\*(\*[^/]|[^*])*\*\/))\s*)*/,r+"\\s*:"))),relevance:0,contains:[{className:"attr",begin:r+o("\\s*:"),relevance:0}]},{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[j,e.REGEXP_MODE,{className:"function",begin:"(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:m,contains:M}]}]},{begin:/,/,relevance:0},{className:"",begin:/\s/,end:/\s*/,skip:!0},{variants:[{begin:"<>",end:"</>"},{begin:d,"on:begin":(e,r)=>{let l=e[0].length+e.index,a=e.input[l];if("<"===a){r.ignoreMatch();return}">"!==a||u(e,{after:l})||r.ignoreMatch()},end:f}],subLanguage:"xml",contains:[{begin:d,end:f,skip:!0,contains:["self"]}]}],relevance:0},{className:"function",beginKeywords:"function",end:/[{;]/,excludeEnd:!0,keywords:m,contains:["self",e.inherit(e.TITLE_MODE,{begin:r}),E],illegal:/%/},{beginKeywords:"while if switch catch for"},{className:"function",begin:e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,contains:[E,e.inherit(e.TITLE_MODE,{begin:r})]},{variants:[{begin:"\\."+r},{begin:"\\$"+r}],relevance:0},{className:"class",beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"[\]]/,contains:[{beginKeywords:"extends"},e.UNDERSCORE_TITLE_MODE]},{begin:/\b(?=constructor)/,end:/[{;]/,excludeEnd:!0,contains:[e.inherit(e.TITLE_MODE,{begin:r}),"self",E]},{begin:"(get|set)\\s+(?="+r+"\\()",end:/\{/,keywords:"get set",contains:[e.inherit(e.TITLE_MODE,{begin:r}),{begin:/\(\)/},E]},{begin:/\$[(.]/}]}}(e);return Object.assign(m.keywords,u),m.exports.PARAMS_CONTAINS.push(d),m.contains=m.contains.concat([d,{beginKeywords:"namespace",end:/\{/,excludeEnd:!0},{beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:"interface extends"}]),f(m,"shebang",e.SHEBANG()),f(m,"use_strict",{className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/}),m.contains.find(e=>"function"===e.className).relevance=0,Object.assign(m,{name:"TypeScript",aliases:["ts","tsx"]}),m}},11405:(e,r,l)=>{"use strict";var a=l(44322),h=l(79752);r.highlight=c,r.highlightAuto=function(e,r){var l,u,d,f,m=r||{},g=m.subset||a.listLanguages(),p=m.prefix,x=g.length,v=-1;if(null==p&&(p=o),"string"!=typeof e)throw h("Expected `string` for value, got `%s`",e);for(u={relevance:0,language:null,value:[]},l={relevance:0,language:null,value:[]};++v<x;)f=g[v],a.getLanguage(f)&&((d=c(f,e,r)).language=f,d.relevance>u.relevance&&(u=d),d.relevance>l.relevance&&(u=l,l=d));return u.language&&(l.secondBest=u),l},r.registerLanguage=function(e,r){a.registerLanguage(e,r)},r.listLanguages=function(){return a.listLanguages()},r.registerAlias=function(e,r){var l,h=e;for(l in r&&((h={})[e]=r),h)a.registerAliases(h[l],{languageName:l})},u.prototype.addText=function(e){var r,l,a=this.stack;""!==e&&((l=(r=a[a.length-1]).children[r.children.length-1])&&"text"===l.type?l.value+=e:r.children.push({type:"text",value:e}))},u.prototype.addKeyword=function(e,r){this.openNode(r),this.addText(e),this.closeNode()},u.prototype.addSublanguage=function(e,r){var l=this.stack,a=l[l.length-1],h=e.rootNode.children;a.children=a.children.concat(r?{type:"element",tagName:"span",properties:{className:[r]},children:h}:h)},u.prototype.openNode=function(e){var r=this.stack,l=this.options.classPrefix+e,a=r[r.length-1],h={type:"element",tagName:"span",properties:{className:[l]},children:[]};a.children.push(h),r.push(h)},u.prototype.closeNode=function(){this.stack.pop()},u.prototype.closeAllNodes=d,u.prototype.finalize=d,u.prototype.toHTML=function(){return""};var o="hljs-";function c(e,r,l){var c,d=a.configure({}),f=(l||{}).prefix;if("string"!=typeof e)throw h("Expected `string` for name, got `%s`",e);if(!a.getLanguage(e))throw h("Unknown language: `%s` is not registered",e);if("string"!=typeof r)throw h("Expected `string` for value, got `%s`",r);if(null==f&&(f=o),a.configure({__emitter:u,classPrefix:f}),c=a.highlight(r,{language:e,ignoreIllegals:!0}),a.configure(d||{}),c.errorRaised)throw c.errorRaised;return{relevance:c.relevance,language:c.language,value:c.emitter.rootNode.children}}function u(e){this.options=e,this.rootNode={children:[]},this.stack=[this.rootNode]}function d(){}},85544:(e,r,l)=>{"use strict";l.r(r),l.d(r,{default:()=>a});let a=(0,l(68570).createProxy)(String.raw`C:\Users\Usuario\Desktop\Agent.fun\frontend\app\agent\[pubkey]\page.tsx#default`)},4798:e=>{e.exports=function(e,r){(null==r||r>e.length)&&(r=e.length);for(var l=0,a=Array(r);l<r;l++)a[l]=e[l];return a},e.exports.__esModule=!0,e.exports.default=e.exports},4450:(e,r,l)=>{var a=l(4798);e.exports=function(e){if(Array.isArray(e))return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},61092:(e,r,l)=>{var a=l(61518);e.exports=function(e,r,l){return(r=a(r))in e?Object.defineProperty(e,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[r]=l,e},e.exports.__esModule=!0,e.exports.default=e.exports},65684:e=>{function r(){return e.exports=r=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var l=arguments[r];for(var a in l)({}).hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,r.apply(null,arguments)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},96372:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},72048:e=>{e.exports=function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2718:(e,r,l)=>{var a=l(62081);e.exports=function(e,r){if(null==e)return{};var l,h,o=a(e,r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(h=0;h<c.length;h++)l=c[h],-1===r.indexOf(l)&&({}).propertyIsEnumerable.call(e,l)&&(o[l]=e[l])}return o},e.exports.__esModule=!0,e.exports.default=e.exports},62081:e=>{e.exports=function(e,r){if(null==e)return{};var l={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==r.indexOf(a))continue;l[a]=e[a]}return l},e.exports.__esModule=!0,e.exports.default=e.exports},84653:(e,r,l)=>{var a=l(4450),h=l(96372),o=l(81287),c=l(72048);e.exports=function(e){return a(e)||h(e)||o(e)||c()},e.exports.__esModule=!0,e.exports.default=e.exports},31961:(e,r,l)=>{var a=l(12054).default;e.exports=function(e,r){if("object"!=a(e)||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var h=l.call(e,r||"default");if("object"!=a(h))return h;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},61518:(e,r,l)=>{var a=l(12054).default,h=l(31961);e.exports=function(e){var r=h(e,"string");return"symbol"==a(r)?r:r+""},e.exports.__esModule=!0,e.exports.default=e.exports},12054:e=>{function r(l){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(l)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},81287:(e,r,l)=>{var a=l(4798);e.exports=function(e,r){if(e){if("string"==typeof e)return a(e,r);var l=({}).toString.call(e).slice(8,-1);return"Object"===l&&e.constructor&&(l=e.constructor.name),"Map"===l||"Set"===l?Array.from(e):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?a(e,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}};var r=require("../../../webpack-runtime.js");r.C(e);var l=e=>r(r.s=e),a=r.X(0,[850,260,464,146],()=>l(15757));module.exports=a})();